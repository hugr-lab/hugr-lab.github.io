"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[6249],{3532:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>h,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"examples/rest-owm","title":"HTTP REST API: OpenWeatherMap Example","description":"An example of using the HTTP REST API with OpenWeatherMap as a data source.","source":"@site/docs/9-examples/4-rest-owm.mdx","sourceDirName":"9-examples","slug":"/examples/rest-owm","permalink":"/docs/examples/rest-owm","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/9-examples/4-rest-owm.mdx","tags":[],"version":"current","lastUpdatedBy":"vgsml","lastUpdatedAt":1756711789000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"HTTP REST API: OpenWeatherMap Example","description":"An example of using the HTTP REST API with OpenWeatherMap as a data source."},"sidebar":"docsSidebar","previous":{"title":"MySQL: HR CRM Example","permalink":"/docs/examples/mysql"},"next":{"title":"DuckDB: Spatial - OpenStreetMap Example","permalink":"/docs/examples/duckdb-spatial"}}');var s=t(4848),n=t(8453),l=t(6528),i=t(1470),c=t(9365);const o={sidebar_position:4,title:"HTTP REST API: OpenWeatherMap Example",description:"An example of using the HTTP REST API with OpenWeatherMap as a data source."},h=void 0,d={},p=[{value:"Technical Overview",id:"technical-overview",level:2},{value:"Example",id:"example",level:2}];function u(e){const a={code:"code",h2:"h2",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.code,{children:"hugr"})," GraphQL engine can integrate with HTTP REST APIs, allowing you to fetch data from external services like OpenWeatherMap. This example demonstrates how to set up a simple GraphQL schema that queries weather data using the OpenWeatherMap API."]}),"\n",(0,s.jsx)(a.h2,{id:"technical-overview",children:"Technical Overview"}),"\n",(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.code,{children:"hugr"})," engine implements the data source type for HTTP REST APIs - ",(0,s.jsx)(a.code,{children:"http"}),". Technically, http data sources are used DuckDB backend to fetch data through the special SQL function ",(0,s.jsx)(a.code,{children:"http_data_source_request_scalar"}),". This function allows you to make HTTP requests and retrieve data in a structured format, which can then be used in your GraphQL queries. To add HTTP RESTFull APIs to the unified GraphQL schema, the ",(0,s.jsx)(a.code,{children:"hugr"})," functions should be defined as ",(0,s.jsx)(a.code,{children:"http_data_source_request_scalar"})," calls."]}),"\n",(0,s.jsxs)(a.p,{children:["The function also accessible through the ",(0,s.jsx)(a.code,{children:"hugr"})," GraphQL API, allowing you to query data from external REST APIs directly in your GraphQL queries:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-graphql",children:'query getCurrentWeather{\n  function{\n    core{\n      http_data_source_request_scalar(\n        source: "owm"\n        path: "/data/2.5/weather"\n        method: "GET"\n        headers: {},\n        parameters: {\n          lat: 35.6895\n          lon: 139.6917\n        },\n        body: {},\n        jq: ""\n      )\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(a.p,{children:"It uses the data source parameters to perform http requests."}),"\n",(0,s.jsx)(a.h2,{id:"example",children:"Example"}),"\n","\n",(0,s.jsxs)(i.A,{children:[(0,s.jsx)(c.A,{value:"readme",label:"Getting Started",children:(0,s.jsx)(l.A,{url:"https://raw.githubusercontent.com/hugr-lab/examples/main/examples/openweathermap/README.md",fallback:"\ud83d\udcc4 Loading documentation..."})}),(0,s.jsx)(c.A,{value:"manual_schema",label:"Manual GraphQL Schema",children:(0,s.jsx)(l.A,{url:"https://raw.githubusercontent.com/hugr-lab/examples/main/examples/openweathermap/schema.graphql",fallback:"\ud83d\udccb Loading schema...",transform:e=>"```graphql\n"+e+"\n```"})}),(0,s.jsx)(c.A,{value:"OpenAPI spec",label:"OpenAPI Specification",children:(0,s.jsx)(l.A,{url:"https://raw.githubusercontent.com/hugr-lab/examples/main/examples/openweathermap/spec.yaml",fallback:"\ud83d\udccb Loading data...",transform:e=>"```yaml\n"+e+"\n```"})})]})]})}function m(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},6528:(e,a,t)=>{t.d(a,{A:()=>c});var r=t(6540),s=t(7941),n=t(3092),l=t(1028),i=t(4848);function c({url:e,fallback:a="Loading...",transform:t}){const[c,o]=(0,r.useState)(""),[h,d]=(0,r.useState)(!0),[p,u]=(0,r.useState)(null);return(0,r.useEffect)((()=>{fetch(e).then((e=>{if(!e.ok)throw new Error("Failed to fetch");return e.text()})).then((e=>{o(t?t(e):e),d(!1)})).catch((e=>{u(e.message),d(!1)}))}),[e,t]),h?(0,i.jsx)("div",{className:"alert alert--info",children:a}):p?(0,i.jsxs)("div",{className:"alert alert--danger",children:["Error: ",p]}):(0,i.jsx)("div",{className:"markdown",children:(0,i.jsx)(s.oz,{remarkPlugins:[n.A],components:{code(e){const{children:a,className:t,node:r,...s}=e,n=/language-(\w+)/.exec(t||""),c=r?.position&&r.position.start.line!==r.position.end.line;return n?(0,i.jsx)(l.A,{language:n[1],children:String(a).replace(/\n$/,"")}):c?(0,i.jsx)(l.A,{children:String(a).replace(/\n$/,"")}):(0,i.jsx)("code",{className:t,...s,children:a})},pre(e){const{children:a}=e;return(0,i.jsx)(i.Fragment,{children:a})}},children:c})})}}}]);