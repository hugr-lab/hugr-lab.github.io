"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[4231],{8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var t=s(6540);const a={},o=t.createContext(a);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(o.Provider,{value:n},e.children)}},8485:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"engine-configuration/data-sources/index","title":"Overview","description":"The hugr query engine supports multiple data sources, allowing you to connect to various databases and data stores. Each data source can be configured with its own connection settings and schema definitions (catalogs).","source":"@site/docs/4-engine-configuration/1-data-sources/index.md","sourceDirName":"4-engine-configuration/1-data-sources","slug":"/engine-configuration/data-sources/","permalink":"/docs/engine-configuration/data-sources/","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/site/docs/4-engine-configuration/1-data-sources/index.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Overview"},"sidebar":"docsSidebar","previous":{"title":"Data Sources","permalink":"/docs/category/data-sources"},"next":{"title":"Overview of Engine Configuration","permalink":"/docs/docs/4-engine-configuration"}}');var a=s(4848),o=s(8453);const i={sidebar_position:1,title:"Overview"},d=void 0,r={},c=[{value:"Supported Data Sources",id:"supported-data-sources",level:2},{value:"Configuration",id:"configuration",level:2},{value:"System tables",id:"system-tables",level:3},{value:"Data Sources Table",id:"data-sources-table",level:4},{value:"Catalog sources Table",id:"catalog-sources-table",level:4},{value:"System functions",id:"system-functions",level:3},{value:"Example Configuration",id:"example-configuration",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"hugr"})," query engine supports multiple data sources, allowing you to connect to various databases and data stores. Each data source can be configured with its own connection settings and schema definitions (catalogs).\nThis flexibility enables you to work with different types of data and integrate them into your applications seamlessly."]}),"\n",(0,a.jsx)(n.h2,{id:"supported-data-sources",children:"Supported Data Sources"}),"\n",(0,a.jsxs)(n.p,{children:["The following data sources are supported by the ",(0,a.jsx)(n.code,{children:"hugr"})," query engine:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"PostgreSQL"}),": A powerful, open-source relational database system."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"MySQL"}),": A widely used open-source relational database management system."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"DuckDB"}),": A lightweight, embedded database engine."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"HTTP RESTFul API"}),": Allows you to connect to any RESTful API endpoint."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"DuckLake"}),": A data lake solution that supports various storage systems, including cloud storage and distributed file systems. DuckLake is designed to handle large volumes of data and provides efficient querying capabilities and able to manage data and schema changes through snapshots (in development)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Extension"}),": A special data source types that allows you to extend GraphQL data objects (tables and views) to add extra subquery (joins) and function calls fields. This is useful for creating custom logic or aggregations using data from other sources. The extension data source can also defines cross-data source views, which allow you to combine data from multiple data sources into a single view. This is useful for creating complex queries that span multiple data sources."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"system-tables",children:"System tables"}),"\n",(0,a.jsx)(n.p,{children:"Data sources can be configured by unified GraphQL API. This allows for a consistent and streamlined approach to managing data sources across different environments and use cases.\nThe following system tables are available for managing data sources:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"data_sources"}),": Contains information about all configured data sources."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"catalog_sources"}),": Contains information about the one or more schema definitions (catalogs)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"catalogs"}),": Contains information about the assigned catalogs to the data sources."]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"data-sources-table",children:"Data Sources Table"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"data_sources"})," table contains the following fields:"]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Field"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"name"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Unique name of the data source."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"type"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsxs)(n.td,{children:["Type of the data source (e.g., ",(0,a.jsx)(n.code,{children:"postgres"}),", ",(0,a.jsx)(n.code,{children:"mysql"}),", etc.)."]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"prefix"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Prefix for the data source schema types and queries to avoid naming conflicts."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"description"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Description of the data source."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"as_module"})}),(0,a.jsx)(n.td,{children:"Boolean"}),(0,a.jsx)(n.td,{children:"Indicates if the data source should be attached to the GraphQL schema as a module."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"disabled"})}),(0,a.jsx)(n.td,{children:"Boolean"}),(0,a.jsx)(n.td,{children:"Indicates if the data source is disabled, and shouldn't be loaded at startup."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"path"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Connection string or path, it depends on data source type."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"read_only"})}),(0,a.jsx)(n.td,{children:"Boolean"}),(0,a.jsx)(n.td,{children:"Indicates if the data source is read-only, it would not allow to generate GraphQL mutations."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"self_defined"})}),(0,a.jsx)(n.td,{children:"Boolean"}),(0,a.jsx)(n.td,{children:"Indicates if the data source is self-defined, some of the data source types may return their schema definition with out needs to make catalogs."})]})]})]}),"\n",(0,a.jsx)(n.h4,{id:"catalog-sources-table",children:"Catalog sources Table"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"catalog_sources"})," table contains the following fields:"]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Field"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"name"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Unique name of the catalog."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"type"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsxs)(n.td,{children:["Type of the catalog (e.g., ",(0,a.jsx)(n.code,{children:"uri"}),", ",(0,a.jsx)(n.code,{children:"localFS"}),", etc.)."]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"description"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Description of the catalog."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"path"})}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"Path to the catalog file or URI."})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"system-functions",children:"System functions"}),"\n",(0,a.jsxs)(n.p,{children:["To manually load/reload or unload the data sources you can use the ",(0,a.jsx)(n.code,{children:"load_data_sources"})," and ",(0,a.jsx)(n.code,{children:"unload_data_sources"})," mutation function. These mutations allow you to dynamically manage the data sources without needing to restart the engine."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'mutation loadDataSources {\n  core {\n    load_data_sources(name: "northwind") {\n      success\n      message\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'mutation unloadDataSources {\n  core {\n    unload_data_sources(name: "northwind") {\n      success\n      message\n    }\n  }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["All GraphQL queries and mutations to manage data sources are available in the module ",(0,a.jsx)(n.code,{children:"core"})," in the root query and mutation types."]}),"\n",(0,a.jsxs)(n.p,{children:["In clustered environments, to load/reload or unload data sources, you can use the ",(0,a.jsx)(n.code,{children:"load_data_sources"})," and ",(0,a.jsx)(n.code,{children:"unload_data_sources"})," mutations in ",(0,a.jsx)(n.code,{children:"core.cluster"})," module. These mutations ensure that the data sources are synchronized across all nodes in the cluster."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'mutation loadDataSources {\n  core {\n    cluster{\n      load_data_sources(name: "northwind") {\n        success\n        message\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'mutation unloadDataSources {\n  core {\n    cluster {\n      unload_data_sources(name: "northwind") {\n        success\n        message\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["You can get the list of all data sources by querying the ",(0,a.jsx)(n.code,{children:"data_sources"})," table:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"query getDataSources {\n  core {\n    data_sources {\n      name\n      description\n      as_module\n      disabled\n      path\n      prefix\n      read_only\n      self_defined\n      type\n      catalogs {\n        name\n        description\n        path\n        type\n      }\n    }\n  }\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,a.jsx)(n.p,{children:"Here is an example of how to configure a PostgreSQL data source:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"mutation addNorthwindDataSet($data: data_sources_mut_input_data! = {}) {\n  core {\n    insert_data_sources(data: $data) {\n      name\n      description\n      as_module\n      disabled\n      path\n      prefix\n      read_only\n      self_defined\n      type\n      catalogs {\n        name\n        description\n        path\n        type\n      }\n    }\n  }\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Variables:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "name": "northwind",\n    "type": "postgres",\n    "prefix": "nw",\n    "description": "The Northwind database example",\n    "read_only": false,\n    "as_module": true,\n    "path": "postgres://hugr:hugr_password@postgres:5432/northwind",\n    "catalogs": [\n      {\n        "name": "northwind",\n        "type": "uri",\n        "description": "Northwind database schema",\n        "path": "/workspace/get-started/schema"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["To learn how to mutation works go to the ",(0,a.jsx)(n.a,{href:"/docs/graphql/mutations",children:"GraphQL Operations - Mutations"})," section."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);