"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2635],{4874:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"graphql/queries/sorting-pagination","title":"Sorting & Pagination","description":"Hugr provides comprehensive sorting and pagination capabilities to control the order and size of query results. You can sort by multiple fields, including nested fields from relations, and paginate results using limit and offset.","source":"@site/docs/5-graphql/1-queries/4-sorting-pagination.md","sourceDirName":"5-graphql/1-queries","slug":"/graphql/queries/sorting-pagination","permalink":"/docs/graphql/queries/sorting-pagination","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/5-graphql/1-queries/4-sorting-pagination.md","tags":[],"version":"current","lastUpdatedBy":"Claude","lastUpdatedAt":1762461702000,"sidebarPosition":4,"frontMatter":{"title":"Sorting & Pagination","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Filtering","permalink":"/docs/graphql/queries/filtering"},"next":{"title":"Relations & Subqueries","permalink":"/docs/graphql/queries/relations"}}');var s=i(4848),t=i(8453);const l={title:"Sorting & Pagination",sidebar_position:4},d="Sorting & Pagination",a={},o=[{value:"Basic Sorting",id:"basic-sorting",level:2},{value:"Sort by Single Field",id:"sort-by-single-field",level:3},{value:"Sort by Multiple Fields",id:"sort-by-multiple-fields",level:3},{value:"Sorting by Field Types",id:"sorting-by-field-types",level:2},{value:"Numeric Fields",id:"numeric-fields",level:3},{value:"String Fields",id:"string-fields",level:3},{value:"Date and Timestamp Fields",id:"date-and-timestamp-fields",level:3},{value:"Boolean Fields",id:"boolean-fields",level:3},{value:"Sorting by Related Fields",id:"sorting-by-related-fields",level:2},{value:"One-to-One Relations",id:"one-to-one-relations",level:3},{value:"Multiple Relation Levels",id:"multiple-relation-levels",level:3},{value:"Sorting by Aggregated Relations",id:"sorting-by-aggregated-relations",level:3},{value:"Field Aliases in ORDER BY",id:"field-aliases-in-order-by",level:2},{value:"Nested Sorting",id:"nested-sorting",level:2},{value:"order_by in Subqueries",id:"order_by-in-subqueries",level:3},{value:"nested_order_by",id:"nested_order_by",level:3},{value:"Basic Pagination",id:"basic-pagination",level:2},{value:"Using Limit",id:"using-limit",level:3},{value:"Using Offset",id:"using-offset",level:3},{value:"Offset-Based Pagination",id:"offset-based-pagination",level:2},{value:"Page-by-Page Navigation",id:"page-by-page-navigation",level:3},{value:"Calculating Total Pages",id:"calculating-total-pages",level:3},{value:"Cursor-Based Pagination",id:"cursor-based-pagination",level:2},{value:"Bi-Directional Cursor Pagination",id:"bi-directional-cursor-pagination",level:3},{value:"Distinct Results",id:"distinct-results",level:2},{value:"DISTINCT ON Specific Fields",id:"distinct-on-specific-fields",level:3},{value:"Multiple DISTINCT Fields",id:"multiple-distinct-fields",level:3},{value:"DISTINCT with ORDER BY",id:"distinct-with-order-by",level:3},{value:"Nested Pagination",id:"nested-pagination",level:2},{value:"Limit Subquery Results",id:"limit-subquery-results",level:3},{value:"nested_limit and nested_offset",id:"nested_limit-and-nested_offset",level:3},{value:"Sorting Aggregations",id:"sorting-aggregations",level:2},{value:"Sort Bucket Aggregations",id:"sort-bucket-aggregations",level:3},{value:"Sort by Multiple Aggregations",id:"sort-by-multiple-aggregations",level:3},{value:"Sort by Key Fields",id:"sort-by-key-fields",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"1. Use Indexes for Sorting",id:"1-use-indexes-for-sorting",level:3},{value:"2. Limit Results",id:"2-limit-results",level:3},{value:"3. Use Cursor Pagination for Large Datasets",id:"3-use-cursor-pagination-for-large-datasets",level:3},{value:"4. Limit Nested Queries",id:"4-limit-nested-queries",level:3},{value:"5. Sort by Indexed Fields",id:"5-sort-by-indexed-fields",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Most Recent Records",id:"most-recent-records",level:3},{value:"Top N by Value",id:"top-n-by-value",level:3},{value:"Alphabetical List",id:"alphabetical-list",level:3},{value:"Random Sample",id:"random-sample",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"sorting--pagination",children:"Sorting & Pagination"})}),"\n",(0,s.jsx)(n.p,{children:"Hugr provides comprehensive sorting and pagination capabilities to control the order and size of query results. You can sort by multiple fields, including nested fields from relations, and paginate results using limit and offset."}),"\n",(0,s.jsx)(n.h2,{id:"basic-sorting",children:"Basic Sorting"}),"\n",(0,s.jsx)(n.h3,{id:"sort-by-single-field",children:"Sort by Single Field"}),"\n",(0,s.jsxs)(n.p,{children:["Sort results using the ",(0,s.jsx)(n.code,{children:"order_by"})," argument:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(order_by: [{ field: "name", direction: ASC }]) {\n    id\n    name\n    email\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Direction options:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ASC"})," - Ascending order (A-Z, 0-9, oldest to newest)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DESC"})," - Descending order (Z-A, 9-0, newest to oldest)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"sort-by-multiple-fields",children:"Sort by Multiple Fields"}),"\n",(0,s.jsx)(n.p,{children:"Specify multiple sorting criteria (applied in order):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(order_by: [\n    { field: "country", direction: ASC }\n    { field: "city", direction: ASC }\n    { field: "name", direction: ASC }\n  ]) {\n    id\n    name\n    city\n    country\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Equivalent to SQL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"ORDER BY country ASC, city ASC, name ASC\n"})}),"\n",(0,s.jsx)(n.h2,{id:"sorting-by-field-types",children:"Sorting by Field Types"}),"\n",(0,s.jsx)(n.h3,{id:"numeric-fields",children:"Numeric Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(order_by: [{ field: "price", direction: DESC }]) {\n    id\n    name\n    price\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"string-fields",children:"String Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(order_by: [{ field: "name", direction: ASC }]) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"String sorting is:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Case-sensitive by default"}),"\n",(0,s.jsx)(n.li,{children:"Follows database collation rules"}),"\n",(0,s.jsx)(n.li,{children:"Alphabetical order (A-Z or Z-A)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"date-and-timestamp-fields",children:"Date and Timestamp Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(order_by: [{ field: "created_at", direction: DESC }]) {\n    id\n    created_at\n    status\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"boolean-fields",children:"Boolean Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(order_by: [\n    { field: "in_stock", direction: DESC }  # true before false\n    { field: "name", direction: ASC }\n  ]) {\n    id\n    name\n    in_stock\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"sorting-by-related-fields",children:"Sorting by Related Fields"}),"\n",(0,s.jsx)(n.h3,{id:"one-to-one-relations",children:"One-to-One Relations"}),"\n",(0,s.jsx)(n.p,{children:"Sort by fields in related objects:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(order_by: [\n    { field: "customer.country", direction: ASC }\n    { field: "customer.name", direction: ASC }\n  ]) {\n    id\n    customer {\n      country: country\n      name\n    }\n    total\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important"}),": The related field must be selected in the query:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Valid - customer.name is selected\nquery {\n  orders(order_by: [{ field: "customer.name", direction: ASC }]) {\n    id\n    customer {\n      name  # \u2713 Selected\n    }\n  }\n}\n\n# Invalid - customer.name not selected\nquery {\n  orders(order_by: [{ field: "customer.name", direction: ASC }]) {\n    id\n    customer {\n      id  # \u2717 name not selected\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"multiple-relation-levels",children:"Multiple Relation Levels"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  order_details(order_by: [\n    { field: "product.category.name", direction: ASC }\n    { field: "product.name", direction: ASC }\n  ]) {\n    id\n    product {\n      name\n      category {\n        name\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"sorting-by-aggregated-relations",children:"Sorting by Aggregated Relations"}),"\n",(0,s.jsx)(n.p,{children:"Sort by aggregation results:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(order_by: [\n    { field: "orders_aggregation.total.sum", direction: DESC }\n  ]) {\n    id\n    name\n    orders_aggregation {\n      total {\n        sum  # Must be selected\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"field-aliases-in-order-by",children:"Field Aliases in ORDER BY"}),"\n",(0,s.jsxs)(n.p,{children:["When using field aliases, reference the alias in ",(0,s.jsx)(n.code,{children:"order_by"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(order_by: [\n    { field: "category_name", direction: ASC }\n  ]) {\n    id\n    name\n    category {\n      category_name: name  # Alias\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"nested-sorting",children:"Nested Sorting"}),"\n",(0,s.jsxs)(n.p,{children:["For subqueries, use ",(0,s.jsx)(n.code,{children:"order_by"})," or ",(0,s.jsx)(n.code,{children:"nested_order_by"}),":"]}),"\n",(0,s.jsx)(n.h3,{id:"order_by-in-subqueries",children:"order_by in Subqueries"}),"\n",(0,s.jsx)(n.p,{children:"Applies before the join:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers {\n    id\n    name\n    orders(\n      order_by: [{ field: "created_at", direction: DESC }]\n      limit: 5\n    ) {\n      id\n      created_at\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"nested_order_by",children:"nested_order_by"}),"\n",(0,s.jsx)(n.p,{children:"Applies after the join:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers {\n    id\n    name\n    orders(\n      nested_order_by: [{ field: "created_at", direction: DESC }]\n      nested_limit: 5\n    ) {\n      id\n      created_at\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"basic-pagination",children:"Basic Pagination"}),"\n",(0,s.jsx)(n.h3,{id:"using-limit",children:"Using Limit"}),"\n",(0,s.jsx)(n.p,{children:"Limit the number of results:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers(limit: 10) {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Default limits:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Maximum: 2000 records per query"}),"\n",(0,s.jsx)(n.li,{children:"No default limit (returns all records up to maximum)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"using-offset",children:"Using Offset"}),"\n",(0,s.jsx)(n.p,{children:"Skip a number of records:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers(\n    limit: 10\n    offset: 20\n  ) {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns records 21-30."}),"\n",(0,s.jsx)(n.h2,{id:"offset-based-pagination",children:"Offset-Based Pagination"}),"\n",(0,s.jsx)(n.h3,{id:"page-by-page-navigation",children:"Page-by-Page Navigation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query GetPage($limit: Int!, $offset: Int!) {\n  customers(\n    order_by: [{ field: "id", direction: ASC }]\n    limit: $limit\n    offset: $offset\n  ) {\n    id\n    name\n    email\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Variables for page 3 with 20 items per page (offset calculated client-side):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "offset": 40\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Calculate offset in your application code:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const page = 2;  // Zero-indexed: page 0, 1, 2, ...\nconst pageSize = 20;\nconst offset = page * pageSize;  // 2 * 20 = 40\n"})}),"\n",(0,s.jsx)(n.h3,{id:"calculating-total-pages",children:"Calculating Total Pages"}),"\n",(0,s.jsx)(n.p,{children:"Use aggregation to get total count:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query GetPageWithTotal($limit: Int!, $offset: Int!) {\n  customers(\n    order_by: [{ field: "id", direction: ASC }]\n    limit: $limit\n    offset: $offset\n  ) {\n    id\n    name\n  }\n\n  customers_aggregation {\n    _rows_count\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Calculate pages and offset in your application:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const page = 2;\nconst pageSize = 20;\nconst offset = page * pageSize;\n\n// Execute query with calculated offset\nconst result = await query({\n  limit: pageSize,\n  offset: offset\n});\n\n// Calculate total pages\nconst totalPages = Math.ceil(\n  result.customers_aggregation._rows_count / pageSize\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"cursor-based-pagination",children:"Cursor-Based Pagination"}),"\n",(0,s.jsx)(n.p,{children:"For better performance with large datasets, use cursor-based pagination:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query GetCustomersAfter($cursor: Int!, $limit: Int!) {\n  customers(\n    filter: { id: { gt: $cursor } }\n    order_by: [{ field: "id", direction: ASC }]\n    limit: $limit\n  ) {\n    id\n    name\n    email\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Get next page using last ID as cursor:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "cursor": 100,\n  "limit": 20\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"bi-directional-cursor-pagination",children:"Bi-Directional Cursor Pagination"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Forward pagination\nquery GetNext($cursor: Int!, $limit: Int!) {\n  customers(\n    filter: { id: { gt: $cursor } }\n    order_by: [{ field: "id", direction: ASC }]\n    limit: $limit\n  ) {\n    id\n    name\n  }\n}\n\n# Backward pagination\nquery GetPrevious($cursor: Int!, $limit: Int!) {\n  customers(\n    filter: { id: { lt: $cursor } }\n    order_by: [{ field: "id", direction: DESC }]\n    limit: $limit\n  ) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"distinct-results",children:"Distinct Results"}),"\n",(0,s.jsx)(n.h3,{id:"distinct-on-specific-fields",children:"DISTINCT ON Specific Fields"}),"\n",(0,s.jsx)(n.p,{children:"Get unique values for specified fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(distinct_on: ["country"]) {\n    country\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Returns one customer per unique country."}),"\n",(0,s.jsx)(n.h3,{id:"multiple-distinct-fields",children:"Multiple DISTINCT Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(distinct_on: ["country", "city"]) {\n    country\n    city\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Returns one customer per unique country-city combination."}),"\n",(0,s.jsx)(n.h3,{id:"distinct-with-order-by",children:"DISTINCT with ORDER BY"}),"\n",(0,s.jsx)(n.p,{children:"Combine DISTINCT with sorting:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(\n    distinct_on: ["customer_id"]\n    order_by: [\n      { field: "customer_id", direction: ASC }\n      { field: "created_at", direction: DESC }\n    ]\n  ) {\n    customer_id\n    created_at\n    total\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Returns the most recent order for each customer."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important"}),": When using ",(0,s.jsx)(n.code,{children:"distinct_on"}),", the first ",(0,s.jsx)(n.code,{children:"order_by"})," field must be one of the ",(0,s.jsx)(n.code,{children:"distinct_on"})," fields."]}),"\n",(0,s.jsx)(n.h2,{id:"nested-pagination",children:"Nested Pagination"}),"\n",(0,s.jsx)(n.h3,{id:"limit-subquery-results",children:"Limit Subquery Results"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers {\n    id\n    name\n    # Get only 5 most recent orders\n    recent_orders: orders(\n      order_by: [{ field: "created_at", direction: DESC }]\n      limit: 5\n    ) {\n      id\n      created_at\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"nested_limit-and-nested_offset",children:"nested_limit and nested_offset"}),"\n",(0,s.jsx)(n.p,{children:"Control pagination after joins:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(limit: 10) {\n    id\n    name\n    orders(\n      nested_order_by: [{ field: "created_at", direction: DESC }]\n      nested_limit: 5\n      nested_offset: 0\n    ) {\n      id\n      created_at\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Difference between ",(0,s.jsx)(n.code,{children:"limit"})," and ",(0,s.jsx)(n.code,{children:"nested_limit"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"limit"})," - Applied before join (limits orders before joining to customers)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nested_limit"})," - Applied after join (limits orders per customer)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"sorting-aggregations",children:"Sorting Aggregations"}),"\n",(0,s.jsx)(n.h3,{id:"sort-bucket-aggregations",children:"Sort Bucket Aggregations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders_bucket_aggregation(\n    order_by: [\n      { field: "aggregations.total.sum", direction: DESC }\n    ]\n    limit: 10\n  ) {\n    key {\n      status\n    }\n    aggregations {\n      _rows_count\n      total {\n        sum  # Must be selected\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"sort-by-multiple-aggregations",children:"Sort by Multiple Aggregations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products_bucket_aggregation(\n    order_by: [\n      { field: "aggregations._rows_count", direction: DESC }\n      { field: "aggregations.price.avg", direction: ASC }\n    ]\n  ) {\n    key {\n      category {\n        name\n      }\n    }\n    aggregations {\n      _rows_count\n      price {\n        avg\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"sort-by-key-fields",children:"Sort by Key Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders_bucket_aggregation(\n    order_by: [\n      { field: "key.customer.country", direction: ASC }\n      { field: "aggregations.total.sum", direction: DESC }\n    ]\n  ) {\n    key {\n      customer {\n        country\n      }\n    }\n    aggregations {\n      total {\n        sum\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"1-use-indexes-for-sorting",children:"1. Use Indexes for Sorting"}),"\n",(0,s.jsx)(n.p,{children:"Ensure indexes exist on sorted fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- PostgreSQL example\nCREATE INDEX idx_customers_name ON customers(name);\nCREATE INDEX idx_orders_created_at ON orders(created_at DESC);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-limit-results",children:"2. Limit Results"}),"\n",(0,s.jsxs)(n.p,{children:["Always use ",(0,s.jsx)(n.code,{children:"limit"})," to prevent large result sets:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"# Good\nquery {\n  customers(limit: 100) {\n    id\n    name\n  }\n}\n\n# Avoid - May return millions of rows\nquery {\n  customers {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-use-cursor-pagination-for-large-datasets",children:"3. Use Cursor Pagination for Large Datasets"}),"\n",(0,s.jsx)(n.p,{children:"Offset pagination becomes slow with high offsets:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Slow for large offsets\nquery {\n  customers(\n    order_by: [{ field: "id", direction: ASC }]\n    offset: 1000000  # Slow!\n    limit: 20\n  ) {\n    id\n  }\n}\n\n# Faster with cursor\nquery {\n  customers(\n    filter: { id: { gt: 1000000 } }\n    order_by: [{ field: "id", direction: ASC }]\n    limit: 20\n  ) {\n    id\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"4-limit-nested-queries",children:"4. Limit Nested Queries"}),"\n",(0,s.jsx)(n.p,{children:"Always limit subquery results:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers(limit: 10) {\n    id\n    orders(limit: 10) {  # \u2713 Limit subquery\n      id\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-sort-by-indexed-fields",children:"5. Sort by Indexed Fields"}),"\n",(0,s.jsx)(n.p,{children:"Prefer sorting by indexed fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Good - Primary key is indexed\nquery {\n  customers(order_by: [{ field: "id", direction: ASC }]) {\n    id\n  }\n}\n\n# May be slow - Computed fields aren\'t indexed\nquery {\n  customers(order_by: [{ field: "full_name", direction: ASC }]) {\n    id\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"most-recent-records",children:"Most Recent Records"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(\n    order_by: [{ field: "created_at", direction: DESC }]\n    limit: 20\n  ) {\n    id\n    created_at\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"top-n-by-value",children:"Top N by Value"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(\n    order_by: [{ field: "sales_count", direction: DESC }]\n    limit: 10\n  ) {\n    id\n    name\n    sales_count\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"alphabetical-list",children:"Alphabetical List"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(\n    order_by: [{ field: "name", direction: ASC }]\n  ) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"random-sample",children:"Random Sample"}),"\n",(0,s.jsx)(n.p,{children:"While Hugr doesn't have built-in random ordering, you can:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Get total count"}),"\n",(0,s.jsx)(n.li,{children:"Generate random offsets"}),"\n",(0,s.jsx)(n.li,{children:"Fetch individual records"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  # Get total\n  customers_aggregation {\n    _rows_count\n  }\n}\n\n# Then fetch random offset\nquery GetRandom($randomOffset: Int!) {\n  customers(\n    offset: $randomOffset\n    limit: 1\n  ) {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Learn about ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/relations",children:"Relations"})," for working with related data"]}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/aggregations",children:"Aggregations"})," for sorting aggregated results"]}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/filtering",children:"Filtering"})," to combine with sorting and pagination"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var r=i(6540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);