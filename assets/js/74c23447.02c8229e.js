"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[9131],{4720:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"references/directives","title":"Directives Reference","description":"hugr uses custom GraphQL directives to define data source models. These directives allow you to specify additional metadata and behavior for your data sources, such as relationships between tables, subqueries, function calls, and more.","source":"@site/docs/8-references/1-directives.md","sourceDirName":"8-references","slug":"/references/directives","permalink":"/docs/references/directives","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/8-references/1-directives.md","tags":[],"version":"current","lastUpdatedBy":"vgsml","lastUpdatedAt":1759235264000,"sidebarPosition":2,"frontMatter":{"title":"Directives Reference","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/docs/references/"},"next":{"title":"Examples","permalink":"/docs/category/examples"}}');var r=t(4848),s=t(8453);const a={title:"Directives Reference",sidebar_position:2},d=void 0,o={},l=[{value:"List of Directives",id:"list-of-directives",level:2},{value:"Directive Reference",id:"directive-reference",level:2},{value:"@table",id:"table",level:3},{value:"@view",id:"view",level:3},{value:"@function",id:"function",level:3},{value:"@module",id:"module",level:3},{value:"@args",id:"args",level:3},{value:"@named",id:"named",level:3},{value:"@pk",id:"pk",level:3},{value:"@unique",id:"unique",level:3},{value:"@sql",id:"sql",level:3},{value:"@default",id:"default",level:3},{value:"@field_source",id:"field_source",level:3},{value:"@geometry_info",id:"geometry_info",level:3},{value:"@filter_required",id:"filter_required",level:3},{value:"@dim",id:"dim",level:3},{value:"@embeddings",id:"embeddings",level:3},{value:"@hypertable and @timescale_key",id:"hypertable-and-timescale_key",level:3},{value:"@cube and @measurement",id:"cube-and-measurement",level:3},{value:"Foreign keys @references and @field_references",id:"foreign-keys-references-and-field_references",level:3},{value:"@join",id:"join",level:3},{value:"@function_call",id:"function_call",level:3},{value:"@table_function_call_join",id:"table_function_call_join",level:3},{value:"@cache, @no_cache and @invalidate_cache",id:"cache-no_cache-and-invalidate_cache",level:3},{value:"Query time directives",id:"query-time-directives",level:2},{value:"@stats",id:"stats",level:3},{value:"@with_deleted",id:"with_deleted",level:3},{value:"@raw",id:"raw",level:3},{value:"@unnest",id:"unnest",level:3},{value:"@no_pushdown",id:"no_pushdown",level:3},{value:"System Directives",id:"system-directives",level:2},{value:"Experimental GIS Directives",id:"experimental-gis-directives",level:2}];function c(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hugr"})," uses custom GraphQL directives to define data source models. These directives allow you to specify additional metadata and behavior for your data sources, such as relationships between tables, subqueries, function calls, and more."]}),"\n",(0,r.jsx)(n.h2,{id:"list-of-directives",children:"List of Directives"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Directive"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@table"})}),(0,r.jsx)(n.td,{children:"Defines a table in the data source."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@view"})}),(0,r.jsx)(n.td,{children:"Defines a view in the data source."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@function"})}),(0,r.jsx)(n.td,{children:"Maps a field to a function call or a database function."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@module"})}),(0,r.jsx)(n.td,{children:"Organizes queries and mutations into modules."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@args"})}),(0,r.jsx)(n.td,{children:"Defines arguments for parameterized views."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@named"})}),(0,r.jsx)(n.td,{children:"Marks an input field as a named argument for parameterized views."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@pk"})}),(0,r.jsx)(n.td,{children:"Marks a field as a primary key."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@unique"})}),(0,r.jsx)(n.td,{children:"Adds a unique constraint to fields."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@sql"})}),(0,r.jsx)(n.td,{children:"Defines a SQL expression for a field."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@default"})}),(0,r.jsx)(n.td,{children:"Sets a default value or sequence for a field."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@field_source"})}),(0,r.jsx)(n.td,{children:"Maps a field to a database column."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@geometry_info"})}),(0,r.jsx)(n.td,{children:"Adds geometry type and SRID information to a field."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@filter_required"})}),(0,r.jsx)(n.td,{children:"Requires a field in query filters."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@dim"})}),(0,r.jsx)(n.td,{children:"Set the dimension of the vector field."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@hypertable"})}),(0,r.jsx)(n.td,{children:"Marks an object as a TimescaleDB hypertable."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@timescale_key"})}),(0,r.jsx)(n.td,{children:"Marks a field as a TimescaleDB time key."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@cube"})}),(0,r.jsx)(n.td,{children:"Marks an object as a cube for pre-aggregation."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@measurement"})}),(0,r.jsx)(n.td,{children:"Marks a field as a measurement in a cube."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@references"})}),(0,r.jsx)(n.td,{children:"Defines a foreign key at the object level."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@field_references"})}),(0,r.jsx)(n.td,{children:"Defines a foreign key at the field level."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@join"})}),(0,r.jsx)(n.td,{children:"Defines a join with another data object."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@function_call"})}),(0,r.jsx)(n.td,{children:"Calls a function with arguments."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@table_function_call_join"})}),(0,r.jsx)(n.td,{children:"Calls a table function with a join."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@cache"})}),(0,r.jsx)(n.td,{children:"Enables caching for a field or object."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@no_cache"})}),(0,r.jsx)(n.td,{children:"Disables caching for a field or query."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@invalidate_cache"})}),(0,r.jsx)(n.td,{children:"Invalidates the cache for a field or query."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@stats"})}),(0,r.jsx)(n.td,{children:"Returns execution statistics for a query."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@with_deleted"})}),(0,r.jsx)(n.td,{children:"Includes soft-deleted records in results."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@raw"})}),(0,r.jsx)(n.td,{children:"Returns data in raw format (e.g., WKB for geometry)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@unnest"})}),(0,r.jsx)(n.td,{children:"Flattens subquery results (like a SQL JOIN)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@no_pushdown"})}),(0,r.jsx)(n.td,{children:"Prevents pushdown of aggregation/join to the database."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@system"})}),(0,r.jsx)(n.td,{children:"Marks a field or type as a system entity."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@module_root"})}),(0,r.jsx)(n.td,{children:"Marks a type as a module root object."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@original_name"})}),(0,r.jsx)(n.td,{children:"Stores the original name of an object or field."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@filter_input"})}),(0,r.jsx)(n.td,{children:"Marks an object as a filter input."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@filter_list_input"})}),(0,r.jsx)(n.td,{children:"Marks an object as a filter list input."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@data_input"})}),(0,r.jsx)(n.td,{children:"Marks an object as a data input."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@query"})}),(0,r.jsx)(n.td,{children:"Marks an object or field as a query."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@mutation"})}),(0,r.jsx)(n.td,{children:"Marks an object or field as a mutation."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@catalog"})}),(0,r.jsx)(n.td,{children:"Marks an object or field as a catalog."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@aggregation"})}),(0,r.jsx)(n.td,{children:"Marks an object as an aggregation."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@field_aggregation"})}),(0,r.jsx)(n.td,{children:"Marks a field or object as a field aggregation."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@aggregation_query"})}),(0,r.jsx)(n.td,{children:"Marks a field as an aggregation query."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@extra_field"})}),(0,r.jsx)(n.td,{children:"Marks a field as an extra field."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@add_h3"})}),(0,r.jsx)(n.td,{children:"Defines H3 functions and parameters."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@feature"})}),(0,r.jsx)(n.td,{children:"Marks query results as GIS features."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@wfs"})}),(0,r.jsx)(n.td,{children:"Makes an object accessible via WFS."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@wfs_field"})}),(0,r.jsx)(n.td,{children:"Makes a nested object field flat in the WFS response."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@wfs_exclude"})}),(0,r.jsx)(n.td,{children:"Excludes a field from the WFS response."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"directive-reference",children:"Directive Reference"}),"\n",(0,r.jsx)(n.h3,{id:"table",children:"@table"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@table"})," directive is used to define a table in the data source. It can be applied to an object type to indicate that it corresponds to a table in the underlying database.\nIf the object is marked as a table, queries and mutations for CRUD operations will be generated automatically for that table."]}),"\n",(0,r.jsx)(n.p,{children:"This directive can be used for data tables in SQL-based data sources such as PostgreSQL, MySQL, DuckDB, and Ducklake."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# Mark object as table in the datasource\ndirective @table(\n  """\n  Name of the table in the database\n  """\n  name: String!, \n  """\n  Indicates if the table is a many-to-many relationship between two tables\n  """\n  is_m2m: Boolean = false, \n  """\n  Apply soft delete to table\n  """\n  soft_delete: Boolean = false, \n  """\n  Soft delete condition to check if record is deleted\n  """\n  soft_delete_cond: String, \n  """\n  Soft delete update condition to update record as deleted\n  """\n  soft_delete_set: String\n) on OBJECT\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# Customers table\ntype customers @table(\n  name: "customers"\n  soft_delete: true\n  soft_delete_cond: "deleted_at IS NULL"\n  soft_delete_set: "deleted_at = NOW()"\n) {\n  id: String! @pk @field_source(field: "customer_id")\n  company_name: String!\n  contact_name: String!\n  contact_title: String\n  address: String\n  city: String\n  region: String\n  postal_code: String\n  country: String\n  phone: String\n  fax: String\n  deleted_at: Timestamp\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"view",children:"@view"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@view"})," directive is used to define a view in the data source. It can be applied to an object type to indicate that it corresponds to a view in the underlying database.\nIf the object is marked as a view, queries for reading and aggregating data from that view will be generated automatically."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# Mark object as view in the datasource\ndirective @view(\n  """\n  Name of the view in the database.\n  """\n  name: String!, \n  """\n  SQL query to define the view if there is no existing view in the database\n  """\n  sql: String\n) on OBJECT\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# Shipped products view\ntype shipped_products_view \n  @view(\n    name: "shipped_products"\n    sql: """\n    SELECT \n      orders.customer_id,\n      orders.employee_id,\n      orders.order_date,\n      orders.shipped_date,\n      orders.ship_via,\n      order_details.product_id,\n      order_details.unit_price,\n      order_details.quantity,\n      order_details.discount,\n      products.supplier_id,\n      products.category_id\n    FROM orders\n        INNER JOIN order_details ON orders.order_id = order_details.order_id\n        INNER JOIN products ON order_details.product_id = products.product_id\n    WHERE orders.shipped_date IS NOT NULL\n    """\n  ) \n{\n  customer_id: String! @field_references(\n    name: "shipped_products_view_customer_id"\n    references_name: "customers"\n    field: "id"\n    query: "customer"\n    description: "Customer"\n    references_query: "shippedProducts"\n    references_description: "Shipped products for this customer"\n  )\n  employee_id: Int! @field_references(\n    name: "shipped_products_view_employee_id"\n    references_name: "employees"\n    field: "id"\n    query: "employee"\n    description: "Employee"\n    references_query: "shippedProducts"\n    references_description: "Shipped products handled by this employee"\n  )\n  order_date: Timestamp\n  shipped_date: Timestamp\n  ship_via: Int @field_references(\n    name: "shipped_products_view_ship_via"\n    references_name: "shippers"\n    field: "id"\n    query: "shipper"\n    description: "Shipper"\n    references_query: "shippedProducts"\n    references_description: "Shipped products by this shipper"\n  )\n  product_id: Int! @field_references(\n    name: "shipped_products_view_product_id"\n    references_name: "products"\n    field: "id"\n    query: "product"\n    description: "Product"\n    references_query: "shippedProducts"\n    references_description: "Shipped product details in this order"\n  )\n  unit_price: Float!\n  quantity: Int!\n  discount: Float!\n  supplier_id: Int! @field_references(\n    name: "shipped_products_view_supplier_id"\n    references_name: "suppliers"\n    field: "id"\n    query: "supplier"\n    description: "Supplier of the product in the order details view."\n  )\n  category_id: Int! @field_references(\n    name: "shipped_products_view_category_id"\n    references_name: "categories"\n    field: "id"\n    query: "category"\n    description:\n      "Category of the product in the order details view."\n  )\n  total: Float! @sql(exp: "round(([unit_price] * [quantity] * (1 - [discount]))*100)/100")\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"function",children:"@function"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@function"})," directive is used to define a custom function in the data source. It can be applied to an object type to indicate that it corresponds to a function in the underlying database, or it can be used to execute a SQL query."]}),"\n",(0,r.jsx)(n.p,{children:"This directive can be used to describe both database functions and HTTP functions (for HTTP data sources)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# define function info (apply to the extended Function or MutationFunction type)\ndirective @function(\n  """\n  Name of the database function, if there is no existing function use the abstract name.\n  """\n  name: String!,\n  """\n  SQL query to use it as a function\n  """\n  sql: String,\n  """\n  Flag that indicates whether to skip null arguments if there is only one argument.\n  """\n  skip_null_arg: Boolean,\n  """\n  Flag that indicates whether to skip null arguments.\n  """\n  is_table: Boolean,\n  """\n  Flag that indicates whether to cast the result from JSON to struct.\n  """\n  json_cast: Boolean\n) on FIELD_DEFINITION\n'})}),"\n",(0,r.jsx)(n.p,{children:"If no SQL is provided, the SQL for the function call will be generated automatically based on the function name and arguments. In this case, arguments will be passed in the same order as defined in the field."}),"\n",(0,r.jsxs)(n.p,{children:["If SQL is provided, it is expected that the correct SQL query is defined. To use arguments, you can refer to them by their name in brackets (e.g., ",(0,r.jsx)(n.code,{children:"[lat]"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["There is a special variable ",(0,r.jsx)(n.code,{children:"$catalog"})," that can be used to refer to the current catalog (data source name)."]}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"extend type Function {\n  \"Current weather from OpenWeatherMap in raw format\"\n  current_weather_raw(lat: Float!, lon: Float!): JSON\n    @function(\n      name: \"get_current_weather_raw\"\n      sql: \"http_data_source_request_scalar([$catalog], '/data/2.5/weather', 'GET', '{}'::JSON, {lat: [lat], lon: [lon], units: 'metric'}::JSON, '{}'::JSON, '')\"\n      json_cast: true\n    )\n\n  \"Current weather from OpenWeatherMap in raw format\"\n  current_weather(lat: Float!, lon: Float!): current_weather_response\n    @function(\n      name: \"get_current_weather\"\n      sql: \"http_data_source_request_scalar([$catalog], '/data/2.5/weather', 'GET', '{}'::JSON, {lat: [lat], lon: [lon], units: 'metric'}::JSON, '{}'::JSON, '')\"\n      json_cast: true\n    )\n}\n\ntype current_weather_response {\n  id: Int\n  name: String\n  base: String\n  coord: coords\n  dt: BigInt\n  main: main_weather_info\n  weather: [weather_conditions]\n  clouds: clouds_info\n  rain: perc_info\n  snow: perc_info\n  visibility: Int\n  wind: wind_info\n  common: sys_info @field_source(field: \"sys\")\n}\n\ntype coords {\n  lat: Float\n  lon: Float\n}\n\ntype clouds_info {\n  all: Float\n}\n\ntype perc_info {\n  current: Float @field_source(field: \"1h\")\n}\n\ntype wind_info {\n  speed: Float\n  deg: Float\n  gust: Float\n}\n\ntype main_weather_info {\n  feels_like: Float\n  grnd_level: Float\n  humidity: Float\n  pressure: Float\n  sea_level: Float\n  temp: Float\n  temp_max: Float\n  temp_min: Float\n}\n\ntype weather_conditions {\n  id: Int\n  name: String @field_source(field: \"main\")\n  icon: String\n  description: String\n}\n\ntype sys_info {\n  sunrise: BigInt\n  sunset: BigInt\n  country: String\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"module",children:"@module"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@module"})," directive is used to define a module in the schema. A module is a way to group queries and mutations together. This can be useful for organizing your schema and making it easier to manage."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# Define module for data objects and functions\ndirective @module(name: String!) on OBJECT | FIELD_DEFINITION\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Modules can have a hierarchy, allowing for nested modules. To define a nested module, simply use a dot (",(0,r.jsx)(n.code,{children:"."}),") as a separator in the name, e.g., ",(0,r.jsx)(n.code,{children:"module.nested.subnested"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type customers @table(name: "customers") \n@module(name: "crm.dictionary") {\n  id: BigInt!\n  name: String!\n  email: String!\n  age: Int!\n}\n\nextend type Function {\n  "Get customer balance by ID"\n  customer_balance(id: ID!): customers\n    @function(\n      name: "get_customer_balance"\n      sql: "SELECT balances FROM customers WHERE id = [id]"\n    )\n    @module(name: "crm.dictionary")\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"args",children:"@args"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@args"})," directive is used to define parameterized views in the schema. This allows you to create views that can accept arguments and return data based on those arguments."]}),"\n",(0,r.jsxs)(n.p,{children:["This directive can only be applied to types that are marked with ",(0,r.jsx)(n.code,{children:"@view"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# The arguments for the view directive defines input name to request data\ndirective @args(name: String!, required: Boolean = false) on OBJECT\n"})}),"\n",(0,r.jsx)(n.p,{children:"It accepts the name of the defined input and a flag indicating whether it is required."}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type weather_on_date @view(\n    name: "weather_on_date"\n    sql: """\n    SELECT * FROM iot.current_weather([$requested_time], [$requested_location])\n    """\n) @args(name: "input_weather_on_date", required: true) {\n  device_id: BigInt @pk\n  last_seen: Timestamp\n  location: String\n  weather: weather_conditions\n}\n\ninput input_weather_on_date {\n  requested_time: Timestamp!\n  requested_location: String = "any"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"named",children:"@named"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@named"})," directive is applied to input fields that are used as arguments in parameterized views (see ",(0,r.jsx)(n.code,{children:"@args"}),").\nIf the SQL for the view is not present, it is assumed that the parameterized view is a SQL function that returns a record set. In this case, arguments are passed as positional and named arguments, and the SQL is constructed at query time, applying positional arguments first, then named arguments."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# The argument is named\ndirective @named(name: String) on INPUT_FIELD_DEFINITION \n"})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type current_weather @view(name: " iot.current_weather") \n@args(name: "input_current_weather", required: true) {\n  device_id: BigInt @pk\n  last_seen: Timestamp\n  location: String\n  weather: weather_conditions\n}\n\ninput input_current_weather {\n  requested_time: Timestamp!\n  requested_location: String = "any" @named(name: "location")\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pk",children:"@pk"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@pk"})," directive is used to define a primary key for a type. A primary key is a unique identifier for a record in a database table. This is important for ensuring data integrity and for efficiently querying and updating records. The ",(0,r.jsx)(n.code,{children:"@pk"})," directive can be applied to multiple fields within a type."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@pk"})," directive should only be used with data objects (tables or views)."]}),"\n",(0,r.jsxs)(n.p,{children:["If the ",(0,r.jsx)(n.code,{children:"@pk"})," directive is applied to data object fields, a query will be generated to retrieve a single record from the table or view using the primary key fields as arguments. This query will be named ",(0,r.jsx)(n.code,{children:"<table>_<view>_by_pk"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# Define primary key for a table\ndirective @pk on FIELD_DEFINITION\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type customers @table(name: "customers") {\n  id: BigInt! @pk\n  name: String!\n  email: String!\n  age: Int!\n}\n\ntype orders @table(name: "orders") {\n  id: BigInt! @pk\n  company_id: BigInt! @pk\n  customer_id: BigInt!\n  product_id: BigInt!\n  quantity: Int!\n  status: String!\n}\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"unique",children:"@unique"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@unique"})," directive is used to define a unique constraint on data objects. This ensures that the values in the specified fields are unique across all records in the database table. The ",(0,r.jsx)(n.code,{children:"@unique"})," directive can be applied multiple times within a type."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# Add unique constraint to the object\ndirective @unique(fields: [String]!, query_suffix: String, skip_query: Boolean) repeatable on OBJECT\n"})}),"\n",(0,r.jsx)(n.p,{children:"It accepts a list of field names to apply the unique constraint to, an optional query suffix to use in generated queries, and a flag to skip query generation for this constraint."}),"\n",(0,r.jsxs)(n.p,{children:["If a query suffix is not provided, it will be generated as ",(0,r.jsx)(n.code,{children:"<field>_by_<field1>_<field2>"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type customers @table(name: "customers") @unique(fields: ["email"]) {\n  id: BigInt! @pk\n  name: String!\n  email: String!\n  age: Int!\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"sql",children:"@sql"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@sql"})," directive is used to define a SQL expression for calculating the value of a field. This allows you to create calculated fields whose values are derived from SQL queries."]}),"\n",(0,r.jsxs)(n.p,{children:["Other field values from the table can be used in the SQL expression, but to avoid name collisions use ",(0,r.jsx)(n.code,{children:"objects"})," alias - ",(0,r.jsx)(n.code,{children:"objects.<field_name>"}),". If you need access to the data object fields (with ",(0,r.jsx)(n.code,{children:"@field_source"})," and ",(0,r.jsx)(n.code,{children:"@sql"})," directives), wrap them in square brackets ",(0,r.jsx)(n.code,{children:"[]"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# sql for calculate field value, expression should be in sql format, all fields should placed in the []\ndirective @sql(exp: String!) on FIELD_DEFINITION | INPUT_FIELD_DEFINITION\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'extend type providers {\n  total_payments_amount: Float @sql(exp: "COALESCE([total_general_amount],0) + COALESCE([total_research_amount], 0)")\n  last_payment_date: Timestamp @sql(exp: "to_timestamp([last_payment_date])")\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"This example assumes that the provider table was defined somewhere in the GraphQL schema definition files."}),"\n",(0,r.jsx)(n.h3,{id:"default",children:"@default"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@default"})," directive allows you to define default values for fields in your GraphQL schema. For PostgreSQL and DuckDB tables, you can define a sequence name to auto-generate ID values. This will be used in the insert mutation."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# default value for field, if field is not nullable, define sequences for the field\ndirective @default(\n\t"""\n\tDefault value for the field\n\t"""\n\tvalue: any\n\t"""\n\tSequence for the autogenerated identifier\n\t"""\n\tsequence: String\n\t"""\n\tInsert sql expressions for the field that returns inserted value. Can use values from input argument - [$<input field name>].\n\t"""\n\tinsert_exp: String\n\t"""\n\tUpdate sql expressions for the field that returns updated value. Can use values from input argument - [$<input field name>] and current row values with prefix objects.<field_name>.\n\t"""\n\tupdate_exp: String\n) on FIELD_DEFINITION\n'})}),"\n",(0,r.jsxs)(n.p,{children:["You can set the ",(0,r.jsx)(n.code,{children:"insert_exp"})," and ",(0,r.jsx)(n.code,{children:"update_exp"})," fields to define custom SQL expressions for inserting and updating the field values. In expressions you can use values from the input arguments and current row values.\nTo reference the current row values, use the ",(0,r.jsx)(n.code,{children:"objects"})," table alias.\nTo reference the input arguments, use the ",(0,r.jsx)(n.code,{children:"[$<input field name>]"}),".\nYou can also reference to the authentication variables:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"[$auth.user_id] - the ID of the authenticated user, string."}),"\n",(0,r.jsx)(n.li,{children:"[$auth.user_id_int] - the ID of the authenticated user casted to the integer, if it can be casted than 0."}),"\n",(0,r.jsx)(n.li,{children:"[$auth.user_name] - the username of the authenticated user, string."}),"\n",(0,r.jsx)(n.li,{children:"[$auth.role] - the role of the authenticated user, string."}),"\n",(0,r.jsx)(n.li,{children:"[$auth.auth_type] - the authentication type of the authenticated user, string."}),"\n",(0,r.jsx)(n.li,{children:"[$auth.provider] - the authentication provider of the authenticated user, string."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can use these expression to pre-process input values before they will pass to the data source."}),"\n",(0,r.jsx)(n.h3,{id:"field_source",children:"@field_source"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@field_source"})," directive is used to specify the name of the field in the database that corresponds to a field in your GraphQL schema. This is useful for mapping GraphQL fields to their underlying database columns, especially when the names differ."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# field name in the database\ndirective @field_source(field: String!) on FIELD_DEFINITION | INPUT_FIELD_DEFINITION\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type customers {\n  id: BigInt! @pk\n  name: String! @field_source(field: "customer_name")\n  email: String! @field_source(field: "customer_email")\n  age: Int! @field_source(field: "customer_age")\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"geometry_info",children:"@geometry_info"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@geometry_info"})," directive is used to specify geometric information for a field in your GraphQL schema. This is useful for mapping GraphQL fields to their underlying geometric data types in the database."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# define additional info for the geometry field\ndirective @geometry_info(type: GeometryType, srid: Int) on FIELD_DEFINITION\n\nenum GeometryType @system {\n  POINT\n  LINESTRING\n  POLYGON\n  MULTIPOINT\n  MULTILINESTRING\n  MULTIPOLYGON\n  GEOMETRYCOLLECTION\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"type locations {\n  id: BigInt! @pk\n  name: String!\n  coordinates: Geometry @geometry_info(type: POINT, srid: 4326)\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@geometry_info"})," directive is used to specify geometric information for a field in your GraphQL schema. This is useful for mapping GraphQL fields to their underlying geometric data types in the database."]}),"\n",(0,r.jsx)(n.h3,{id:"filter_required",children:"@filter_required"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@filter_required"})," directive is used to specify that a field is required when filtering data in queries. This means that the field must be included in the filter arguments for the query to be valid."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"directive @filter_required on FIELD_DEFINITION \n"})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"type orders {\n  id: BigInt! @pk\n  order_date: Timestamp! @filter_required\n  name: String!\n  price: Float!\n  category: String!\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dim",children:"@dim"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@dim"})," directive is used to specify the dimension of a vector field in your GraphQL schema. This is particularly useful when working with vector data types, such as those used for embeddings and similarity search."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"directive @dim(len: Int!) on INPUT_FIELD_DEFINITION | FIELD_DEFINITION | ARGUMENT_DEFINITION\n"})}),"\n",(0,r.jsx)(n.h3,{id:"embeddings",children:"@embeddings"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@embeddings"})," directive is used to specify embedding generation parameters for a vector field in your GraphQL schema."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'directive @embeddings(\n\t"The name of the data source type `embedding`"\n\tmodel: String!\n\t"The name of the field that contains embeddings vector"\n\tvector: String!\n\t"The distance metric to use for the vector search"\n\tdistance: VectorDistanceType!\n) on OBJECT\n\nenum VectorDistanceType @system {\n  "L2 distance"\n  L2\n  "Cosine similarity"\n  Cosine\n  "Inner product"\n  Inner\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"model"})," argument specifies the name of the embedding data source that should be attached to the hugr engine configuration. The ",(0,r.jsx)(n.code,{children:"vector"})," argument specifies the name of the field that contains the embeddings vector. The ",(0,r.jsx)(n.code,{children:"distance"})," argument specifies the distance metric to use for the vector search."]}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type documents @table(name: "documents") @embeddings(\n  model: "text-embedding-3-small",\n  vector: "embedding",\n  distance: Cosine\n) {\n  id: BigInt! @pk\n  category: String!\n  content: String!\n  embedding: Vector! @dim(len: 1536)\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["It allows you to perform semantic search queries on the ",(0,r.jsx)(n.code,{children:"documents"})," table using the specified embedding model and distance metric."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'query {\n  documents(\n    filter: {category: {eq: "general"}}\n    semantic: {\n      query: "What is GraphQL?"\n      limit: 5\n    }\n  ) {\n    id\n    content\n    embedding\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"hypertable-and-timescale_key",children:"@hypertable and @timescale_key"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@hypertable"})," directive is used to mark a data object (table or view) as a PostgreSQL TimescaleDB Hypertable or continuous aggregate view. This allows TimescaleDB to automatically partition the data by time, improving query performance for time-series data.\nIf the data object is marked as a hypertable, it is recommended to also mark the timestamp field with the ",(0,r.jsx)(n.code,{children:"@timescale_key"})," directive to use TimescaleDB features effectively."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nMark data object (table, view, cube) as PostgreSQL TimescaleDB Hypertable\n"""\ndirective @hypertable on OBJECT\n"""\nMark timestamp field as a postgres timescale key in hypertable or continues aggregation view\n"""\ndirective @timescale_key on FIELD_DEFINITION\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"type sensor_data {\n  sensor_id: BigInt! @pk\n  temperature: Float! @pk @timescale_key\n  humidity: Float!\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cube-and-measurement",children:"@cube and @measurement"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@cube"})," directive is used to mark a data object (table or view) as a cube, which allows for pre-aggregation of data before it is selected based on the selection set.\nIf the data object is marked as a cube, it is recommended to also mark the fields that should be aggregated with the ",(0,r.jsx)(n.code,{children:"@measurement"})," directive."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@measurement"})," directive is used to mark a field as a measurement in a cube. It adds an aggregation function argument to the field, allowing you to select the aggregation function that will be applied to the field during pre-aggregation. The available aggregation functions are defined in the corresponding measurement aggregation enums for the field's type."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nMark data object as cube, data will be pre aggregated before selected base on selection set\n"""\ndirective @cube on OBJECT\n\n"""\nMark field as measurement in cube.\nIf a field is marked as a measurement and the object is marked as a cube, an aggregation function parameter will be added to the field.\nThe aggregation function should return the same type as the field type.\n"""\ndirective @measurement on FIELD_DEFINITION\n\nenum IntMeasurementAggregation @system {\n  SUM\n  AVG\n  MIN\n  MAX\n  ANY\n}\n\nenum BigIntMeasurementAggregation @system {\n  SUM\n  AVG\n  MIN\n  MAX\n  ANY\n}\n\nenum FloatMeasurementAggregation @system {\n  SUM\n  AVG\n  MIN\n  MAX\n  ANY\n}\n\nenum StringMeasurementAggregation @system {\n  ANY\n}\n\nenum BooleanMeasurementAggregation @system {\n  ANY\n  OR\n  AND\n}\n\nenum DateMeasurementAggregation @system {\n  MIN\n  MAX\n  ANY\n}\n\nenum TimestampMeasurementAggregation @system {\n  MIN\n  MAX\n  ANY\n}\n\nenum TimeMeasurementAggregation @system {\n  MIN\n  MAX\n  ANY\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# cube definition\ntype sales @table(name: "sales") @cube {\n  id: BigInt! @pk\n  customer_id: BigInt @field_references(name: "customers", field: "id", query: "customer", references_query: "sales")\n  product_id: BigInt @field_references(name: "products", field: "id", query: "product", references_query: "sales")\n  order_date: Date\n  quantity: Int! @measurement\n  price: Float! @measurement\n  amount: Float! @measurement\n  created_at: Timestamp! @measurement\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"# Querying the sales cube\nquery {\n  sales {\n    order_date(bucket: quarter)\n    quantity(measurement_func: SUM)\n    price(measurement_func: AVG)\n    amount(measurement_func: SUM)\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This query will return the sales data aggregated by quarter for the ",(0,r.jsx)(n.code,{children:"order_date"}),", and the total quantity, average price, and total amount for each quarter. If a field the measurement function is not specified the field will add to the grouping."]}),"\n",(0,r.jsx)(n.p,{children:"The cube data object is pre-aggregated before joining with other data objects, this means if you add to selection set fields from subquery, the references fields will be automatically included in the grouping and result set will be not aggregated by the subquery fields. You can think of it as a way to optimize query performance by reducing the amount of data that needs to be processed at query time or use it as classical OLAP cube."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"query {\n  sales {\n    customer {\n      category_id\n    }\n    order_date(bucket: quarter)\n    quantity(measurement_func: SUM)\n    price(measurement_func: AVG)\n    amount(measurement_func: SUM)\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This query will return the sales data aggregated by customer_id, quarter for the ",(0,r.jsx)(n.code,{children:"order_date"}),", and the total quantity, average price, and total amount for each quarter."]}),"\n",(0,r.jsx)(n.h3,{id:"foreign-keys-references-and-field_references",children:"Foreign keys @references and @field_references"}),"\n",(0,r.jsxs)(n.p,{children:["There are two directives for defining foreign keys in the schema: ",(0,r.jsx)(n.code,{children:"@references"}),", which applies at the data object level, and ",(0,r.jsx)(n.code,{children:"@field_references"}),", which applies at the field level if the reference is to a single field."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hugr"})," foreign keys do not require existing constraints in the database and can be used to define relationships between data objects without modifying the underlying database schema."]}),"\n",(0,r.jsx)(n.p,{children:"Foreign keys allow you to extend generated queries with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Filtering by related object fields"}),"\n",(0,r.jsx)(n.li,{children:"Subquery fields to select related data in a single query"}),"\n",(0,r.jsx)(n.li,{children:"Aggregation and grouping by related object fields"}),"\n",(0,r.jsx)(n.li,{children:"Subquery fields to select aggregated related data"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# define FK on the data object (view or table)\ndirective @references(\n  """\n  The name of foreign key relationship between data objects.\n  """\n  name: String\n  """\n  The name of related data object.\n  """\n  references_name: String!\n  """\n  The name of the fields in the data object to reference.\n  """\n  source_fields: [String!]!\n  """\n  The name of the fields in the related data object.\n  """\n  references_fields: [String!]!\n  """\n  The description of the subquery field, that will be added to the data object to be able to query related data.\n  """\n  description: String\n  """\n  The name of the subquery field, that will be added to the data object to be able to query related data.\n  """\n  query: String\n  """\n  The name of the query field, that will be added to the related data object to be able to query related data.\n  """\n  references_query: String\n  """\n  The description of the query field, that will be added to the related data object to be able to query related data.\n  """\n  references_description: String\n  """\n  Flag that indicates if the relationship is many-to-many.\n  """\n  is_m2m: Boolean\n  """\n  The name of the many-to-many relationship table.\n  """\n  m2m_name: String\n) repeatable on OBJECT\n\n# define FK on the data object field (view or table)\ndirective @field_references(\n  """\n  The name of the foreign key relationship between data objects.\n  """\n  name: String\n  """\n  The name of the related data object.\n  """\n  references_name: String!\n  """\n  The name of the field in the related data object.\n  """\n  field: String\n  """\n  The name of the query field, that will be added to the data object to be able to query related data.\n  """\n  query: String\n  """\n  The description of the query field, that will be added to the data object to be able to query related data.\n  """\n  description: String\n  """\n  The name of the query field, that will be added to the related data object to be able to query related data.\n  """\n  references_query: String\n  """\n  The description of the query field, that will be added to the related data object to be able to query related data.\n  """\n  references_description: String\n) repeatable on FIELD_DEFINITION\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsxs)(n.p,{children:["The simplest way to define a foreign key relationship is by using the ",(0,r.jsx)(n.code,{children:"@field_references"})," directive on the field that represents the foreign key."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type customers @table(name: "customers") {\n  id: BigInt! @pk\n  name: String!\n  email: String!\n  phone: String\n  address: String\n  city: String\n  state: String\n  postal_code: String\n  country: String\n}\n\ntype employees @table(name: "employees") {\n  id: BigInt! @pk\n  first_name: String!\n  last_name: String!\n  email: String!\n  phone: String\n  hire_date: Timestamp\n  job_title: String\n  salary: Float\n}\n\ntype shippers @table(name: "shippers") {\n  id: BigInt! @pk\n  name: String!\n  phone: String\n}\n\ntype orders @table(name: "orders") {\n  id: BigInt! @pk\n  customer_id: BigInt! @field_references(\n    name: "orders_customer_id_fkey"\n    references_name: "customers"\n    field: "id"\n    query: "customer"\n    description: "Customer who placed the order"\n    references_query: "orders"\n    references_description: "Orders placed by this customer"\n  )\n  employee_id: BigInt @field_references(\n    name: "orders_employee_id_fkey"\n    references_name: "employees"\n    field: "id"\n    query: "employee"\n    description: "Employee who handled the order"\n    references_query: "orders"\n    references_description: "Orders handled by this employee"\n  )\n  order_date: Timestamp\n  required_date: Timestamp\n  shipped_date: Timestamp\n  ship_via: BigInt @field_references(\n    name: "orders_ship_via_fkey"\n    references_name: "shippers"\n    field: "id"\n    query: "shipper"\n    description: "Shipper for the order"\n    references_query: "orders"\n    references_description: "Orders shipped by this shipper"\n  )\n  freight: Float\n  ship_name: String\n  ship_address: String\n  ship_city: String\n  ship_region: String\n  ship_postal_code: String\n  ship_country: String\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"This allows you to query and filter by related data in a single query."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"query {\n  # Filter orders for employees with salary greater than or equal to 1000\n  orders (filter: { employee: { salary: { gte: 1000 } } }) {\n    id\n    customer {\n      id\n      name\n    }\n    employee {\n      id\n      first_name\n      last_name\n    }\n    shipper {\n      id\n      name\n    }\n  }\n  # Filter employees who have orders from customer with ID 1 and salary greater than or equal to 1000\n  # and return order information\n  employees (\n    filter: {\n      salary: { gte: 1000 }\n      orders: { any_of: { customer: { id: { eq: 1 } } } }\n    }\n  ) {\n    id\n    first_name\n    last_name\n    orders {\n      id\n      order_date\n      customer {\n        id\n        name\n      }\n      shipper {\n        id\n        name\n      }\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"To set up a many-to-many relationship between products and categories, you need to define a join table that references both the products and categories tables."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type categories @table(name: "categories") {\n  id: BigInt! @pk\n  name: String!\n  description: String\n}\n\ntype products @table(name: "products") {\n  id: BigInt! @pk\n  name: String!\n  description: String\n  price: Float!\n}\n\n# Many-to-Many relationship between products and categories\ntype product_categories @table(name: "product_categories", is_m2m: true) {\n  category_id: BigInt! @field_references(\n    name: "product_categories_category_id_fkey"\n    references_name: "categories"\n    field: "id"\n    query: "category"\n    description: "Category of the product"\n    references_query: "product_categories"\n    references_description: "Products in this category"\n  )\n  product_id: BigInt! @field_references(\n    name: "product_categories_product_id_fkey"\n    references_name: "products"\n    field: "id"\n    query: "product"\n    description: "Product in this category"\n    references_query: "product_categories"\n    references_description: "Categories for this product"\n  )\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"This allows you to query and filter by many-to-many relationships."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"query {\n  products (filter: { categories: { any_of: { id: { eq: 1 } } } }) {\n    id\n    name\n    categories {\n      id\n      name\n    }\n  }\n  categories (filter: { products: { any_of: { id: { eq: 1 } } } }) {\n    id\n    name\n    products {\n      id\n      name\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Another way to define a foreign key relationship is by using the ",(0,r.jsx)(n.code,{children:"@references"})," directive at the data object level. This can be used to specify the relationship between two data objects linked by multiple fields."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type supplier_products @table(name: "supplier_products") {\n  supplier_id: BigInt! @pk @field_references(\n    name: "supplier_products_supplier_id_fkey"\n    references_name: "suppliers"\n    field: "id"\n    query: "supplier"\n    description: "Supplier of the product"\n    references_query: "products"\n    references_description: "Products supplied by this supplier"\n  )\n  product_id: BigInt! @pk @field_references(\n    name: "supplier_products_product_id_fkey"\n    references_name: "products"\n    field: "id"\n    query: "product"\n    description: "Product supplied by the supplier"\n    references_query: "suppliers"\n    references_description: "Suppliers for this product"\n  )\n  price: Float!\n}\n\ntype order_details @table(name: "order_details") \n@references(\n  name: "order_details_supplier_products_fkey"\n  references_name: "supplier_products"\n  source_fields: [ "product_id", "supplier_id" ]\n  references_fields: [ "product_id", "supplier_id" ]\n  query: "supplier_product_info"\n  description: "Supplier product associated with the order detail"\n  references_query: "orders"\n  references_description: "Order details for this supplier product"\n) {\n  id: BigInt! @pk @default(sequence: "order_details_id_seq")\n  order_id: BigInt! @field_references(\n    name: "order_details_order_id_fkey"\n    references_name: "orders"\n    field: "id"\n    query: "order"\n    description: "Order associated with the detail"\n    references_query: "order_details"\n    references_description: "Order details for this order"\n  )\n  product_id: BigInt! @field_references(\n    name: "order_details_product_id_fkey"\n    references_name: "products"\n    field: "id"\n    query: "product"\n    description: "Product in the order"\n    references_query: "order_details"\n    references_description: "Orders containing this product"\n  )\n  supplier_id: BigInt! @field_references(\n    name: "order_details_supplier_id_fkey"\n    references_name: "suppliers"\n    field: "id"\n    query: "supplier"\n    description: "Supplier of the product"\n    references_query: "orders"\n    references_description: "Order details for this supplier"\n  )\n  quantity: Int!\n  price: Float!\n  amount: Float!\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Foreign key relationships can be used in insert mutations to automatically populate related fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'mutation {\n  insert_orders(data: [\n    {\n      customer_id: 1\n      employee_id: 2\n      order_date: "2023-01-01"\n      order_details: {\n        data: [\n          {\n            product_id: 1\n            supplier_id: 3\n            quantity: 2\n            price: 100\n            amount: 200\n          }\n        ]\n      }\n    }\n  ]) {\n    returning {\n      id\n      customer_id\n      order_date\n      order_details {\n        id\n        product_id\n        quantity\n        price\n        amount\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Foreign key relationships can also be defined for views, including parameterized views. This allows you to create more complex queries that involve multiple data objects and their relationships."}),"\n",(0,r.jsx)(n.h3,{id:"join",children:"@join"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@join"})," directive allows you to define a field as the result of a join with another data object.\nIt can be used to create more complex queries that involve multiple data objects and their relationships."]}),"\n",(0,r.jsxs)(n.p,{children:["You can extend existing data objects with new fields to join data objects from different data sources in the ",(0,r.jsx)(n.code,{children:"extension"})," data source definition."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# define field as join result from the other data object\ndirective @join(\n  """\n  The name of the joined data object in the schema\n  """\n  references_name: String\n  """\n  The field names in the source data object that is used to join by equals conditions\n  """\n  source_fields: [String!]\n  """\n  The field names in the joined data object that is used to join by equals conditions\n  """\n  references_fields: [String!]\n  """\n  The SQL for the join to indicate tables use source and dest names in field path, all fields path should in [source.field] or [dest.field] format\n  This applies through AND with source and references fields\n  """\n  sql: String\n) on FIELD_DEFINITION\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type areas @view(name: "locations") {\n  name: String!\n  category: String\n  population: Int\n  polygon: Geometry @geometry_info(type: MULTIPOLYGON srid: 4326)\n}\n\nextend type customers {\n  primary_area_category: String\n  working_area: Geometry @geometry_info(type: POLYGON srid: 4326)\n  areas: [areas] @join(\n    references_name: "areas",\n    sql: "ST_Intersects([source.working_area], [dest.polygon])"\n  )\n  primary_areas: [areas] @join(\n    references_name: "areas",\n    source_fields: ["primary_area_category"],\n    references_fields: ["category"],\n    sql: "ST_Intersects([source.working_area], [dest.polygon])"\n  )\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"This allows you to create more complex queries that involve multiple data objects and their relationships."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers {\n    id\n    name\n    primary_area_category\n    working_area\n    areas (filter: { category: { in: ["Cities", "Towns"] } }) {\n      id\n      name\n      category\n    }\n    areas_aggregation {\n      _rows_count\n      population {\n        sum\n      }\n    }\n    primary_areas {\n      id\n      name\n      category\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"function_call",children:"@function_call"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@function_call"})," directive allows you to define a field as the result of a function call."]}),"\n",(0,r.jsxs)(n.p,{children:["You can extend existing data objects with new fields that represent function call results from different data sources in the ",(0,r.jsx)(n.code,{children:"extension"})," data source definition."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# function call\ndirective @function_call(\n  """\n  The name of the defined function\n  """\n\treferences_name: String!\n  """\n  The arguments map for the function: { <function_argument>: "<field_name>" }\n  """\n\targs: JSON # argument map from field to function argument\n  """\n  The name of the module, you can skip it if function call is defined in not extension data source\n  """\n\tmodule: String # module name for the function\n) on FIELD_DEFINITION\n'})}),"\n",(0,r.jsx)(n.p,{children:"The argument map can contain a subset of function arguments; any missing arguments will be added to the function call fields automatically."}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type sensor_state {\n  code: Int\n  status: String\n}\n\nextend type Functions {\n  current_sensor_state(sensor_id: ID!, request_time: Timestamp!): sensor_state @function(\n    name "get_current_sensor_state"\n  )\n}\n\ntype sensors @table(name: "sensors") {\n  id: ID!\n  name: String!\n  location: Geometry\n  state: sensor_state @function_call(\n    references_name: "get_sensor_state",\n    args: {\n      sensor_id: "id"\n    }\n  )\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"You can then get the current sensor state by calling the function with the appropriate arguments."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'query {\n  sensors {\n    id\n    name\n    location\n    state (request_time: "2025-08-25T12:00:00Z") {\n      code\n      status\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"table_function_call_join",children:"@table_function_call_join"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@table_function_call_join"})," directive allows you to define a field as the result of a table function call and join it.\nThis combines the functionality of ",(0,r.jsx)(n.code,{children:"@join"})," and ",(0,r.jsx)(n.code,{children:"@function_call"}),", but with some limitations\u2014you can aggregate a subquery or apply an additional filter.\nIf you need a more flexible approach, you can define a parameterized query instead."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'# table function call with join\ndirective @table_function_call_join(\n  """\n  The name of the defined function\n  """\n\treferences_name: String!\n  """\n  The arguments map for the function: { <function_argument>: "<field_name>" }\n  """\n\targs: JSON # argument map from field to function argument\n  """\n  The source fields for the join\n  """\n\tsource_fields: [String!]\n  """\n  The references fields for the join\n  """\n\treferences_fields: [String!]\n  """\n  The SQL for the join to indicate tables use source and dest names in field path, all fields path should in [source.field] or [dest.field] format\n  """\n\tsql: String\n  """\n  The name of the module, you can skip it, it will fill up automatically\n  """\n\tmodule: String\n) on FIELD_DEFINITION\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type sensor_value {\n  sensor_id: ID\n  event_time: Timestamp\n  value: Float\n  unit: String\n}\n\nextend type Functions {\n  sensors_current_values(request_time: Timestamp!): [sensor_value]\n    @function(\n      name: "get_sensors_current_values"\n    )\n}\n\nextend type sensors {\n  current_values(request_time: Timestamp!): [sensor_value]\n    @table_function_call_join(\n      references_name: "sensors_current_values"\n      source_fields: ["id"]\n      references_fields: ["sensor_id"]\n    )\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"This allows you to get the current values of all sensors at a specific point in time."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'query {\n  sensors {\n    id\n    name\n    location\n    current_values(request_time: "2025-08-25T12:00:00Z") {\n      sensor_id\n      event_time\n      value\n      unit\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"cache-no_cache-and-invalidate_cache",children:"@cache, @no_cache and @invalidate_cache"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@cache"})," directive allows you to cache the results of a query for a specified amount of time."]}),"\n",(0,r.jsxs)(n.p,{children:["This directive can be applied to a data object in the schema definition files, allowing you to automatically cache query results for that data object. In this case, you should define ",(0,r.jsx)(n.code,{children:"ttl"})," and ",(0,r.jsx)(n.code,{children:"tags"})," to automatically invalidate the cache if the data object is mutated."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@cache"})," directive can also be used in queries to cache the results. If a key is not provided, it will be generated automatically as a hash of the query text, variables, and role name."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@no_cache"})," directive can be used to disable caching for a specific query."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@invalidate_cache"})," directive can be used to invalidate the cache for a specific query."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'directive @cache(\n  """\n  Time to live for the cache in seconds\n  """\n  ttl: Int\n  """\n  Cache key for the query\n  """\n  key: String\n  """\n  Cache key for the query\n  """\n  tags: [String!]\n) on FIELD | OBJECT | FIELD_DEFINITION\n\ndirective @no_cache on FIELD\ndirective @invalidate_cache on FIELD\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.p,{children:"In the definition."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'type users @table(name: "users") @cache(ttl: 300, tags: ["users"]) {\n  id: ID!\n  name: String!\n  email: String!\n  age: Int!\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"At query time."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'query {\n  users {\n    id\n    name\n    email\n    age\n  }\n  without_cache: users @no_cache {\n    id\n    name\n    email\n    age\n  }\n  # request data and invalidate cache\n  inv: users @invalidate_cache {\n    id\n    name\n    email\n    age\n  }\n\n  customers(filter: {category: "electronics"}) @cache(ttl: 300, key: "customers_electronics", tags: ["customers"]) {\n    id\n    name\n    email\n    age\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"query-time-directives",children:"Query time directives"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hugr"})," provides several directives that can be used at query time to modify the behavior of a query."]}),"\n",(0,r.jsx)(n.h3,{id:"stats",children:"@stats"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@stats"})," directive can be used to calculate execution statistics for a query. The statistics will be returned in the ",(0,r.jsx)(n.code,{children:"extensions"})," field in the query results."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nCalculate execution statistics for the query\nExecution statistics are calculated for the query and returned in the extensions field\n"""\ndirective @stats on FIELD | QUERY\n'})}),"\n",(0,r.jsx)(n.h3,{id:"with_deleted",children:"@with_deleted"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@with_deleted"})," directive can be used to include deleted records in the query results, if the soft delete feature is enabled for the table."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nInclude deleted records in the query results\n"""\ndirective @with_deleted on FIELD\n'})}),"\n",(0,r.jsx)(n.h3,{id:"raw",children:"@raw"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@raw"})," directive is used to retrieve data tables in raw format (for example, Geometry in WKB). It is used in the ",(0,r.jsx)(n.code,{children:"hugr-ipc"})," protocol."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"directive @raw on FIELD\n"})}),"\n",(0,r.jsx)(n.h3,{id:"unnest",children:"@unnest"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@unnest"})," directive is used to make more complex queries by flattening subquery results, especially for aggregations.\nYou should be very careful when using this directive, as it works the same way as a SQL JOIN and can multiply rows in the result set."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nMark do not aggregate subquery result\n"""\ndirective @unnest on FIELD\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"query {\n  orders_bucket_aggregation{\n    key {\n      customers {\n        country\n      }\n      order_details @unnest{\n        product {\n          name\n        }\n      }\n    }\n    aggregations {\n      _rows_count\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"This query returns the total number of orders grouped by customer and product."}),"\n",(0,r.jsx)(n.h3,{id:"no_pushdown",children:"@no_pushdown"}),"\n",(0,r.jsxs)(n.p,{children:["This directive is used to instruct the planner not to push down aggregation and join operations to the source database.\nIt works only with subqueries across PostgreSQL data sources. By default, ",(0,r.jsx)(n.code,{children:"hugr"})," tries to push down as much as possible to the PostgreSQL source database to reduce the number of records received from the data source."]}),"\n",(0,r.jsxs)(n.p,{children:["In some scenarios, it may be beneficial to prevent pushdown and use the ",(0,r.jsx)(n.code,{children:"DuckDB"})," engine for aggregation and joins."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nMark the subquery to do not pushdown to the database\nIt is used to prevent the subquery from being executed in the database and instead execute it in the duckdb.\n"""\ndirective @no_pushdown on FIELD | FIELD_DEFINITION\n'})}),"\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers {\n    name\n    orders_aggregation {\n      order_details_aggregation @no_pushdown{\n        amount{\n          sum{\n            sum\n          }\n        }\n      }\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"system-directives",children:"System Directives"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hugr"})," uses the following system directives to modify the behavior of queries."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nMark the field as a system field\n"""\ndirective @system on OBJECT | INTERFACE | UNION | INPUT_OBJECT | ENUM | FIELD_DEFINITION | SCALAR\n\n # This directive marks a type as a module root object, whose fields are queries, mutations, or functions.\n # This directive is generated by the compiler as well as for module types.\ndirective @module_root(name: String!, type: ModuleObjectType!) on OBJECT\n\n # The original name of the object in the catalog, before a prefix was added.\n # This directive is generated by the compiler to keep the original name of the object.\ndirective @original_name(name: String!) on OBJECT | INTERFACE | UNION | ENUM | INPUT_OBJECT | SCALAR | FIELD_DEFINITION\n\n\n# generated directives\ndirective @filter_input(name: String!) on OBJECT | INPUT_OBJECT\ndirective @filter_list_input(name: String!) on OBJECT | INPUT_OBJECT\ndirective @data_input(name: String!) on OBJECT | INPUT_OBJECT\n\ndirective @query(name: String, type: QueryType) on OBJECT | FIELD_DEFINITION\ndirective @mutation(name: String, type: MutationType) on OBJECT | FIELD_DEFINITION\ndirective @catalog(name: String!, engine: String!) on OBJECT | FIELD_DEFINITION | INPUT_FIELD_DEFINITION\ndirective @aggregation(name: String!, is_bucket: Boolean, level: Int) on OBJECT\ndirective @field_aggregation(name: String!) on OBJECT | FIELD_DEFINITION\ndirective @aggregation_query(name: String!, is_bucket: Boolean) on FIELD_DEFINITION\n\ndirective @extra_field(name: String!, base_type: ExtraFieldBaseType!) on FIELD_DEFINITION\n\n"""\nThis directive is used to define H3 functions and their parameters.\n"""\ndirective @add_h3(\n  field: String! \n  res: Int!\n  transform_from: Int\n  buffer: Float\n  divide_values: Boolean\n  simplify: Boolean = true\n) on FIELD\n'})}),"\n",(0,r.jsx)(n.h2,{id:"experimental-gis-directives",children:"Experimental GIS Directives"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'"""\nMark query results as GIS features.\nIt is used in:\n- the geojson endpoint to return features in the GeoJSON format\n- the OpenAPI schema to define the feature type for saved collections\n- the WFS endpoint to return features in the WFS format\n"""\ndirective @feature(\n  "name of the feature type (collection name), used for feature collection"\n  name: String!\n  "description of the feature type"\n  description: String\n  "name of the geometry field, used for feature geometry"\n  geometry: String!\n  "name of the feature id field, used for feature id"\n  id: String\n  "geometry type of the feature, used for feature geometry type"\n  geometry_type: GeometryType\n  "if not set, the geometry will be treated as WGS84 (SRID)"\n  geometry_srid: Int\n  "jq transformation that returns the feature properties"\n  properties: String\n  "property feature definition in OpenAPI format"\n  definition: JSON\n  "variables definition for the feature properties in OpenAPI format"\n  variables: JSON\n  "support pagination"\n  pagination: Boolean = false\n  "if true, the bbox will be written to the feature"\n  write_bbox: Boolean = false\n  "meta query name, used for feature collection extent and count"\n  summary: String\n  "bbox data extent path, used for collection extent"\n  extent_path: String\n  "matched features count path, used for collection count"\n  count_path: String\n) on FIELD\n\n"Directive that makes the data object accessible via WFS (Web Feature Service 1.2)"\ndirective @wfs(\n  "name of the feature type (collection name), used for feature collection"\n  name: String!\n  "description of the feature type"\n  description: String\n  "name of the geometry field, used for feature geometry"\n  geometry: String\n  "read-only mode, if true, the WFS service will not allow to modify the data"\n  read_only: Boolean = false\n)  repeatable on OBJECT\n\n"Make a nested object field (type) flat in the WFS response."\ndirective @wfs_field(\n  "name of the field in the WFS response, if not set, the field name will be used"\n  name: String\n  "description of the field in the WFS response"\n  description: String\n  "if true, the nested field will be flatted in the WFS response, else it will be returned as a stringified JSON"\n  flatted: Boolean\n  "separator used to flatten the field in the WFS response"\n    flatted_sep: String\n) on FIELD_DEFINITION\n\n"Exclude field from WFS response, it will not be returned in the WFS response."\ndirective @wfs_exclude on FIELD_DEFINITION\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var i=t(6540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);