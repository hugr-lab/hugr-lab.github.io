"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2759],{2819:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"engine-configuration/schema-definition/data-objects/field-transformations","title":"Field Transformations and Additional Fields","description":"Hugr automatically adds arguments and calculated fields to certain data types, enabling powerful data transformations and calculations directly in GraphQL queries.","source":"@site/docs/4-engine-configuration/3-schema-definition/3-data-objects/11-field-transformations.md","sourceDirName":"4-engine-configuration/3-schema-definition/3-data-objects","slug":"/engine-configuration/schema-definition/data-objects/field-transformations","permalink":"/docs/engine-configuration/schema-definition/data-objects/field-transformations","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/4-engine-configuration/3-schema-definition/3-data-objects/11-field-transformations.md","tags":[],"version":"current","lastUpdatedBy":"vgsml","lastUpdatedAt":1756711778000,"sidebarPosition":11,"frontMatter":{"title":"Field Transformations and Additional Fields","sidebar_position":11},"sidebar":"docsSidebar","previous":{"title":"Special Table Types","permalink":"/docs/engine-configuration/schema-definition/data-objects/special-types"},"next":{"title":"Module Organization","permalink":"/docs/engine-configuration/schema-definition/modules"}}');var a=r(4848),t=r(8453);const s={title:"Field Transformations and Additional Fields",sidebar_position:11},o="Field Transformations and Additional Fields",l={},d=[{value:"Timestamp Fields",id:"timestamp-fields",level:2},{value:"Generated Arguments",id:"generated-arguments",level:3},{value:"Time Buckets",id:"time-buckets",level:4},{value:"Custom Intervals",id:"custom-intervals",level:4},{value:"Additional Calculated Fields",id:"additional-calculated-fields",level:3},{value:"Using in Aggregations",id:"using-in-aggregations",level:3},{value:"JSON Fields",id:"json-fields",level:2},{value:"Structure Extraction Argument",id:"structure-extraction-argument",level:3},{value:"JSON Path in Aggregations",id:"json-path-in-aggregations",level:3},{value:"JSON in Bucket Aggregations",id:"json-in-bucket-aggregations",level:3},{value:"Geometry Fields",id:"geometry-fields",level:2},{value:"Transformation Arguments",id:"transformation-arguments",level:3},{value:"Additional Measurement Fields",id:"additional-measurement-fields",level:3},{value:"Geometry in Aggregations",id:"geometry-in-aggregations",level:3},{value:"Spatial Operations in Queries",id:"spatial-operations-in-queries",level:3},{value:"Combining Transformations",id:"combining-transformations",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Timestamp Transformations",id:"timestamp-transformations",level:3},{value:"JSON Operations",id:"json-operations",level:3},{value:"Geometry Transformations",id:"geometry-transformations",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Examples by Use Case",id:"examples-by-use-case",level:2},{value:"Time Series Analysis",id:"time-series-analysis",level:3},{value:"Geospatial Analysis",id:"geospatial-analysis",level:3},{value:"JSON Analytics",id:"json-analytics",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"field-transformations-and-additional-fields",children:"Field Transformations and Additional Fields"})}),"\n",(0,a.jsx)(n.p,{children:"Hugr automatically adds arguments and calculated fields to certain data types, enabling powerful data transformations and calculations directly in GraphQL queries."}),"\n",(0,a.jsx)(n.h2,{id:"timestamp-fields",children:"Timestamp Fields"}),"\n",(0,a.jsx)(n.h3,{id:"generated-arguments",children:"Generated Arguments"}),"\n",(0,a.jsxs)(n.p,{children:["For ",(0,a.jsx)(n.code,{children:"Timestamp"})," and ",(0,a.jsx)(n.code,{children:"Date"})," fields in queries, Hugr adds transformation arguments:"]}),"\n",(0,a.jsx)(n.h4,{id:"time-buckets",children:"Time Buckets"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"bucket"})," argument rounds timestamps to specified intervals:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"query {\n  orders {\n    # Round to the start of the day\n    order_date(bucket: day)\n    \n    # Round to the start of the month\n    created_at(bucket: month)\n  }\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Available bucket values:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"minute"})," - Round to minute"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"hour"})," - Round to hour"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"day"})," - Round to day"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"week"})," - Round to week"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"month"})," - Round to month"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"quarter"})," - Round to quarter"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"year"})," - Round to year"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"custom-intervals",children:"Custom Intervals"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"bucket_interval"})," argument (Timestamp only) rounds to custom intervals:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query {\n  sensor_data {\n    # Round to 15-minute intervals\n    timestamp(bucket_interval: "15 minutes")\n    \n    # Round to 2-hour intervals\n    reading_time(bucket_interval: "2 hours")\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"additional-calculated-fields",children:"Additional Calculated Fields"}),"\n",(0,a.jsxs)(n.p,{children:["For each ",(0,a.jsx)(n.code,{children:"Timestamp"})," or ",(0,a.jsx)(n.code,{children:"Date"})," field, Hugr generates an additional field ",(0,a.jsx)(n.code,{children:"_<fieldname>_part"})," for extracting date/time components:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"query {\n  orders {\n    created_at\n    \n    # Extract year\n    year: _created_at_part(extract: year)\n    \n    # Extract month\n    month: _created_at_part(extract: month)\n    \n    # Extract day of week (0-6, Sunday = 0)\n    day_of_week: _created_at_part(extract: dow)\n    \n    # Extract epoch seconds\n    epoch: _created_at_part(extract: epoch)\n    \n    # Extract hour and divide by 4 (for 6-hour blocks)\n    six_hour_block: _created_at_part(extract: hour, extract_divide: 4)\n  }\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Available extract options:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"epoch"})," - Unix timestamp (seconds since 1970-01-01)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"minute"})," - Minute (0-59)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"hour"})," - Hour (0-23)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"day"})," - Day of month (1-31)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"doy"})," - Day of year (1-366)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"dow"})," - Day of week (0-6, Sunday = 0)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"iso_dow"})," - ISO day of week (1-7, Monday = 1)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"week"})," - Week of year"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"month"})," - Month (1-12)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"quarter"})," - Quarter (1-4)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"year"})," - Year"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"iso_year"})," - ISO year"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"extract_divide"})," parameter divides the extracted value, useful for creating time blocks."]}),"\n",(0,a.jsx)(n.h3,{id:"using-in-aggregations",children:"Using in Aggregations"}),"\n",(0,a.jsx)(n.p,{children:"Time transformations are particularly useful in aggregations:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"query {\n  orders_bucket_aggregation {\n    key {\n      # Group by month\n      order_month: order_date(bucket: month)\n      \n      # Also extract year and month separately\n      year: _order_date_part(extract: year)\n      month: _order_date_part(extract: month)\n    }\n    aggregations {\n      _rows_count\n      total {\n        sum\n      }\n    }\n  }\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"json-fields",children:"JSON Fields"}),"\n",(0,a.jsx)(n.h3,{id:"structure-extraction-argument",children:"Structure Extraction Argument"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"struct"})," argument on JSON fields allows extracting and typing specific parts of JSON data:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query {\n  events(\n    # Define the expected structure\n  ) {\n    id\n    # Extract specific fields from JSON\n    metadata(struct: {\n      user_id: "string"\n      score: "float"\n      tags: ["string"]\n      location: {\n        lat: "float"\n        lon: "float"\n      }\n    })\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Supported type definitions in struct:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'"string"'})," - Extract as String"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'"int"'})," - Extract as Int"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'"bigint"'})," - Extract as BigInt"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'"float"'})," - Extract as Float"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'"boolean"'})," - Extract as Boolean"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'"time"'})," - Extract as Timestamp"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'"json"'})," - Keep as JSON"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'["type"]'})," - Array of specified type"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'{ field: "type" }'})," - Nested object"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"json-path-in-aggregations",children:"JSON Path in Aggregations"}),"\n",(0,a.jsxs)(n.p,{children:["Path expressions allow you to target specific fields within JSON data. Path expressions use a dot (",(0,a.jsx)(n.code,{children:"."}),") notation to navigate through the JSON structure. It's allowed to aggregate only by object and subobject fields, not nested arrays."]}),"\n",(0,a.jsx)(n.p,{children:"Aggregate specific paths within JSON fields:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query {\n  events_aggregation {\n    # Count unique user IDs in metadata\n    unique_users: metadata {\n      count(path: "user_id")\n    }\n    \n    # Sum scores\n    total_score: metadata {\n      sum(path: "score")\n    }\n    \n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"json-in-bucket-aggregations",children:"JSON in Bucket Aggregations"}),"\n",(0,a.jsx)(n.p,{children:"Group by JSON field values:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query {\n  events_bucket_aggregation {\n    key {\n      # Group by category from JSON metadata\n      category: metadata(struct: { category: "string" })\n    }\n    aggregations {\n      _rows_count\n      metadata {\n        sum(path: "$.score")\n        avg(path: "$.duration")\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"geometry-fields",children:"Geometry Fields"}),"\n",(0,a.jsx)(n.h3,{id:"transformation-arguments",children:"Transformation Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Geometry fields accept transformation arguments to modify the geometry:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"query {\n  locations {\n    id\n    name\n    \n    # Get centroid of polygon\n    center: area(transforms: [Centroid])\n    \n    # Buffer point by 100 meters\n    coverage: location(\n      transforms: [Buffer]\n      buffer: 100\n    )\n    \n    # Reproject and simplify\n    display_geometry: boundary(\n      transforms: [Transform, Simplify]\n      from: 4326\n      to: 3857\n      simplify_factor: 0.01\n    )\n  }\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Available transformations:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Transform"})," - Reproject between coordinate systems"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Centroid"})," - Get center point"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Buffer"})," - Create buffer around geometry"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Simplify"})," - Simplify geometry"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"SimplifyTopology"})," - Simplify preserving topology"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Envelope"})," - Get bounding box"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"ConvexHull"})," - Get convex hull"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"StartPoint"})," - Get start point (LineString)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"EndPoint"})," - Get end point (LineString)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Reverse"})," - Reverse direction (LineString)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"FlipCoordinates"})," - Swap x/y coordinates"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"additional-measurement-fields",children:"Additional Measurement Fields"}),"\n",(0,a.jsxs)(n.p,{children:["For each ",(0,a.jsx)(n.code,{children:"Geometry"})," field, Hugr generates a ",(0,a.jsx)(n.code,{children:"_<fieldname>_measurement"})," field for calculations:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"query {\n  parcels {\n    id\n    boundary\n    \n    # Calculate area in square meters\n    area_m2: _boundary_measurement(type: AreaSpheroid)\n    \n    # Calculate perimeter in meters\n    perimeter_m: _boundary_measurement(type: PerimeterSpheroid)\n    \n    # Calculate area after transforming to local projection\n    local_area: _boundary_measurement(\n      type: Area\n      transform: true\n      from: 4326\n      to: 3857\n    )\n  }\n  \n  roads {\n    id\n    path\n    \n    # Calculate road length in meters\n    length_m: _path_measurement(type: LengthSpheroid)\n  }\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Available measurement types:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Area"})," - Planar area"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"AreaSpheroid"})," - Area on Earth's surface (square meters)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Length"})," - Planar length"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"LengthSpheroid"})," - Length on Earth's surface (meters)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Perimeter"})," - Planar perimeter"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"PerimeterSpheroid"})," - Perimeter on Earth's surface (meters)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"geometry-in-aggregations",children:"Geometry in Aggregations"}),"\n",(0,a.jsx)(n.p,{children:"Aggregate geometric data:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:"query {\n  regions_aggregation {\n    _rows_count\n    \n    # Aggregate geometries\n    boundary {\n      union      # Combine all boundaries\n      extent     # Get overall bounding box\n      intersection  # Get common area\n    }\n  }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"spatial-operations-in-queries",children:"Spatial Operations in Queries"}),"\n",(0,a.jsx)(n.p,{children:"Use geometry transformations and measurements together:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query {\n  properties {\n    id\n    address\n    \n    # Original geometry\n    plot\n    \n    # Buffered area for analysis\n    influence_zone: plot(\n      transforms: [Buffer]\n      buffer: 50  # 50 meters for EPSG:4326\n    )\n    \n    # Simplified for display\n    display_plot: plot(\n      transforms: [Simplify]\n      simplify_factor: 0.001\n    )\n    \n    # Measurements\n    plot_area: _plot_measurement(type: AreaSpheroid)\n    \n    # Spatial relationships\n    _spatial(field: "plot", type: INTERSECTS) {\n      flood_zones(field: "boundary") {\n        risk_level\n        zone_name\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"combining-transformations",children:"Combining Transformations"}),"\n",(0,a.jsx)(n.p,{children:"Use multiple transformations together:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query DailySalesAnalysis {\n  sales_bucket_aggregation(\n    filter: {\n      # Filter by date range\n      created_at: {\n        gte: "2024-01-01"\n        lte: "2024-12-31"\n      }\n    }\n  ) {\n    key {\n      # Group by day\n      sale_date: created_at(bucket: day)\n      \n      # Extract components for additional grouping\n      year: _created_at_part(extract: year)\n      month: _created_at_part(extract: month)\n      day: _created_at_part(extract: day)\n      \n      # Group by store location (buffered)\n      store {\n        region\n        location(transforms: [Buffer], buffer: 1000)\n      }\n      \n      # Extract category from JSON metadata\n      category: metadata(struct: { category: "string" })\n    }\n    aggregations {\n      _rows_count\n      \n      # Sum amounts\n      total_sales: amount {\n        sum\n      }\n      \n      # Aggregate JSON data\n      metadata {\n        avg(path: "$.customer_satisfaction")\n        list(path: "$.tags", distinct: true)\n      }\n      \n      # Calculate coverage area\n      store {\n        location {\n          union  # Combined coverage of all stores\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,a.jsx)(n.h3,{id:"timestamp-transformations",children:"Timestamp Transformations"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Bucketing operations are performed in the database when possible"}),"\n",(0,a.jsx)(n.li,{children:"Use consistent bucket sizes for better query performance"}),"\n",(0,a.jsx)(n.li,{children:"Consider creating materialized views for frequently used time buckets"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"json-operations",children:"JSON Operations"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Structure extraction happens during query execution"}),"\n",(0,a.jsx)(n.li,{children:"Complex nested structures may impact performance"}),"\n",(0,a.jsx)(n.li,{children:"Consider storing frequently accessed JSON paths as separate columns"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"geometry-transformations",children:"Geometry Transformations"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Transformations are applied in order specified"}),"\n",(0,a.jsx)(n.li,{children:"Simplification should be done after reprojection for best results"}),"\n",(0,a.jsx)(n.li,{children:"Buffer operations on geographic coordinates (EPSG:4326) interpret distance in meters"}),"\n",(0,a.jsx)(n.li,{children:"Use appropriate projections for accurate area/length calculations"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Time Series Data"}),": Use bucket arguments for time-based grouping rather than extracting parts and grouping manually"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"JSON Data"}),": Define struct schemas for consistent typing and better performance"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Spatial Data"}),": Apply transformations in logical order (reproject \u2192 buffer \u2192 simplify)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Aggregations"}),": Combine field transformations with aggregations for powerful analytics"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"examples-by-use-case",children:"Examples by Use Case"}),"\n",(0,a.jsx)(n.h3,{id:"time-series-analysis",children:"Time Series Analysis"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query TimeSeriesMetrics {\n  metrics_bucket_aggregation {\n    key {\n      # 15-minute intervals\n      time_bucket: timestamp(bucket_interval: "15 minutes")\n      sensor_id\n    }\n    aggregations {\n      _rows_count\n      value {\n        avg\n        min\n        max\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"geospatial-analysis",children:"Geospatial Analysis"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query SpatialCoverage {\n  stores {\n    id\n    name\n    \n    # Service area (5km radius)\n    service_area: location(\n      transforms: [Buffer]\n      buffer: 5000\n    )\n    \n    # Service area size\n    coverage_area_km2: _location_measurement(\n      type: AreaSpheroid\n    )\n    \n    # Customers within service area\n    _spatial(field: "location", type: DWITHIN, buffer: 5000) {\n      customers(field: "address_location") {\n        id\n        total_orders\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"json-analytics",children:"JSON Analytics"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query ProductAnalytics {\n  products {\n    id\n    name\n    \n    # Extract and type check analytics data\n    analytics: metadata(struct: {\n      views: "int"\n      clicks: "int"\n      conversions: "int"\n      revenue: "float"\n      tags: ["string"]\n      demographics: {\n        age_groups: ["string"]\n        locations: ["string"]\n      }\n    })\n  }\n  \n  # Aggregate analytics\n  products_aggregation {\n    metadata {\n      sum(path: "$.revenue")\n      avg(path: "$.conversions")\n      list(path: "$.tags[*]", distinct: true)\n    }\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>o});var i=r(6540);const a={},t=i.createContext(a);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);