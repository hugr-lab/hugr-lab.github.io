"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2918],{4718:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"graphql/extensions","title":"GraphQL Extensions","description":"Understanding GraphQL Extensions in Hugr - JQ transformations and performance statistics","source":"@site/docs/5-graphql/3-extensions.md","sourceDirName":"5-graphql","slug":"/graphql/extensions","permalink":"/docs/graphql/extensions","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/5-graphql/3-extensions.md","tags":[],"version":"current","lastUpdatedBy":"Claude","lastUpdatedAt":1762533510000,"sidebarPosition":3,"frontMatter":{"title":"GraphQL Extensions","sidebar_position":3,"description":"Understanding GraphQL Extensions in Hugr - JQ transformations and performance statistics","keywords":["graphql","extensions","jq","stats","performance","metrics"]},"sidebar":"docsSidebar","previous":{"title":"Mutations: Create, Update, Delete","permalink":"/docs/graphql/mutations"},"next":{"title":"JQ Transformations","permalink":"/docs/graphql/jq-transformations"}}');var t=s(4848),r=s(8453);const l={title:"GraphQL Extensions",sidebar_position:3,description:"Understanding GraphQL Extensions in Hugr - JQ transformations and performance statistics",keywords:["graphql","extensions","jq","stats","performance","metrics"]},a="GraphQL Extensions",o={},d=[{value:"Overview",id:"overview",level:2},{value:"What are GraphQL Extensions?",id:"what-are-graphql-extensions",level:3},{value:"Extension Format",id:"extension-format",level:3},{value:"Extension Types",id:"extension-types",level:2},{value:"1. JQ Extension",id:"1-jq-extension",level:3},{value:"2. Stats Extension",id:"2-stats-extension",level:3},{value:"Stats Extension",id:"stats-extension",level:2},{value:"Using the @stats Directive",id:"using-the-stats-directive",level:3},{value:"Syntax",id:"syntax",level:4},{value:"Stats Metrics",id:"stats-metrics",level:3},{value:"Examples",id:"examples",level:3},{value:"Example 1: Single Field Stats",id:"example-1-single-field-stats",level:4},{value:"Example 2: Multiple Field Stats",id:"example-2-multiple-field-stats",level:4},{value:"Example 3: Query-Level Stats",id:"example-3-query-level-stats",level:4},{value:"Example 4: Field with Top-Level Query",id:"example-4-field-with-top-level-query",level:4},{value:"Combining JQ and Stats Extensions",id:"combining-jq-and-stats-extensions",level:2},{value:"Example 1: JQ with Field Stats",id:"example-1-jq-with-field-stats",level:3},{value:"Example 2: Multiple JQ with Stats",id:"example-2-multiple-jq-with-stats",level:3},{value:"Example 3: Query-Level Stats with JQ",id:"example-3-query-level-stats-with-jq",level:3},{value:"Example 4: JQ with @stats on JQ Query",id:"example-4-jq-with-stats-on-jq-query",level:3},{value:"Example 5: Nested Stats with JQ",id:"example-5-nested-stats-with-jq",level:3},{value:"Extension Hierarchy",id:"extension-hierarchy",level:2},{value:"Hierarchy Rules",id:"hierarchy-rules",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"1. Performance Monitoring",id:"1-performance-monitoring",level:3},{value:"2. Data Transformation with Metrics",id:"2-data-transformation-with-metrics",level:3},{value:"3. A/B Testing Query Performance",id:"3-ab-testing-query-performance",level:3},{value:"4. Debugging Slow Queries",id:"4-debugging-slow-queries",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Stats Selectively",id:"1-use-stats-selectively",level:3},{value:"2. Combine with Logging",id:"2-combine-with-logging",level:3},{value:"3. Set Performance Budgets",id:"3-set-performance-budgets",level:3},{value:"4. Monitor JQ Transformation Performance",id:"4-monitor-jq-transformation-performance",level:3},{value:"5. Use Hierarchical Stats Wisely",id:"5-use-hierarchical-stats-wisely",level:3},{value:"Performance Impact",id:"performance-impact",level:2},{value:"Stats Overhead",id:"stats-overhead",level:3},{value:"When to Avoid Stats",id:"when-to-avoid-stats",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Stats Not Appearing",id:"stats-not-appearing",level:3},{value:"Unexpected Timing Values",id:"unexpected-timing-values",level:3},{value:"Hierarchical Stats Missing",id:"hierarchical-stats-missing",level:3},{value:"See Also",id:"see-also",level:2},{value:"Documentation",id:"documentation",level:3},{value:"Related Topics",id:"related-topics",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"graphql-extensions",children:"GraphQL Extensions"})}),"\n",(0,t.jsxs)(n.p,{children:["GraphQL Extensions in Hugr provide a standardized way to return transformation results and performance metrics alongside query responses. Extensions appear in the ",(0,t.jsx)(n.code,{children:"extensions"})," field of the GraphQL response and complement the main ",(0,t.jsx)(n.code,{children:"data"})," field."]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.h3,{id:"what-are-graphql-extensions",children:"What are GraphQL Extensions?"}),"\n",(0,t.jsxs)(n.p,{children:["GraphQL Extensions are additional data returned in the response that don't fit into the standard ",(0,t.jsx)(n.code,{children:"data"})," field. In Hugr, extensions are used to return:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"JQ transformation results"}),": Results of server-side data transformations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Performance statistics"}),": Query execution metrics and timings"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"extension-format",children:"Extension Format"}),"\n",(0,t.jsx)(n.p,{children:"Extensions always follow a hierarchical structure that mirrors the query structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    // Main query results\n  },\n  "extensions": {\n    "node_name": {\n      "extension_type": {\n        // Extension data\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The extension hierarchy matches the query node hierarchy, with nested nodes appearing under a ",(0,t.jsx)(n.code,{children:"children"})," property."]}),"\n",(0,t.jsx)(n.h2,{id:"extension-types",children:"Extension Types"}),"\n",(0,t.jsx)(n.p,{children:"Hugr implements two types of GraphQL extensions:"}),"\n",(0,t.jsx)(n.h3,{id:"1-jq-extension",children:"1. JQ Extension"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"jq"})," extension contains results of JQ transformations applied to query results. It appears when using the ",(0,t.jsx)(n.code,{children:"jq()"})," query or the ",(0,t.jsx)(n.code,{children:"/jq-query"})," endpoint."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key characteristics"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Returns transformed data according to JQ expression"}),"\n",(0,t.jsxs)(n.li,{children:["Located in ",(0,t.jsx)(n.code,{children:"extensions.<query_name>.jq"})]}),"\n",(0,t.jsx)(n.li,{children:"Can be combined with other extensions"}),"\n",(0,t.jsxs)(n.li,{children:["See ",(0,t.jsx)(n.a,{href:"/docs/graphql/jq-transformations",children:"JQ Transformations"})," for detailed documentation"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-stats-extension",children:"2. Stats Extension"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"stats"})," extension returns performance metrics for query execution. It is activated by applying the ",(0,t.jsx)(n.code,{children:"@stats"})," directive to queries, fields, or mutations."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key characteristics"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Provides detailed timing information"}),"\n",(0,t.jsx)(n.li,{children:"Can be applied at query level or field level"}),"\n",(0,t.jsx)(n.li,{children:"Supports hierarchical statistics"}),"\n",(0,t.jsx)(n.li,{children:"Useful for performance optimization and monitoring"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"stats-extension",children:"Stats Extension"}),"\n",(0,t.jsx)(n.h3,{id:"using-the-stats-directive",children:"Using the @stats Directive"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"@stats"})," directive can be applied to:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Entire query"}),": Get overall query execution time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Specific fields"}),": Get per-field execution metrics"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multiple fields"}),": Track multiple fields independently"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query @stats {\n  # Query execution stats\n}\n\nquery {\n  field @stats {\n    # Field execution stats\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"stats-metrics",children:"Stats Metrics"}),"\n",(0,t.jsx)(n.p,{children:"The stats extension provides the following metrics:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Level"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"compile_time"})}),(0,t.jsx)(n.td,{children:"Time spent compiling the query"}),(0,t.jsx)(n.td,{children:"Field"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"exec_time"})}),(0,t.jsx)(n.td,{children:"Time spent executing the query"}),(0,t.jsx)(n.td,{children:"Field"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"node_time"})}),(0,t.jsx)(n.td,{children:"Total time for the node (including compilation and execution)"}),(0,t.jsx)(n.td,{children:"Field"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"planning_time"})}),(0,t.jsx)(n.td,{children:"Time spent planning the query execution"}),(0,t.jsx)(n.td,{children:"Field"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"total_time"})}),(0,t.jsx)(n.td,{children:"Total query execution time"}),(0,t.jsx)(n.td,{children:"Query"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"Name of the field or query"}),(0,t.jsx)(n.td,{children:"All"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.h4,{id:"example-1-single-field-stats",children:"Example 1: Single Field Stats"}),"\n",(0,t.jsxs)(n.p,{children:["Apply ",(0,t.jsx)(n.code,{children:"@stats"})," to a single field to get its execution metrics:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query {\n  op2023 {\n    providers_aggregation @stats {\n      _rows_count\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "op2023": {\n      "providers_aggregation": {\n        "_rows_count": 628012\n      }\n    }\n  },\n  "extensions": {\n    "op2023": {\n      "children": {\n        "providers_aggregation": {\n          "stats": {\n            "compile_time": "212.791\xb5s",\n            "exec_time": "1.96875ms",\n            "name": "providers_aggregation",\n            "node_time": "2.181541ms",\n            "planning_time": "180.291\xb5s"\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Stats breakdown"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"compile_time"}),": 212.791\xb5s - time to compile the query"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"exec_time"}),": 1.96875ms - actual query execution time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"node_time"}),": 2.181541ms - total time (compile + plan + exec)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"planning_time"}),": 180.291\xb5s - time to plan query execution"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example-2-multiple-field-stats",children:"Example 2: Multiple Field Stats"}),"\n",(0,t.jsx)(n.p,{children:"Track statistics for multiple fields:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query {\n  op2023 {\n    providers_aggregation @stats {\n      _rows_count\n    }\n    general_payments_aggregation @stats {\n      _rows_count\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "op2023": {\n      "general_payments_aggregation": {\n        "_rows_count": 14607336\n      },\n      "providers_aggregation": {\n        "_rows_count": 628012\n      }\n    }\n  },\n  "extensions": {\n    "op2023": {\n      "children": {\n        "general_payments_aggregation": {\n          "stats": {\n            "compile_time": "212.084\xb5s",\n            "exec_time": "2.185083ms",\n            "name": "general_payments_aggregation",\n            "node_time": "2.397167ms",\n            "planning_time": "177.625\xb5s"\n          }\n        },\n        "providers_aggregation": {\n          "stats": {\n            "compile_time": "195.875\xb5s",\n            "exec_time": "2.19775ms",\n            "name": "providers_aggregation",\n            "node_time": "2.393625ms",\n            "planning_time": "162.5\xb5s"\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"This allows you to compare performance between different fields and identify bottlenecks."}),"\n",(0,t.jsx)(n.h4,{id:"example-3-query-level-stats",children:"Example 3: Query-Level Stats"}),"\n",(0,t.jsxs)(n.p,{children:["Apply ",(0,t.jsx)(n.code,{children:"@stats"})," to the entire query to get overall execution time:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query @stats {\n  op2023 {\n    providers_aggregation {\n      _rows_count\n    }\n    general_payments_aggregation {\n      _rows_count\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "op2023": {\n      "general_payments_aggregation": {\n        "_rows_count": 14607336\n      },\n      "providers_aggregation": {\n        "_rows_count": 628012\n      }\n    }\n  },\n  "extensions": {\n    "children": {},\n    "stats": {\n      "name": "",\n      "total_time": "2.216625ms"\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Query-level stats appear at the root of ",(0,t.jsx)(n.code,{children:"extensions"})," and only include ",(0,t.jsx)(n.code,{children:"total_time"})," and ",(0,t.jsx)(n.code,{children:"name"})," (empty for anonymous queries)."]}),"\n",(0,t.jsx)(n.h4,{id:"example-4-field-with-top-level-query",children:"Example 4: Field with Top-Level Query"}),"\n",(0,t.jsx)(n.p,{children:"Apply stats to a specific field inside a query with top-level stats:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query {\n  h3(resolution: 6) @stats {\n    cell_id\n    geometry\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "h3": [\n      {\n        "cell_id": "862ba107fffffff",\n        "geometry": "..."\n      }\n    ]\n  },\n  "extensions": {\n    "h3": {\n      "stats": {\n        "compile_time": "1.471792ms",\n        "exec_time": "21.653323208s",\n        "name": "h3",\n        "node_time": "21.654795s",\n        "planning_time": "1.017042ms"\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"This example shows a long-running query (21.6 seconds) with detailed timing breakdown."}),"\n",(0,t.jsx)(n.h2,{id:"combining-jq-and-stats-extensions",children:"Combining JQ and Stats Extensions"}),"\n",(0,t.jsx)(n.p,{children:"You can combine JQ transformations with stats collection to both transform data and measure performance."}),"\n",(0,t.jsx)(n.h3,{id:"example-1-jq-with-field-stats",children:"Example 1: JQ with Field Stats"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".op2023.providers_aggregation") {\n    op2023 {\n      providers_aggregation @stats {\n        _rows_count\n      }\n      general_payments_aggregation {\n        _rows_count\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": {\n      "op2023": {\n        "providers_aggregation": {\n          "_rows_count": 628012\n        },\n        "general_payments_aggregation": {\n          "_rows_count": 14607336\n        }\n      }\n    }\n  },\n  "extensions": {\n    "jq": {\n      "children": {\n        "op2023": {\n          "children": {\n            "providers_aggregation": {\n              "stats": {\n                "compile_time": "195.875\xb5s",\n                "exec_time": "2.19775ms",\n                "name": "providers_aggregation",\n                "node_time": "2.393625ms",\n                "planning_time": "162.5\xb5s"\n              }\n            }\n          }\n        }\n      },\n      "jq": {\n        "_rows_count": 628012\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Extension structure"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"extensions.jq.jq"}),": Contains the JQ transformation result"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"extensions.jq.children.op2023.children.providers_aggregation.stats"}),": Contains field stats"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-2-multiple-jq-with-stats",children:"Example 2: Multiple JQ with Stats"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".op2023.providers_aggregation") {\n    op2023 {\n      providers_aggregation {\n        _rows_count\n      }\n      general_payments_aggregation {\n        _rows_count\n      }\n    }\n  }\n  payments: jq(query: ".op2023.general_payments_aggregation") {\n    op2023 {\n      general_payments_aggregation @stats {\n        _rows_count\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": null,\n    "payments": null\n  },\n  "extensions": {\n    "jq": {\n      "jq": {\n        "_rows_count": 628012\n      }\n    },\n    "payments": {\n      "children": {\n        "op2023": {\n          "children": {\n            "general_payments_aggregation": {\n              "stats": {\n                "compile_time": "194.417\xb5s",\n                "exec_time": "2.013292ms",\n                "name": "general_payments_aggregation",\n                "node_time": "2.207709ms",\n                "planning_time": "159.125\xb5s"\n              }\n            }\n          }\n        }\n      },\n      "jq": {\n        "_rows_count": 14607336\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Each JQ query has its own extension section with both ",(0,t.jsx)(n.code,{children:"jq"})," transformation results and ",(0,t.jsx)(n.code,{children:"stats"})," (if applied)."]}),"\n",(0,t.jsx)(n.h3,{id:"example-3-query-level-stats-with-jq",children:"Example 3: Query-Level Stats with JQ"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:'query @stats {\n  jq(query: ".op2023.providers_aggregation") {\n    op2023 {\n      providers_aggregation {\n        _rows_count\n      }\n      general_payments_aggregation {\n        _rows_count\n      }\n    }\n  }\n  payments: jq(query: ".op2023.general_payments_aggregation") {\n    op2023 {\n      general_payments_aggregation @stats {\n        _rows_count\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": null,\n    "payments": null\n  },\n  "extensions": {\n    "children": {\n      "jq": {\n        "jq": {\n          "_rows_count": 628012\n        }\n      },\n      "payments": {\n        "children": {\n          "op2023": {\n            "children": {\n              "general_payments_aggregation": {\n                "stats": {\n                  "compile_time": "194.417\xb5s",\n                  "exec_time": "2.013292ms",\n                  "name": "general_payments_aggregation",\n                  "node_time": "2.207709ms",\n                  "planning_time": "159.125\xb5s"\n                }\n              }\n            }\n          }\n        },\n        "jq": {\n          "_rows_count": 14607336\n        }\n      }\n    },\n    "stats": {\n      "name": "",\n      "total_time": "2.731416ms"\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Extension structure"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"extensions.stats"}),": Query-level total execution time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"extensions.children.jq"}),": JQ transformation results"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"extensions.children.payments.children...stats"}),": Field-level stats"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"extensions.children.payments.jq"}),": JQ transformation results"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-4-jq-with-stats-on-jq-query",children:"Example 4: JQ with @stats on JQ Query"}),"\n",(0,t.jsxs)(n.p,{children:["Apply ",(0,t.jsx)(n.code,{children:"@stats"})," to the ",(0,t.jsx)(n.code,{children:"jq()"})," query itself to measure JQ transformation performance:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".op2023.providers_aggregation") @stats {\n    op2023 {\n      providers_aggregation {\n        _rows_count\n      }\n      general_payments_aggregation {\n        _rows_count\n      }\n    }\n  }\n  payments: jq(query: ".op2023.general_payments_aggregation") {\n    op2023 {\n      general_payments_aggregation @stats {\n        _rows_count\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": null,\n    "payments": null\n  },\n  "extensions": {\n    "jq": {\n      "jq": {\n        "_rows_count": 628012\n      },\n      "stats": {\n        "compiler_time": "59.042\xb5s",\n        "data_request_time": "2.46025ms",\n        "execution_time": "9.083\xb5s",\n        "node_time": "2.464583ms",\n        "runs": 1,\n        "serialization_time": "46.125\xb5s",\n        "transformed": 1\n      }\n    },\n    "payments": {\n      "children": {\n        "op2023": {\n          "children": {\n            "general_payments_aggregation": {\n              "stats": {\n                "compile_time": "194.5\xb5s",\n                "exec_time": "2.031958ms",\n                "name": "general_payments_aggregation",\n                "node_time": "2.226458ms",\n                "planning_time": "163.292\xb5s"\n              }\n            }\n          }\n        }\n      },\n      "jq": {\n        "_rows_count": 14607336\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"JQ-specific stats"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"compiler_time"}),": Time to compile JQ expression"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"data_request_time"}),": Time to fetch data for transformation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"execution_time"}),": Time to execute JQ transformation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"serialization_time"}),": Time to serialize result"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"runs"}),": Number of times JQ expression was executed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"transformed"}),": Number of items transformed"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-5-nested-stats-with-jq",children:"Example 5: Nested Stats with JQ"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".op2023.providers_aggregation") @stats {\n    op2023 {\n      providers_aggregation @stats {\n        _rows_count\n      }\n      general_payments_aggregation {\n        _rows_count\n      }\n    }\n  }\n  payments: jq(query: ".op2023.general_payments_aggregation") {\n    op2023 {\n      general_payments_aggregation @stats {\n        _rows_count\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": null,\n    "payments": null\n  },\n  "extensions": {\n    "jq": {\n      "children": {\n        "op2023": {\n          "children": {\n            "providers_aggregation": {\n              "stats": {\n                "compile_time": "107.458\xb5s",\n                "exec_time": "1.455209ms",\n                "name": "providers_aggregation",\n                "node_time": "1.562667ms",\n                "planning_time": "88.292\xb5s"\n              }\n            }\n          }\n        }\n      },\n      "jq": {\n        "_rows_count": 628012\n      },\n      "stats": {\n        "compiler_time": "50.958\xb5s",\n        "data_request_time": "1.736125ms",\n        "execution_time": "12.583\xb5s",\n        "node_time": "1.740625ms",\n        "runs": 1,\n        "serialization_time": "36.917\xb5s",\n        "transformed": 1\n      }\n    },\n    "payments": {\n      "children": {\n        "op2023": {\n          "children": {\n            "general_payments_aggregation": {\n              "stats": {\n                "compile_time": "115.583\xb5s",\n                "exec_time": "1.650875ms",\n                "name": "general_payments_aggregation",\n                "node_time": "1.766458ms",\n                "planning_time": "95.958\xb5s"\n              }\n            }\n          }\n        }\n      },\n      "jq": {\n        "_rows_count": 14607336\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"This example shows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["JQ transformation stats at ",(0,t.jsx)(n.code,{children:"extensions.jq.stats"})]}),"\n",(0,t.jsxs)(n.li,{children:["Field execution stats at ",(0,t.jsx)(n.code,{children:"extensions.jq.children.op2023.children.providers_aggregation.stats"})]}),"\n",(0,t.jsxs)(n.li,{children:["JQ transformation result at ",(0,t.jsx)(n.code,{children:"extensions.jq.jq"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"extension-hierarchy",children:"Extension Hierarchy"}),"\n",(0,t.jsx)(n.p,{children:"Extensions follow a hierarchical structure that mirrors the query structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"extensions\n\u251c\u2500\u2500 <query_name>\n\u2502   \u251c\u2500\u2500 stats (if @stats applied to query)\n\u2502   \u251c\u2500\u2500 jq (if jq() query)\n\u2502   \u2514\u2500\u2500 children\n\u2502       \u2514\u2500\u2500 <field_name>\n\u2502           \u251c\u2500\u2500 stats (if @stats applied to field)\n\u2502           \u2514\u2500\u2500 children\n\u2502               \u2514\u2500\u2500 <nested_field>\n\u2502                   \u2514\u2500\u2500 stats\n\u2514\u2500\u2500 stats (if @stats applied to anonymous query)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"hierarchy-rules",children:"Hierarchy Rules"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Root level"}),": Query-level stats (for queries with ",(0,t.jsx)(n.code,{children:"@stats"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Query name level"}),": JQ results and query-specific data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Children"}),": Nested fields and their stats"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Recursive"}),": Structure repeats for nested fields"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsx)(n.h3,{id:"1-performance-monitoring",children:"1. Performance Monitoring"}),"\n",(0,t.jsx)(n.p,{children:"Track query execution time to identify slow queries:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query @stats {\n  users {\n    id\n    orders @stats {\n      id\n      total\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Use the stats to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Identify slow fields"}),"\n",(0,t.jsx)(n.li,{children:"Optimize query structure"}),"\n",(0,t.jsx)(n.li,{children:"Monitor query performance over time"}),"\n",(0,t.jsx)(n.li,{children:"Set up alerts for slow queries"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-data-transformation-with-metrics",children:"2. Data Transformation with Metrics"}),"\n",(0,t.jsx)(n.p,{children:"Transform data while tracking performance:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:'query {\n  transformed: jq(query: ".users | map({id, name})") @stats {\n    users {\n      id\n      name\n      email\n      created_at\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Benefits:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Measure transformation overhead"}),"\n",(0,t.jsx)(n.li,{children:"Compare transformation vs query time"}),"\n",(0,t.jsx)(n.li,{children:"Optimize JQ expressions"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-ab-testing-query-performance",children:"3. A/B Testing Query Performance"}),"\n",(0,t.jsx)(n.p,{children:"Compare performance of different query approaches:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query @stats {\n  approach_a: users(limit: 100) @stats {\n    id\n    name\n  }\n  approach_b: users_optimized(limit: 100) @stats {\n    id\n    name\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Use stats to determine which approach is faster."}),"\n",(0,t.jsx)(n.h3,{id:"4-debugging-slow-queries",children:"4. Debugging Slow Queries"}),"\n",(0,t.jsxs)(n.p,{children:["Add ",(0,t.jsx)(n.code,{children:"@stats"})," to different levels to identify bottlenecks:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"query {\n  catalog @stats {\n    products @stats {\n      id\n      name\n      reviews @stats {\n        rating\n      }\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Check which field contributes most to total execution time."}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-use-stats-selectively",children:"1. Use Stats Selectively"}),"\n",(0,t.jsxs)(n.p,{children:["Apply ",(0,t.jsx)(n.code,{children:"@stats"})," only when needed:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Development"}),": Add to all fields to identify bottlenecks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Production"}),": Add only to critical queries or when debugging"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitoring"}),": Use query-level stats for overview"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"# Development - detailed stats\nquery {\n  catalog @stats {\n    products @stats {\n      id\n    }\n  }\n}\n\n# Production - minimal overhead\nquery @stats {\n  catalog {\n    products {\n      id\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-combine-with-logging",children:"2. Combine with Logging"}),"\n",(0,t.jsx)(n.p,{children:"Log extension stats for analysis:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const response = await fetchGraphQL(query);\nif (response.extensions?.stats) {\n  logger.info('Query performance', {\n    query: queryName,\n    totalTime: response.extensions.stats.total_time\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-set-performance-budgets",children:"3. Set Performance Budgets"}),"\n",(0,t.jsx)(n.p,{children:"Use stats to enforce performance budgets:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const MAX_QUERY_TIME_MS = 100;\n\nif (parseTime(response.extensions.stats.total_time) > MAX_QUERY_TIME_MS) {\n  logger.warn('Query exceeded performance budget', {\n    query: queryName,\n    time: response.extensions.stats.total_time,\n    budget: MAX_QUERY_TIME_MS\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-monitor-jq-transformation-performance",children:"4. Monitor JQ Transformation Performance"}),"\n",(0,t.jsx)(n.p,{children:"When using JQ transformations, track their impact:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: "complex transformation") @stats {\n    large_dataset {\n      # many fields\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Check ",(0,t.jsx)(n.code,{children:"compiler_time"}),", ",(0,t.jsx)(n.code,{children:"execution_time"}),", and ",(0,t.jsx)(n.code,{children:"serialization_time"})," to ensure JQ isn't causing bottlenecks."]}),"\n",(0,t.jsx)(n.h3,{id:"5-use-hierarchical-stats-wisely",children:"5. Use Hierarchical Stats Wisely"}),"\n",(0,t.jsx)(n.p,{children:"Apply stats at different levels based on needs:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"# Check if entire query is slow\nquery @stats { ... }\n\n# Identify which field is slow\nquery {\n  field1 @stats { ... }\n  field2 @stats { ... }\n}\n\n# Drill down into nested fields\nquery {\n  parent {\n    child @stats { ... }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"performance-impact",children:"Performance Impact"}),"\n",(0,t.jsx)(n.h3,{id:"stats-overhead",children:"Stats Overhead"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"@stats"})," directive has minimal performance overhead:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Query-level stats"}),": ~0.01ms overhead"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Field-level stats"}),": ~0.01ms per field"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Total impact"}),": Typically <1% of query execution time"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"when-to-avoid-stats",children:"When to Avoid Stats"}),"\n",(0,t.jsxs)(n.p,{children:["Avoid excessive use of ",(0,t.jsx)(n.code,{children:"@stats"})," in:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"High-frequency queries"}),": Where every microsecond matters"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Large fan-out queries"}),": With hundreds of fields"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Production hot paths"}),": Unless actively debugging"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Use query-level stats for general monitoring and field-level stats only when drilling into specific issues."}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"stats-not-appearing",children:"Stats Not Appearing"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Extensions don't contain stats even though ",(0,t.jsx)(n.code,{children:"@stats"})," is applied."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Check that the query executed successfully (no GraphQL errors)"}),"\n",(0,t.jsxs)(n.li,{children:["Verify ",(0,t.jsx)(n.code,{children:"@stats"})," syntax is correct"]}),"\n",(0,t.jsxs)(n.li,{children:["Ensure hugr version supports ",(0,t.jsx)(n.code,{children:"@stats"})," directive"]}),"\n",(0,t.jsx)(n.li,{children:"Check server logs for errors"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"unexpected-timing-values",children:"Unexpected Timing Values"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Stats show unexpectedly high or low values."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Explanations"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["High ",(0,t.jsx)(n.code,{children:"compile_time"})]}),": Complex query or first-time query compilation (not cached)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["High ",(0,t.jsx)(n.code,{children:"exec_time"})]}),": Large dataset, slow data source, or unoptimized query"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["High ",(0,t.jsx)(n.code,{children:"node_time"})," vs ",(0,t.jsx)(n.code,{children:"exec_time"})]}),": Overhead from planning, compilation, or serialization"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Low values"}),": Results may be cached"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"hierarchical-stats-missing",children:"Hierarchical Stats Missing"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Expected nested stats in ",(0,t.jsx)(n.code,{children:"children"})," don't appear."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure ",(0,t.jsx)(n.code,{children:"@stats"})," is applied to the specific field"]}),"\n",(0,t.jsx)(n.li,{children:"Check that the field actually executed (not null/skipped)"}),"\n",(0,t.jsx)(n.li,{children:"Verify query structure matches expected hierarchy"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsx)(n.h3,{id:"documentation",children:"Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/graphql/jq-transformations",children:"JQ Transformations"})," - Detailed JQ transformation documentation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/querying/jq-endpoint",children:"REST API /jq-query Endpoint"})," - JQ endpoint with extensions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/references/directives",children:"GraphQL Directives Reference"})," - All available directives"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/graphql/queries",children:"GraphQL Queries"})," - Query documentation"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"related-topics",children:"Related Topics"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/deployment/caching",children:"Caching"})," - Cache configuration for better performance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/deployment/config",children:"Deployment Configuration"})," - General deployment configuration"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);