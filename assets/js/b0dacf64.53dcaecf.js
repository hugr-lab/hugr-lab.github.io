"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[4477],{1405:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"graphql/jq-transformations","title":"JQ Transformations","description":"Server-side JQ transformations for GraphQL query results in hugr","source":"@site/docs/5-graphql/4-jq-transformations.md","sourceDirName":"5-graphql","slug":"/graphql/jq-transformations","permalink":"/docs/graphql/jq-transformations","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/5-graphql/4-jq-transformations.md","tags":[],"version":"current","lastUpdatedBy":"VGSML","lastUpdatedAt":1770931358000,"sidebarPosition":4,"frontMatter":{"title":"JQ Transformations","sidebar_position":4,"description":"Server-side JQ transformations for GraphQL query results in hugr","keywords":["jq","transformations","server-side","graphql","data processing"]},"sidebar":"docsSidebar","previous":{"title":"GraphQL Extensions","permalink":"/docs/graphql/extensions"},"next":{"title":"Custom JQ Functions","permalink":"/docs/graphql/jq-custom-functions"}}');var i=r(4848),a=r(8453);const l={title:"JQ Transformations",sidebar_position:4,description:"Server-side JQ transformations for GraphQL query results in hugr",keywords:["jq","transformations","server-side","graphql","data processing"]},t="JQ Transformations",d={},c=[{value:"Overview",id:"overview",level:2},{value:"What are JQ Transformations in Hugr?",id:"what-are-jq-transformations-in-hugr",level:3},{value:"Why Use JQ Transformations?",id:"why-use-jq-transformations",level:3},{value:"Benefits of Server-Side Transformations",id:"benefits-of-server-side-transformations",level:3},{value:"Transformation Methods",id:"transformation-methods",level:2},{value:"1. Built-in GraphQL <code>jq()</code> Query",id:"1-built-in-graphql-jq-query",level:3},{value:"2. REST Endpoint <code>/jq-query</code>",id:"2-rest-endpoint-jq-query",level:3},{value:"Built-in GraphQL jq() Query",id:"built-in-graphql-jq-query",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Basic Transformation Examples",id:"basic-transformation-examples",level:3},{value:"Example 1: Simple Field Extraction",id:"example-1-simple-field-extraction",level:4},{value:"Example 2: Filtering Arrays",id:"example-2-filtering-arrays",level:4},{value:"Example 3: Data Restructuring",id:"example-3-data-restructuring",level:4},{value:"Working with include_origin",id:"working-with-include_origin",level:3},{value:"Example with include_origin: true",id:"example-with-include_origin-true",level:4},{value:"Example with include_origin: false",id:"example-with-include_origin-false",level:4},{value:"Using Aliases",id:"using-aliases",level:3},{value:"Where Results are Located",id:"where-results-are-located",level:3},{value:"Hierarchical Transformations",id:"hierarchical-transformations",level:3},{value:"REST Endpoint /jq-query",id:"rest-endpoint-jq-query",level:2},{value:"Request Format",id:"request-format",level:3},{value:"Caching Headers",id:"caching-headers",level:4},{value:"Response Format",id:"response-format",level:3},{value:"HTTP Status Codes",id:"http-status-codes",level:3},{value:"curl Usage Examples",id:"curl-usage-examples",level:3},{value:"Example 1: Basic Transformation",id:"example-1-basic-transformation",level:4},{value:"Example 2: With Variables",id:"example-2-with-variables",level:4},{value:"Example 3: Error Handling",id:"example-3-error-handling",level:4},{value:"Example 4: With Caching (5 minute TTL)",id:"example-4-with-caching-5-minute-ttl",level:4},{value:"Example 5: Custom Cache Key",id:"example-5-custom-cache-key",level:4},{value:"Example 6: Cache Invalidation",id:"example-6-cache-invalidation",level:4},{value:"Example 7: Duration Format",id:"example-7-duration-format",level:4},{value:"Differences from Built-in jq()",id:"differences-from-built-in-jq",level:3},{value:"Working with Variables",id:"working-with-variables",level:2},{value:"Passing Variables in GraphQL",id:"passing-variables-in-graphql",level:3},{value:"Using Variables in JQ Expressions",id:"using-variables-in-jq-expressions",level:3},{value:"Example 1: Filter Using Variable",id:"example-1-filter-using-variable",level:4},{value:"Example 2: Dynamic Field Selection",id:"example-2-dynamic-field-selection",level:4},{value:"Example 3: Conditional Transformation",id:"example-3-conditional-transformation",level:4},{value:"Variable Scope",id:"variable-scope",level:3},{value:"<code>_jq</code> Variable Input Transformations",id:"_jq-variable-input-transformations",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Merge Behavior",id:"merge-behavior",level:3},{value:"Examples",id:"examples",level:3},{value:"Dynamic Date Range",id:"dynamic-date-range",level:4},{value:"Conditional Defaults",id:"conditional-defaults",level:4},{value:"Notes",id:"notes",level:3},{value:"queryHugr() Function (JQ-only)",id:"queryhugr-function-jq-only",level:2},{value:"Description",id:"description",level:3},{value:"Syntax",id:"syntax-1",level:3},{value:"Basic Examples",id:"basic-examples",level:3},{value:"Example 1: Enrich Data with Additional Query",id:"example-1-enrich-data-with-additional-query",level:4},{value:"Example 2: Combining Data from Multiple Sources",id:"example-2-combining-data-from-multiple-sources",level:4},{value:"Using with Variables",id:"using-with-variables",level:3},{value:"Example 3: Query with Variables",id:"example-3-query-with-variables",level:4},{value:"Use Cases",id:"use-cases",level:3},{value:"1. Data Enrichment",id:"1-data-enrichment",level:4},{value:"2. Cross-Source Aggregation",id:"2-cross-source-aggregation",level:4},{value:"3. Conditional Data Loading",id:"3-conditional-data-loading",level:4},{value:"4. Recursive Hierarchies",id:"4-recursive-hierarchies",level:4},{value:"Complex Example: E-commerce Order Dashboard",id:"complex-example-e-commerce-order-dashboard",level:3},{value:"Optimized Alternative: Using GraphQL Relations",id:"optimized-alternative-using-graphql-relations",level:3},{value:"How It Differs from Regular GraphQL Queries",id:"how-it-differs-from-regular-graphql-queries",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Caching queryHugr() Results",id:"caching-queryhugr-results",level:3},{value:"Using @cache Directive in queryHugr()",id:"using-cache-directive-in-queryhugr",level:4},{value:"Benefits of Caching",id:"benefits-of-caching",level:4},{value:"Cache Key Generation",id:"cache-key-generation",level:4},{value:"Example: Caching Customer Statistics",id:"example-caching-customer-statistics",level:4},{value:"When to Use Caching in queryHugr()",id:"when-to-use-caching-in-queryhugr",level:4},{value:"Practical Examples",id:"practical-examples",level:2},{value:"Example 1: Filtering and Transforming Arrays",id:"example-1-filtering-and-transforming-arrays",level:3},{value:"Example 2: Grouping and Aggregation",id:"example-2-grouping-and-aggregation",level:3},{value:"Example 3: Modifying Response Structure",id:"example-3-modifying-response-structure",level:3},{value:"Example 4: Combining Data from Multiple Queries",id:"example-4-combining-data-from-multiple-queries",level:3},{value:"Example 5: Conditional Logic",id:"example-5-conditional-logic",level:3},{value:"Example 6: Working with Nullable Values",id:"example-6-working-with-nullable-values",level:3},{value:"Example 7: Complex Transformation for BI Dashboard",id:"example-7-complex-transformation-for-bi-dashboard",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"When to Use jq() vs /jq-query",id:"when-to-use-jq-vs-jq-query",level:3},{value:"Performance Considerations",id:"performance-considerations-1",level:3},{value:"Caching Best Practices",id:"caching-best-practices",level:3},{value:"Debugging JQ Expressions",id:"debugging-jq-expressions",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Security Considerations",id:"security-considerations",level:3},{value:"See Also",id:"see-also",level:2},{value:"Documentation",id:"documentation",level:3},{value:"Related Topics",id:"related-topics",level:3},{value:"Examples",id:"examples-1",level:3},{value:"External Resources",id:"external-resources",level:3}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"jq-transformations",children:"JQ Transformations"})}),"\n",(0,i.jsx)(n.p,{children:"Hugr supports powerful server-side JQ transformations to transform GraphQL query results before they are returned to the client. This enables flexible data processing, restructuring, filtering, and enrichment without requiring client-side logic."}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["JQ transformation results are returned in the ",(0,i.jsx)(n.code,{children:"extensions"})," field of the GraphQL response. See ",(0,i.jsx)(n.a,{href:"/docs/graphql/extensions",children:"GraphQL Extensions"})," for more information about the extension format and how to combine JQ with performance stats."]})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.h3,{id:"what-are-jq-transformations-in-hugr",children:"What are JQ Transformations in Hugr?"}),"\n",(0,i.jsxs)(n.p,{children:["JQ transformations in hugr allow you to apply ",(0,i.jsx)(n.a,{href:"https://jqlang.github.io/jq/",children:"jq"})," expressions to GraphQL query results on the server side. JQ is a lightweight and flexible command-line JSON processor that provides a rich set of filters and transformations."]}),"\n",(0,i.jsx)(n.h3,{id:"why-use-jq-transformations",children:"Why Use JQ Transformations?"}),"\n",(0,i.jsx)(n.p,{children:"Server-side transformations offer several advantages:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reduce Network Traffic"}),": Transform and filter data on the server before sending it to clients"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Simplify Client Logic"}),": Offload complex data transformations from client applications"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistent Processing"}),": Apply the same transformations across multiple clients"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Enrichment"}),": Combine data from multiple sources using nested queries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flexible Output Formats"}),": Adapt data structure to match different client requirements"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"benefits-of-server-side-transformations",children:"Benefits of Server-Side Transformations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance"}),": Process data closer to the source, reducing bandwidth usage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security"}),": Hide sensitive fields or apply business logic before data leaves the server"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flexibility"}),": Change data structure without modifying the underlying schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Composability"}),": Chain multiple transformations for complex data processing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Integration"}),": Easily integrate with external APIs and combine results"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"transformation-methods",children:"Transformation Methods"}),"\n",(0,i.jsx)(n.p,{children:"Hugr provides two ways to apply JQ transformations:"}),"\n",(0,i.jsxs)(n.h3,{id:"1-built-in-graphql-jq-query",children:["1. Built-in GraphQL ",(0,i.jsx)(n.code,{children:"jq()"})," Query"]}),"\n",(0,i.jsxs)(n.p,{children:["The built-in ",(0,i.jsx)(n.code,{children:"jq()"})," query allows you to transform GraphQL results inline within your GraphQL queries."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Key characteristics"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["JQ receives only the ",(0,i.jsx)(n.code,{children:"data"})," field from the GraphQL response"]}),"\n",(0,i.jsxs)(n.li,{children:["Transformation results are returned in the ",(0,i.jsx)(n.code,{children:"extensions"})," section"]}),"\n",(0,i.jsx)(n.li,{children:"Supports hierarchical transformations through chaining"}),"\n",(0,i.jsx)(n.li,{children:"Best for inline transformations within complex queries"}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"2-rest-endpoint-jq-query",children:["2. REST Endpoint ",(0,i.jsx)(n.code,{children:"/jq-query"})]}),"\n",(0,i.jsx)(n.p,{children:"A dedicated REST endpoint for executing GraphQL queries with JQ transformation."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Key characteristics"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["JQ receives the complete GraphQL response (including ",(0,i.jsx)(n.code,{children:"data"}),", ",(0,i.jsx)(n.code,{children:"extensions"}),", and ",(0,i.jsx)(n.code,{children:"errors"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Transformation result is returned directly as the HTTP response"}),"\n",(0,i.jsx)(n.li,{children:"Best for standalone queries with transformations"}),"\n",(0,i.jsx)(n.li,{children:"Easier error handling and debugging"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"built-in-graphql-jq-query",children:"Built-in GraphQL jq() Query"}),"\n",(0,i.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"jq()"})," query is defined as a system query in hugr:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"type Query @system {\n  jq(\n    query: String!\n    include_origin: Boolean = false\n  ): Query @system\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"query"})," (String!, required): The JQ expression to apply to the GraphQL result"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"include_origin"})," (Boolean, default: false): When true, includes the original result alongside the transformation"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"basic-transformation-examples",children:"Basic Transformation Examples"}),"\n",(0,i.jsx)(n.h4,{id:"example-1-simple-field-extraction",children:"Example 1: Simple Field Extraction"}),"\n",(0,i.jsx)(n.p,{children:"Extract specific fields from a complex result:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".users | map({id, name})") {\n    users {\n      id\n      name\n      email\n      created_at\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": null\n  },\n  "extensions": {\n    "jq": {\n      "jq": [\n        {"id": 1, "name": "Alice"},\n        {"id": 2, "name": "Bob"}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-2-filtering-arrays",children:"Example 2: Filtering Arrays"}),"\n",(0,i.jsx)(n.p,{children:"Filter results based on conditions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".orders | map(select(.status == \\"completed\\"))") {\n    orders {\n      id\n      status\n      total\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-3-data-restructuring",children:"Example 3: Data Restructuring"}),"\n",(0,i.jsx)(n.p,{children:"Transform nested structures into flat format:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".customers | map({customer_name: .name, order_count: .orders | length})") {\n    customers {\n      id\n      name\n      orders {\n        id\n        total\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"working-with-include_origin",children:"Working with include_origin"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"include_origin"})," parameter controls whether the original query results are included in the ",(0,i.jsx)(n.code,{children:"data"})," section within the ",(0,i.jsx)(n.code,{children:"jq"})," query response:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"include_origin: false"})," (default): The ",(0,i.jsx)(n.code,{children:"data.jq"})," section is null/empty"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"include_origin: true"}),": Original query results are included in ",(0,i.jsx)(n.code,{children:"data.jq.<field>"})]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example-with-include_origin-true",children:"Example with include_origin: true"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".users | length", include_origin: true) {\n    users {\n      id\n      name\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": {\n      "users": [\n        {"id": 1, "name": "Alice"},\n        {"id": 2, "name": "Bob"}\n      ]\n    }\n  },\n  "extensions": {\n    "jq": {\n      "jq": 2\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-with-include_origin-false",children:"Example with include_origin: false"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".users | length", include_origin: false) {\n    users {\n      id\n      name\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "jq": {}\n  },\n  "extensions": {\n    "jq": {\n      "jq": 2\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"using-aliases",children:"Using Aliases"}),"\n",(0,i.jsxs)(n.p,{children:["You can use GraphQL aliases to name your jq transformations. The transformation result will be available at ",(0,i.jsx)(n.code,{children:"extensions.jq.<alias>"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  userCount: jq(query: ".users | length") {\n    users {\n      id\n      name\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "userCount": null\n  },\n  "extensions": {\n    "jq": {\n      "userCount": 2\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"For transformations returning a single object (not an array), the result will be an object:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  stats: jq(query: "{total: .users | length, active: .users | map(select(.active)) | length}") {\n    users {\n      id\n      name\n      active\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "stats": null\n  },\n  "extensions": {\n    "jq": {\n      "stats": {\n        "total": 2,\n        "active": 1\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"where-results-are-located",children:"Where Results are Located"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Original query results"}),": ",(0,i.jsx)(n.code,{children:"data.jq"})," (or ",(0,i.jsx)(n.code,{children:"data.<alias>"}),") is ",(0,i.jsx)(n.code,{children:"null"})," when ",(0,i.jsx)(n.code,{children:"include_origin: false"})," (default)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Original query results"}),": In ",(0,i.jsx)(n.code,{children:"data.jq.<field>"})," (or ",(0,i.jsx)(n.code,{children:"data.<alias>.<field>"}),") when ",(0,i.jsx)(n.code,{children:"include_origin: true"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Transformation result"}),": Always in ",(0,i.jsx)(n.code,{children:"extensions.jq.jq"})," (or ",(0,i.jsx)(n.code,{children:"extensions.jq.<alias>"})," when using aliases)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Result format"}),": Array or object depending on the JQ expression output"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"hierarchical-transformations",children:"Hierarchical Transformations"}),"\n",(0,i.jsxs)(n.p,{children:["You can chain multiple ",(0,i.jsx)(n.code,{children:"jq()"})," queries for complex, multi-step transformations:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".result | group_by(.category)") {\n    result: jq(query: ".products | map({id, name, category, price})") {\n      products {\n        id\n        name\n        category\n        price\n        description\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This example:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"First transforms products to extract only specific fields"}),"\n",(0,i.jsx)(n.li,{children:"Then groups the results by category"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rest-endpoint-jq-query",children:"REST Endpoint /jq-query"}),"\n",(0,i.jsx)(n.h3,{id:"request-format",children:"Request Format"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"POST /jq-query"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Headers"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Content-Type: application/json\nAuthorization: Bearer <token>  # if authentication is required\n\n# Optional caching headers (when caching is configured)\nX-Hugr-Cache: <ttl_seconds or duration>\nX-Hugr-Cache-Key: <custom_cache_key>\nX-Hugr-Cache-Tags: <tag1,tag2,tag3>\nX-Hugr-Cache-Invalidate: <true|false>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"caching-headers",children:"Caching Headers"}),"\n",(0,i.jsxs)(n.p,{children:["When hugr has caching configured (see ",(0,i.jsx)(n.a,{href:"/docs/deployment/caching",children:"Caching Configuration"}),"), you can control caching behavior using the following HTTP headers:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Header"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"X-Hugr-Cache"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsxs)(n.td,{children:["Cache TTL (time-to-live). Can be specified as seconds (e.g., ",(0,i.jsx)(n.code,{children:"300"}),") or duration format (e.g., ",(0,i.jsx)(n.code,{children:"5m"}),", ",(0,i.jsx)(n.code,{children:"1h"}),", ",(0,i.jsx)(n.code,{children:"30s"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"X-Hugr-Cache-Key"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"Custom cache key. If empty, the key is computed as a hash of the request body. The user's role is automatically appended to the key."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"X-Hugr-Cache-Tags"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsxs)(n.td,{children:["Comma-separated list of cache tags for grouped invalidation (e.g., ",(0,i.jsx)(n.code,{children:"users,reports,dashboard"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"X-Hugr-Cache-Invalidate"})}),(0,i.jsx)(n.td,{children:"Boolean"}),(0,i.jsxs)(n.td,{children:["If ",(0,i.jsx)(n.code,{children:"true"}),", forces query re-execution and invalidates the cache entry for this key (+ role)."]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cache Key Format"}),": ",(0,i.jsx)(n.code,{children:"<custom_key or hash(request_body)>:<user_role>"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "jq": "<jq_expression>",\n  "query": {\n    "query": "<graphql_query>",\n    "variables": {\n      "var1": "value1"\n    },\n    "operationName": "MyQuery"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"response-format",children:"Response Format"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Success Response"}),":\nThe JQ transformation result is returned directly as the HTTP response body."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  // JQ transformation result\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Error message description"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"http-status-codes",children:"HTTP Status Codes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"200 OK"}),": Successful transformation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"400 Bad Request"}),": Invalid JQ expression or GraphQL query"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"401 Unauthorized"}),": Missing or invalid authentication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"500 Internal Server Error"}),": Server-side error during processing"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"curl-usage-examples",children:"curl Usage Examples"}),"\n",(0,i.jsx)(n.h4,{id:"example-1-basic-transformation",children:"Example 1: Basic Transformation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jq": ".data.users | map({id, name})",\n    "query": {\n      "query": "{ users { id name email } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-2-with-variables",children:"Example 2: With Variables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jq": ".data.users | map(select(.country == $country))",\n    "query": {\n      "query": "query($country: String!) { users { id name country } }",\n      "variables": {\n        "country": "USA"\n      }\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-3-error-handling",children:"Example 3: Error Handling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jq": "if .errors then {error: .errors} else .data end",\n    "query": {\n      "query": "{ users { id name } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-4-with-caching-5-minute-ttl",children:"Example 4: With Caching (5 minute TTL)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -H "X-Hugr-Cache: 5m" \\\n  -H "X-Hugr-Cache-Tags: users,reports" \\\n  -d \'{\n    "jq": ".data.users_aggregation",\n    "query": {\n      "query": "{ users_aggregation { _rows_count total_sales { sum } } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"First request"}),": Executes query and caches result for 5 minutes\n",(0,i.jsx)(n.strong,{children:"Subsequent requests"})," (within 5 min): Returns cached result immediately"]}),"\n",(0,i.jsx)(n.h4,{id:"example-5-custom-cache-key",children:"Example 5: Custom Cache Key"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -H "X-Hugr-Cache: 300" \\\n  -H "X-Hugr-Cache-Key: dashboard:daily-stats" \\\n  -H "X-Hugr-Cache-Tags: dashboard,analytics" \\\n  -d \'{\n    "jq": ".data | {total_users: .users_aggregation._rows_count, total_orders: .orders_aggregation._rows_count}",\n    "query": {\n      "query": "{ users_aggregation { _rows_count } orders_aggregation { _rows_count } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cache Key"}),": ",(0,i.jsx)(n.code,{children:"dashboard:daily-stats:<user_role>"}),"\n",(0,i.jsx)(n.strong,{children:"TTL"}),": 300 seconds (5 minutes)\n",(0,i.jsx)(n.strong,{children:"Tags"}),": Can be invalidated by tag ",(0,i.jsx)(n.code,{children:"dashboard"})," or ",(0,i.jsx)(n.code,{children:"analytics"})]}),"\n",(0,i.jsx)(n.h4,{id:"example-6-cache-invalidation",children:"Example 6: Cache Invalidation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Invalidate and refresh the cache\ncurl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -H "X-Hugr-Cache: 5m" \\\n  -H "X-Hugr-Cache-Key: dashboard:daily-stats" \\\n  -H "X-Hugr-Cache-Invalidate: true" \\\n  -d \'{\n    "jq": ".data | {total_users: .users_aggregation._rows_count, total_orders: .orders_aggregation._rows_count}",\n    "query": {\n      "query": "{ users_aggregation { _rows_count } orders_aggregation { _rows_count } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.p,{children:"This request:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Invalidates the existing cache entry for key ",(0,i.jsx)(n.code,{children:"dashboard:daily-stats:<role>"})]}),"\n",(0,i.jsx)(n.li,{children:"Executes the query"}),"\n",(0,i.jsx)(n.li,{children:"Stores the new result with 5-minute TTL"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example-7-duration-format",children:"Example 7: Duration Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -H "X-Hugr-Cache: 1h" \\\n  -d \'{\n    "jq": ".data.products | group_by(.category) | map({category: .[0].category, count: length})",\n    "query": {\n      "query": "{ products { id name category } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.p,{children:"Supported duration formats:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"30s"})," - 30 seconds"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"5m"})," - 5 minutes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"1h"})," - 1 hour"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"24h"})," - 24 hours"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"300"})," - 300 seconds (numeric value)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"differences-from-built-in-jq",children:"Differences from Built-in jq()"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"Built-in jq()"}),(0,i.jsx)(n.th,{children:"/jq-query Endpoint"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"JQ Input"})}),(0,i.jsxs)(n.td,{children:["Only ",(0,i.jsx)(n.code,{children:"data"})," field"]}),(0,i.jsx)(n.td,{children:"Complete GraphQL response"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Result Location"})}),(0,i.jsxs)(n.td,{children:["In ",(0,i.jsx)(n.code,{children:"extensions.jq"})]}),(0,i.jsx)(n.td,{children:"Direct HTTP response"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Original Data"})}),(0,i.jsxs)(n.td,{children:["In ",(0,i.jsx)(n.code,{children:"data"})," field"]}),(0,i.jsx)(n.td,{children:"Not preserved (unless in JQ)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Error Access"})}),(0,i.jsx)(n.td,{children:"Not available to JQ"}),(0,i.jsxs)(n.td,{children:["Available in ",(0,i.jsx)(n.code,{children:".errors"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Use Case"})}),(0,i.jsx)(n.td,{children:"Inline transformations"}),(0,i.jsx)(n.td,{children:"Standalone transformations"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Chaining"})}),(0,i.jsx)(n.td,{children:"Easy (nested jq queries)"}),(0,i.jsx)(n.td,{children:"Manual (multiple requests)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"working-with-variables",children:"Working with Variables"}),"\n",(0,i.jsx)(n.h3,{id:"passing-variables-in-graphql",children:"Passing Variables in GraphQL"}),"\n",(0,i.jsx)(n.p,{children:"Variables are defined in the GraphQL query and passed separately:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"query GetUsersByCountry($country: String!, $minAge: Int!) {\n  users(filter: { country: { eq: $country }, age: { gte: $minAge } }) {\n    id\n    name\n    age\n    country\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Variables"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "country": "USA",\n  "minAge": 18\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"using-variables-in-jq-expressions",children:"Using Variables in JQ Expressions"}),"\n",(0,i.jsxs)(n.p,{children:["Variables from GraphQL queries are accessible in JQ expressions using the ",(0,i.jsx)(n.code,{children:"$var_name"})," syntax:"]}),"\n",(0,i.jsx)(n.h4,{id:"example-1-filter-using-variable",children:"Example 1: Filter Using Variable"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".users | map(select(.age >= $minAge))") {\n    users {\n      id\n      name\n      age\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"With variables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "minAge": 21\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-2-dynamic-field-selection",children:"Example 2: Dynamic Field Selection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jq": ".data.products | map(select(.category == $category))",\n    "query": {\n      "query": "query($category: String!) { products { id name category price } }",\n      "variables": {\n        "category": "electronics"\n      }\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-3-conditional-transformation",children:"Example 3: Conditional Transformation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: "if $includeDetails then .users else .users | map({id, name}) end") {\n    users {\n      id\n      name\n      email\n      phone\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Variables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "includeDetails": false\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"variable-scope",children:"Variable Scope"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Variables are available in ",(0,i.jsx)(n.strong,{children:"all JQ expressions"})," within the query"]}),"\n",(0,i.jsxs)(n.li,{children:["Variable names must match GraphQL variable names (without the ",(0,i.jsx)(n.code,{children:"$"})," in GraphQL, with ",(0,i.jsx)(n.code,{children:"$"})," in JQ)"]}),"\n",(0,i.jsx)(n.li,{children:"Variables maintain their types (strings, numbers, booleans, objects, arrays)"}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"_jq-variable-input-transformations",children:[(0,i.jsx)(n.code,{children:"_jq"})," Variable Input Transformations"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"_jq"})," key is a special reserved key in GraphQL request variables that allows you to dynamically compute or transform variables before the GraphQL query is parsed. Its value is a string containing a JQ expression that produces an object, which is then merged into the request variables."]}),"\n",(0,i.jsx)(n.p,{children:"This is useful when you need variables derived from the current time, authentication context, or other dynamic values that can't be hardcoded by the client."}),"\n",(0,i.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["The client includes an ",(0,i.jsx)(n.code,{children:"_jq"})," key in the GraphQL request ",(0,i.jsx)(n.code,{children:"variables"})," with a JQ expression string as the value"]}),"\n",(0,i.jsxs)(n.li,{children:["The engine evaluates the JQ expression (all ",(0,i.jsx)(n.a,{href:"/docs/graphql/jq-custom-functions",children:"custom JQ functions"})," are available)"]}),"\n",(0,i.jsx)(n.li,{children:"The result \u2014 which must be an object \u2014 is merged with the input variables"}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"_jq"})," key itself is removed from the variables"]}),"\n",(0,i.jsx)(n.li,{children:"The GraphQL query is parsed with the merged variables"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"merge-behavior",children:"Merge Behavior"}),"\n",(0,i.jsx)(n.p,{children:"When the JQ expression result is merged with the existing variables:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Override"}),": Keys present in the JQ result ",(0,i.jsx)(n.strong,{children:"override"})," existing variables with the same name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Preserve"}),": Existing variables not present in the JQ result are ",(0,i.jsx)(n.strong,{children:"preserved"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add"}),": New keys from the JQ result are ",(0,i.jsx)(n.strong,{children:"added"})," to the variables"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"})," \u2014 before and after merge:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// Input variables (from client)\n{\n  "_jq": "{ from: (utcTime | roundTime(\\"day\\")), limit: 100 }",\n  "limit": 50,\n  "category": "sensors"\n}\n\n// After _jq processing:\n{\n  "from": "2024-06-15T00:00:00Z",   // added by _jq\n  "limit": 100,                       // overridden by _jq (was 50)\n  "category": "sensors"               // preserved (not in _jq result)\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h4,{id:"dynamic-date-range",children:"Dynamic Date Range"}),"\n",(0,i.jsx)(n.p,{children:"Compute a date range for a time-series query using the current UTC time:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"query GetReadings($from: String!, $to: String!, $sensorId: ID!) {\n  readings(where: { timestamp: { _gte: $from, _lt: $to }, sensor_id: { _eq: $sensorId } }) {\n    timestamp\n    value\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Variables"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "_jq": "{ from: (utcTime | roundTime(\\"day\\") | timeAdd(\\"-7d\\")), to: (utcTime | roundTime(\\"day\\")) }",\n  "sensorId": "sensor-42"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Effective variables"})," (after ",(0,i.jsx)(n.code,{children:"_jq"})," processing):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "from": "2024-06-08T00:00:00Z",\n  "to": "2024-06-15T00:00:00Z",\n  "sensorId": "sensor-42"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"_jq"})," expression computes a 7-day window ending at the start of today, while ",(0,i.jsx)(n.code,{children:"sensorId"})," is passed through unchanged."]}),"\n",(0,i.jsx)(n.h4,{id:"conditional-defaults",children:"Conditional Defaults"}),"\n",(0,i.jsx)(n.p,{children:"Set default values that the client can optionally override:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"query GetEvents($from: String!, $limit: Int!) {\n  events(where: { created_at: { _gte: $from } }, limit: $limit) {\n    id\n    name\n    created_at\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Variables"})," (client provides only ",(0,i.jsx)(n.code,{children:"limit"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "_jq": "{ from: (utcTime | roundTime(\\"month\\")) }",\n  "limit": 25\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Effective variables"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "from": "2024-06-01T00:00:00Z",\n  "limit": 25\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"_jq"})," expression provides a default ",(0,i.jsx)(n.code,{children:"from"})," value (start of current month), while the client-supplied ",(0,i.jsx)(n.code,{children:"limit"})," is preserved."]}),"\n",(0,i.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["All ",(0,i.jsx)(n.a,{href:"/docs/graphql/jq-custom-functions",children:"custom JQ functions"})," \u2014 including time functions (",(0,i.jsx)(n.code,{children:"localTime"}),", ",(0,i.jsx)(n.code,{children:"utcTime"}),", ",(0,i.jsx)(n.code,{children:"roundTime"}),", ",(0,i.jsx)(n.code,{children:"timeAdd"}),", ",(0,i.jsx)(n.code,{children:"datePart"}),", ",(0,i.jsx)(n.code,{children:"unixTime"}),"), ",(0,i.jsx)(n.code,{children:"queryHugr"}),", and ",(0,i.jsx)(n.code,{children:"authInfo"})," \u2014 are available in ",(0,i.jsx)(n.code,{children:"_jq"})," expressions."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"_jq"})," key is ",(0,i.jsx)(n.strong,{children:"not"})," a GraphQL variable \u2014 it is removed before the query is parsed and will not be visible to resolvers"]}),"\n",(0,i.jsx)(n.li,{children:"If the JQ expression returns a non-object value or contains a syntax error, the request will fail with an error"}),"\n",(0,i.jsxs)(n.li,{children:["The JQ expression in ",(0,i.jsx)(n.code,{children:"_jq"})," does not receive any input (",(0,i.jsx)(n.code,{children:"."})," is ",(0,i.jsx)(n.code,{children:"null"}),") \u2014 use zero-argument functions like ",(0,i.jsx)(n.code,{children:"utcTime"})," or ",(0,i.jsx)(n.code,{children:"authInfo"})," to produce values"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"queryhugr-function-jq-only",children:"queryHugr() Function (JQ-only)"}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"queryHugr()"})," is a ",(0,i.jsx)(n.strong,{children:"special function available ONLY inside JQ expressions"}),". It is ",(0,i.jsx)(n.strong,{children:"NOT a GraphQL query or function"}),". You cannot call it directly from GraphQL - only from within JQ transformations."]})}),"\n",(0,i.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"queryHugr()"})," function allows you to execute GraphQL queries from within JQ transformations. This enables powerful data enrichment and cross-source aggregation scenarios."]}),"\n",(0,i.jsx)(n.h3,{id:"syntax-1",children:"Syntax"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:"queryHugr(graphql_query_text)\nqueryHugr(graphql_query_text, variables_object)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"graphql_query_text"})," (string): The GraphQL query to execute"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"variables_object"})," (object, optional): Variables to pass to the GraphQL query"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns"}),": The GraphQL query result (the complete response including ",(0,i.jsx)(n.code,{children:"data"}),", ",(0,i.jsx)(n.code,{children:"extensions"}),", and ",(0,i.jsx)(n.code,{children:"errors"}),")"]}),"\n",(0,i.jsx)(n.h3,{id:"basic-examples",children:"Basic Examples"}),"\n",(0,i.jsx)(n.h4,{id:"example-1-enrich-data-with-additional-query",children:"Example 1: Enrich Data with Additional Query"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".users | map(. + {order_count: (queryHugr(\\"{ orders(filter: {user_id: {eq: \\" + (.id | tostring) + \\"}}) { id } }\\").data.orders | length)})") {\n    users {\n      id\n      name\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This enriches each user with their order count by executing a separate query for each user."}),"\n",(0,i.jsx)(n.h4,{id:"example-2-combining-data-from-multiple-sources",children:"Example 2: Combining Data from Multiple Sources"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jq": "{users: .data.users, total_orders: queryHugr(\\"{orders_aggregation { _rows_count }}\\").data.orders_aggregation._rows_count}",\n    "query": {\n      "query": "{ users { id name } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.p,{children:"This combines user data with a global order count from a separate aggregation query."}),"\n",(0,i.jsx)(n.h3,{id:"using-with-variables",children:"Using with Variables"}),"\n",(0,i.jsx)(n.h4,{id:"example-3-query-with-variables",children:"Example 3: Query with Variables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".products | map(. + {reviews: queryHugr(\\"query($pid: Int!) { reviews(filter: {product_id: {eq: $pid}}) { rating comment } }\\", {pid: .id}).data.reviews})") {\n    products {\n      id\n      name\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This enriches each product with its reviews using a parameterized query."}),"\n",(0,i.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(n.h4,{id:"1-data-enrichment",children:"1. Data Enrichment"}),"\n",(0,i.jsx)(n.p,{children:"Add related data from other tables or sources:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'.customers | map(\n  . + {\n    recent_orders: queryHugr(\n      "query($cid: Int!) { orders(filter: {customer_id: {eq: $cid}}, limit: 5, order_by: [{field: \\"created_at\\", direction: DESC}]) { id total created_at } }",\n      {cid: .id}\n    ).data.orders\n  }\n)\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-cross-source-aggregation",children:"2. Cross-Source Aggregation"}),"\n",(0,i.jsx)(n.p,{children:"Combine data from different data sources:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'{\n  database_stats: queryHugr("{ users_aggregation { _rows_count } }").data.users_aggregation,\n  api_stats: queryHugr("{ function { external_api { stats { total_count } } } }").data.function.external_api.stats\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"3-conditional-data-loading",children:"3. Conditional Data Loading"}),"\n",(0,i.jsx)(n.p,{children:"Load additional data based on conditions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'.orders | map(\n  if .status == "pending" then\n    . + {customer_details: queryHugr("query($id: Int!) { customers_by_pk(id: $id) { name email phone } }", {id: .customer_id}).data.customers_by_pk}\n  else\n    .\n  end\n)\n'})}),"\n",(0,i.jsx)(n.h4,{id:"4-recursive-hierarchies",children:"4. Recursive Hierarchies"}),"\n",(0,i.jsx)(n.p,{children:"Build hierarchical structures:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'.categories | map(\n  . + {\n    products: queryHugr(\n      "query($cat: String!) { products(filter: {category: {eq: $cat}}) { id name price } }",\n      {cat: .name}\n    ).data.products\n  }\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"complex-example-e-commerce-order-dashboard",children:"Complex Example: E-commerce Order Dashboard"}),"\n",(0,i.jsxs)(n.p,{children:["This comprehensive example demonstrates how to use ",(0,i.jsx)(n.code,{children:"queryHugr()"})," to build a rich order dashboard by combining data from multiple tables."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": You have orders data and need to enrich each order with:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Customer details (name, email, tier)"}),"\n",(0,i.jsx)(n.li,{children:"Product information for each order item"}),"\n",(0,i.jsx)(n.li,{children:"Delivery status from a logistics service"}),"\n",(0,i.jsx)(n.li,{children:"Payment information"}),"\n",(0,i.jsx)(n.li,{children:"Calculate totals and statistics"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  enrichedOrders: jq(query: "\n    .orders | map(\n      . as $order |\n      {\n        # Original order data\n        order_id: .id,\n        order_date: .created_at,\n        status: .status,\n\n        # Enrich with customer details\n        customer: queryHugr(\n          \\"query($cid: Int!) { customers_by_pk(id: $cid) { id name email tier phone } }\\",\n          {cid: .customer_id}\n        ).data.customers_by_pk,\n\n        # Get order items with product details\n        items: queryHugr(\n          \\"query($oid: Int!) { order_items(filter: {order_id: {eq: $oid}}) { id product_id quantity unit_price } }\\",\n          {oid: .id}\n        ).data.order_items | map(\n          . as $item |\n          . + {\n            product: queryHugr(\n              \\"query($pid: Int!) { products_by_pk(id: $pid) { id name category image_url } }\\",\n              {pid: $item.product_id}\n            ).data.products_by_pk,\n            subtotal: (.quantity * .unit_price)\n          }\n        ),\n\n        # Get payment information\n        payment: queryHugr(\n          \\"query($oid: Int!) { payments(filter: {order_id: {eq: $oid}}, limit: 1) { method status transaction_id } }\\",\n          {oid: .id}\n        ).data.payments[0],\n\n        # Get delivery status\n        delivery: queryHugr(\n          \\"query($oid: Int!) { deliveries(filter: {order_id: {eq: $oid}}, limit: 1) { status estimated_delivery tracking_number } }\\",\n          {oid: .id}\n        ).data.deliveries[0],\n\n        # Get customer\'s order statistics\n        customer_stats: queryHugr(\n          \\"query($cid: Int!) { orders_aggregation(filter: {customer_id: {eq: $cid}, status: {eq: \\\\\\"completed\\\\\\"}}) { _rows_count total { sum } } }\\",\n          {cid: .customer_id}\n        ).data.orders_aggregation,\n\n        # Calculate totals\n        items_count: (\n          queryHugr(\n            \\"query($oid: Int!) { order_items(filter: {order_id: {eq: $oid}}) { quantity } }\\",\n            {oid: .id}\n          ).data.order_items | map(.quantity) | add\n        ),\n\n        order_total: (\n          queryHugr(\n            \\"query($oid: Int!) { order_items(filter: {order_id: {eq: $oid}}) { quantity unit_price } }\\",\n            {oid: .id}\n          ).data.order_items | map(.quantity * .unit_price) | add\n        )\n      }\n    )\n  ", include_origin: false) {\n    orders(\n      filter: { created_at: { gte: "2024-01-01" } }\n      order_by: [{ field: "created_at", direction: DESC }]\n      limit: 10\n    ) {\n      id\n      customer_id\n      status\n      created_at\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response Structure"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "enrichedOrders": {}\n  },\n  "extensions": {\n    "jq": {\n      "enrichedOrders": [\n        {\n          "order_id": 1001,\n          "order_date": "2024-01-15T10:30:00Z",\n          "status": "shipped",\n          "customer": {\n            "id": 42,\n            "name": "Alice Johnson",\n            "email": "alice@example.com",\n            "tier": "gold",\n            "phone": "+1-555-0123"\n          },\n          "items": [\n            {\n              "id": 5001,\n              "product_id": 200,\n              "quantity": 2,\n              "unit_price": 29.99,\n              "subtotal": 59.98,\n              "product": {\n                "id": 200,\n                "name": "Wireless Mouse",\n                "category": "electronics",\n                "image_url": "https://example.com/images/mouse.jpg"\n              }\n            },\n            {\n              "id": 5002,\n              "product_id": 201,\n              "quantity": 1,\n              "unit_price": 79.99,\n              "subtotal": 79.99,\n              "product": {\n                "id": 201,\n                "name": "Mechanical Keyboard",\n                "category": "electronics",\n                "image_url": "https://example.com/images/keyboard.jpg"\n              }\n            }\n          ],\n          "payment": {\n            "method": "credit_card",\n            "status": "completed",\n            "transaction_id": "txn_abc123"\n          },\n          "delivery": {\n            "status": "in_transit",\n            "estimated_delivery": "2024-01-18",\n            "tracking_number": "TRACK123456"\n          },\n          "customer_stats": {\n            "_rows_count": 15,\n            "total": {\n              "sum": 1250.50\n            }\n          },\n          "items_count": 3,\n          "order_total": 139.97\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What This Example Demonstrates"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multiple Nested Queries"}),": Each order triggers 6-7 separate queries to enrich data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Variable Passing"}),": Uses order and customer IDs to fetch related data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nested queryHugr() Calls"}),": Inside ",(0,i.jsx)(n.code,{children:".items"}),", each item fetches its product details"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Aggregations"}),": Calculates customer lifetime value and order statistics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Combination"}),": Merges data from orders, customers, products, payments, and deliveries tables"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Computed Fields"}),": Calculates subtotals, item counts, and order totals"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-world Structure"}),": Creates a complete dashboard-ready data structure"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Performance Note"}),": This example executes many queries (approximately 10 + 10\xd76 = 70 queries for 10 orders). For production use, consider:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Limiting the number of orders processed"}),"\n",(0,i.jsx)(n.li,{children:"Caching frequently accessed data"}),"\n",(0,i.jsx)(n.li,{children:"Using GraphQL relations in the main query where possible"}),"\n",(0,i.jsx)(n.li,{children:"Implementing pagination"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"optimized-alternative-using-graphql-relations",children:"Optimized Alternative: Using GraphQL Relations"}),"\n",(0,i.jsxs)(n.p,{children:["For comparison, here's a more efficient approach using GraphQL relations instead of ",(0,i.jsx)(n.code,{children:"queryHugr()"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(\n    filter: { created_at: { gte: "2024-01-01" } }\n    order_by: [{ field: "created_at", direction: DESC }]\n    limit: 10\n  ) {\n    id\n    status\n    created_at\n    customer {\n      id\n      name\n      email\n      tier\n      phone\n    }\n    items {\n      id\n      quantity\n      unit_price\n      product {\n        id\n        name\n        category\n        image_url\n      }\n    }\n    payment {\n      method\n      status\n      transaction_id\n    }\n    delivery {\n      status\n      estimated_delivery\n      tracking_number\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"When to Use queryHugr() vs Relations"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Relations"}),": When relationships are predefined in schema and data sources support joins"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use queryHugr()"}),": When you need dynamic queries, cross-source data, or complex conditional logic not supported by standard GraphQL"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-it-differs-from-regular-graphql-queries",children:"How It Differs from Regular GraphQL Queries"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Aspect"}),(0,i.jsx)(n.th,{children:"Regular GraphQL"}),(0,i.jsx)(n.th,{children:"queryHugr() in JQ"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Context"})}),(0,i.jsx)(n.td,{children:"Client request"}),(0,i.jsx)(n.td,{children:"JQ transformation"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Execution"})}),(0,i.jsx)(n.td,{children:"Single query plan"}),(0,i.jsx)(n.td,{children:"Dynamic, per-item execution"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Variables"})}),(0,i.jsx)(n.td,{children:"Query-level"}),(0,i.jsx)(n.td,{children:"Can use JQ variables and data"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Performance"})}),(0,i.jsx)(n.td,{children:"Optimized by query planner"}),(0,i.jsx)(n.td,{children:"May execute multiple queries"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Use Case"})}),(0,i.jsx)(n.td,{children:"Primary data fetching"}),(0,i.jsx)(n.td,{children:"Data enrichment, aggregation"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,i.jsxs)(n.admonition,{title:"Performance Warning",type:"caution",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"queryHugr()"})," executes a separate GraphQL query for each invocation. Using it inside ",(0,i.jsx)(n.code,{children:"map()"})," or loops can result in many queries (N+1 problem)."]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best Practices"}),":"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use for small datasets or when necessary"}),"\n",(0,i.jsx)(n.li,{children:"Consider pre-joining data in the main query when possible"}),"\n",(0,i.jsxs)(n.li,{children:["Cache results when appropriate using ",(0,i.jsx)(n.code,{children:"@cache"})," directive"]}),"\n",(0,i.jsx)(n.li,{children:"Use aggregation queries to minimize the number of calls"}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"caching-queryhugr-results",children:"Caching queryHugr() Results"}),"\n",(0,i.jsxs)(n.p,{children:["When hugr has caching configured (see ",(0,i.jsx)(n.a,{href:"/docs/deployment/caching",children:"Caching Configuration"}),"), you can use the ",(0,i.jsx)(n.code,{children:"@cache"})," directive inside ",(0,i.jsx)(n.code,{children:"queryHugr()"})," queries to cache results and avoid redundant database queries."]}),"\n",(0,i.jsx)(n.h4,{id:"using-cache-directive-in-queryhugr",children:"Using @cache Directive in queryHugr()"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"@cache"})," directive can be applied to any field within a ",(0,i.jsx)(n.code,{children:"queryHugr()"})," query to cache the results:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: "\n    queryHugr(\\"\n      query($start: Timestamp!, $end: Timestamp!) {\n        order_info: orders_bucket_aggregation(\n          filter: { order_time: { gte: $start, lte: $end } }\n        ) @cache {\n          key { customer_id }\n          aggregations {\n            total { sum }\n            _rows_count\n          }\n        }\n      }\\",\n      { start: $start, end: $end }\n    ).data.order_info as $orders |\n    .customers | map(\n      . + {\n        orders: ($orders | map(select(.key.customer_id == .id)))\n      }\n    )\n  ") {\n    customers {\n      id\n      name\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"benefits-of-caching",children:"Benefits of Caching"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Avoid Repeated Queries"}),": The same aggregation query won't be executed multiple times"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Improved Performance"}),": Cached results are served from memory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reduced Database Load"}),": Less pressure on underlying data sources"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cost Optimization"}),": Fewer queries to external APIs or databases"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"cache-key-generation",children:"Cache Key Generation"}),"\n",(0,i.jsx)(n.p,{children:"The cache is automatically keyed by:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Query text and variables"}),"\n",(0,i.jsx)(n.li,{children:"User role/permissions"}),"\n",(0,i.jsx)(n.li,{children:"Data source configuration"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example-caching-customer-statistics",children:"Example: Caching Customer Statistics"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  enrichedCustomers: jq(query: "\n    # First, get aggregated statistics with caching\n    queryHugr(\\"\n      query {\n        customer_stats: customers_bucket_aggregation @cache {\n          key { tier }\n          aggregations {\n            _rows_count\n            total_spent { sum avg }\n          }\n        }\n      }\n    \\").data.customer_stats as $stats |\n\n    # Then enrich each customer with their tier stats\n    .customers | map(\n      . as $customer |\n      . + {\n        tier_stats: ($stats | map(select(.key.tier == $customer.tier)) | .[0])\n      }\n    )\n  ", include_origin: false) {\n    customers {\n      id\n      name\n      tier\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Executes the aggregation query ",(0,i.jsx)(n.strong,{children:"once"})," (cached)"]}),"\n",(0,i.jsx)(n.li,{children:"Reuses cached results for all customers"}),"\n",(0,i.jsx)(n.li,{children:"Significantly improves performance for large datasets"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"when-to-use-caching-in-queryhugr",children:"When to Use Caching in queryHugr()"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use caching when"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Query results don't change frequently"}),"\n",(0,i.jsx)(n.li,{children:"Same query is executed multiple times"}),"\n",(0,i.jsx)(n.li,{children:"Aggregations are expensive to compute"}),"\n",(0,i.jsx)(n.li,{children:"Working with large datasets"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Avoid caching when"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Data must be real-time"}),"\n",(0,i.jsx)(n.li,{children:"Each query uses different parameters"}),"\n",(0,i.jsx)(n.li,{children:"Results are user-specific and shouldn't be shared"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,i.jsx)(n.h3,{id:"example-1-filtering-and-transforming-arrays",children:"Example 1: Filtering and Transforming Arrays"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": Get only active products with price above $100, showing only essential fields."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".products | map(select(.active == true and .price > 100)) | map({id, name, price})") {\n    products {\n      id\n      name\n      price\n      active\n      description\n      category\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-2-grouping-and-aggregation",children:"Example 2: Grouping and Aggregation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": Group orders by status and calculate totals."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".orders | group_by(.status) | map({status: .[0].status, count: length, total: map(.amount) | add})") {\n    orders {\n      id\n      status\n      amount\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-3-modifying-response-structure",children:"Example 3: Modifying Response Structure"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": Convert nested structure to flat format for easier consumption."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Original Structure"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "customers": [\n    {\n      "id": 1,\n      "name": "Alice",\n      "orders": [\n        {"id": 101, "total": 50},\n        {"id": 102, "total": 75}\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".customers | map(.orders[] | {customer_id: .id, customer_name: .name, order_id: .id, order_total: .total}) | flatten") {\n    customers {\n      id\n      name\n      orders {\n        id\n        total\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Result"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {"customer_id": 1, "customer_name": "Alice", "order_id": 101, "order_total": 50},\n  {"customer_id": 1, "customer_name": "Alice", "order_id": 102, "order_total": 75}\n]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-4-combining-data-from-multiple-queries",children:"Example 4: Combining Data from Multiple Queries"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": Combine user data with their total spending from a separate aggregation."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jq": ".data.users | map(. + {total_spent: queryHugr(\\"query($uid: Int!) { orders(filter: {user_id: {eq: $uid}}) { total } }\\", {uid: .id}).data.orders | map(.total) | add})",\n    "query": {\n      "query": "{ users { id name email } }"\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-5-conditional-logic",children:"Example 5: Conditional Logic"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": Apply different transformations based on field values."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".products | map(if .stock > 0 then {id, name, status: \\"available\\", price} else {id, name, status: \\"out_of_stock\\"} end)") {\n    products {\n      id\n      name\n      price\n      stock\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-6-working-with-nullable-values",children:"Example 6: Working with Nullable Values"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": Handle null values gracefully in transformations."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".users | map({id, name, email: (.email // \\"no-email@example.com\\"), phone: (.phone // \\"N/A\\")})") {\n    users {\n      id\n      name\n      email\n      phone\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-7-complex-transformation-for-bi-dashboard",children:"Example 7: Complex Transformation for BI Dashboard"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": Prepare data for a dashboard showing sales by region with trend indicators."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jq": ".data.sales | group_by(.region) | map({region: .[0].region, total_sales: map(.amount) | add, avg_sale: (map(.amount) | add / length), order_count: length, trend: (if (map(.amount) | add) > $threshold then \\"up\\" else \\"down\\" end)})",\n    "query": {\n      "query": "query($threshold: Float!) { sales { region amount } }",\n      "variables": {\n        "threshold": 10000\n      }\n    }\n  }\'\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"when-to-use-jq-vs-jq-query",children:"When to Use jq() vs /jq-query"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Use Built-in ",(0,i.jsx)(n.code,{children:"jq()"})," when"]}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You need inline transformations within complex queries"}),"\n",(0,i.jsx)(n.li,{children:"You want to chain multiple transformations hierarchically"}),"\n",(0,i.jsx)(n.li,{children:"You need both original and transformed data"}),"\n",(0,i.jsx)(n.li,{children:"Working with GraphQL tools that expect standard responses"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Use ",(0,i.jsx)(n.code,{children:"/jq-query"})," endpoint when"]}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You need access to GraphQL errors in JQ"}),"\n",(0,i.jsx)(n.li,{children:"You want the transformation result as the direct response"}),"\n",(0,i.jsx)(n.li,{children:"Building standalone data processing pipelines"}),"\n",(0,i.jsx)(n.li,{children:"Easier debugging and testing of transformations"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"performance-considerations-1",children:"Performance Considerations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Filter Early"}),": Apply filters in GraphQL queries before JQ transformation"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'# Good: Filter in GraphQL\nquery {\n  jq(query: ".users | map({id, name})") {\n    users(filter: {active: {eq: true}}) {\n      id\n      name\n    }\n  }\n}\n\n# Less efficient: Filter in JQ\nquery {\n  jq(query: ".users | map(select(.active == true)) | map({id, name})") {\n    users {\n      id\n      name\n      active\n    }\n  }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Limit Data Volume"}),": Use GraphQL ",(0,i.jsx)(n.code,{children:"limit"})," to reduce data processed by JQ"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: ".users | map({id, name})") {\n    users(limit: 100) {\n      id\n      name\n    }\n  }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Minimize queryHugr() Calls"}),": Each call executes a separate query"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'# Avoid in loops\n.users | map(. + {orders: queryHugr("...")})  # N queries\n\n# Better: Use GraphQL relations\nquery {\n  users {\n    id\n    orders { id }\n  }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Caching"}),": Cache results to improve performance and reduce database load"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option 1: @cache directive in queryHugr()"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:"query {\n  jq(query: \"\n    queryHugr('{ stats: users_aggregation @cache { _rows_count } }')\n    .data.stats as $stats |\n    .users | map(. + {total_users: $stats._rows_count})\n  \") {\n    users { id name }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option 2: X-Hugr-Cache headers for /jq-query"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/jq-query \\\n  -H "X-Hugr-Cache: 5m" \\\n  -H "X-Hugr-Cache-Key: dashboard:stats" \\\n  -H "X-Hugr-Cache-Tags: analytics,dashboard" \\\n  -d \'{...}\'\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"caching-best-practices",children:"Caching Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Choose Appropriate TTL"}),": Balance between data freshness and performance"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Real-time data: No caching or very short TTL (30s-1m)"}),"\n",(0,i.jsx)(n.li,{children:"Semi-static data: Medium TTL (5m-1h)"}),"\n",(0,i.jsx)(n.li,{children:"Static/reference data: Long TTL (1h-24h)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cache Tags"}),": Group related cache entries for easier invalidation"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Tag related queries\nX-Hugr-Cache-Tags: users,analytics,reports\n\n# Later, invalidate all queries with specific tag\n# (implementation depends on cache backend)\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Custom Cache Keys"}),": Use meaningful keys for better cache management"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Good: Descriptive key\nX-Hugr-Cache-Key: dashboard:daily-metrics:2024-01-15\n\n# Less optimal: Auto-generated hash\n# (omit header to use request body hash)\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cache at the Right Level"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Per-user data"}),": Automatic (role is appended to cache key)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Shared data"}),": Use custom cache keys"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Expensive aggregations"}),": Always cache with @cache directive in queryHugr()"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Handle Cache Invalidation"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Force refresh when data changes\ncurl -X POST http://localhost:8080/jq-query \\\n  -H "X-Hugr-Cache: 5m" \\\n  -H "X-Hugr-Cache-Key: dashboard:stats" \\\n  -H "X-Hugr-Cache-Invalidate: true" \\\n  -d \'{...}\'\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cache Aggregations in queryHugr()"}),": Most beneficial for expensive queries"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'# Cache expensive aggregation once\nqueryHugr("\n  query {\n    order_stats: orders_bucket_aggregation @cache {\n      key { status }\n      aggregations { total { sum } _rows_count }\n    }\n  }\n").data.order_stats as $stats |\n\n# Reuse cached results for all customers\n.customers | map(. + {stats: $stats})\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"debugging-jq-expressions",children:"Debugging JQ Expressions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test Incrementally"}),": Build complex expressions step by step"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:"# Start simple\n.users\n\n# Add filtering\n.users | map(select(.active))\n\n# Add transformation\n.users | map(select(.active)) | map({id, name})\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use include_origin"}),": Compare original and transformed data"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-graphql",children:'query {\n  jq(query: "...", include_origin: true) {\n    ...\n  }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test with jq CLI"}),": Test expressions using the ",(0,i.jsx)(n.code,{children:"jq"})," command-line tool"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'echo \'{"users": [{"id": 1, "name": "Alice"}]}\' | jq \'.users | map({id, name})\'\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Handle Errors"}),": Check for null values and edge cases"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:".users | map(if . then {id, name} else empty end)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Validate Input"}),": Check for expected structure"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:"if .data.users then .data.users | map({id, name}) else [] end\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Provide Defaults"}),": Use ",(0,i.jsx)(n.code,{children:"//"})," operator for null coalescing"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'.users | map({id, name: (.name // "Unknown")})\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Catch Errors in /jq-query"}),": Handle GraphQL errors"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:'if .errors then\n  {error: "GraphQL query failed", details: .errors}\nelse\n  .data.users\nend\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sanitize Sensitive Data"}),": Remove sensitive fields before returning"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jq",children:".users | map({id, name, email} | del(.email))\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Validate Variables"}),": Ensure variables are properly escaped in dynamic queries"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Limit Transformation Complexity"}),": Set timeouts for JQ execution to prevent DoS"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Access Control"}),": JQ transformations respect the same access control as GraphQL queries"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsx)(n.h3,{id:"documentation",children:"Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://jqlang.github.io/jq/",children:"Official JQ Documentation"})," - Complete JQ language reference"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://jqlang.github.io/jq/manual/",children:"JQ Manual"})," - JQ functions and operators"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/graphql/queries",children:"GraphQL Queries"})," - hugr GraphQL query documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/graphql/queries/function-calls",children:"Function Calls"})," - HTTP function JQ parameters"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"related-topics",children:"Related Topics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/graphql/jq-custom-functions",children:"Custom JQ Functions"})," - Time manipulation, authentication, and query engine functions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/querying/jq-endpoint",children:"REST API /jq-query Endpoint"})," - Detailed endpoint documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/engine-configuration/data-sources/http",children:"HTTP Data Sources"})," - JQ in HTTP functions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/overview#5-advanced-features",children:"Overview - Result Transformation"})," - Platform capabilities"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/deployment/caching",children:"Caching Configuration"})," - Configure L1/L2 cache for hugr"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/deployment/config",children:"Deployment Configuration"})," - General configuration options"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"examples-1",children:"Examples"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/engine-configuration/data-sources/http",children:"HTTP Data Source Examples"})," - JQ with external APIs"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"external-resources",children:"External Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://jqplay.org/",children:"JQ Play"})," - Online JQ playground for testing expressions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/stedolan/jq/wiki/Cookbook",children:"JQ Cookbook"})," - Common JQ patterns"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var s=r(6540);const i={},a=s.createContext(i);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);