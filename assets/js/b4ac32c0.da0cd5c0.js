"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[9435],{2866:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"graphql/queries/filtering","title":"Filtering","description":"Hugr provides powerful filtering capabilities for querying data with complex conditions. Filters can be applied to scalar fields, relations, nested objects, and combined using boolean logic.","source":"@site/docs/5-graphql/1-queries/3-filtering.md","sourceDirName":"5-graphql/1-queries","slug":"/graphql/queries/filtering","permalink":"/docs/graphql/queries/filtering","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/5-graphql/1-queries/3-filtering.md","tags":[],"version":"current","lastUpdatedBy":"Claude","lastUpdatedAt":1762461702000,"sidebarPosition":3,"frontMatter":{"title":"Filtering","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Basic Queries","permalink":"/docs/graphql/queries/basic-queries"},"next":{"title":"Sorting & Pagination","permalink":"/docs/graphql/queries/sorting-pagination"}}');var s=i(4848),l=i(8453);const t={title:"Filtering",sidebar_position:3},a="Filtering",d={},c=[{value:"Basic Filters",id:"basic-filters",level:2},{value:"Scalar Field Filters",id:"scalar-field-filters",level:3},{value:"Multiple Conditions (Implicit AND)",id:"multiple-conditions-implicit-and",level:3},{value:"Filter Operators by Type",id:"filter-operators-by-type",level:2},{value:"Numeric Filters (Int, Float, BigInt)",id:"numeric-filters-int-float-bigint",level:3},{value:"String Filters",id:"string-filters",level:3},{value:"Boolean Filters",id:"boolean-filters",level:3},{value:"Date and Timestamp Filters",id:"date-and-timestamp-filters",level:3},{value:"JSON/JSONB Filters",id:"jsonjsonb-filters",level:3},{value:"Geometry Filters",id:"geometry-filters",level:3},{value:"Intersects Examples",id:"intersects-examples",level:4},{value:"Contains Examples",id:"contains-examples",level:4},{value:"Combining Geometry Filters",id:"combining-geometry-filters",level:4},{value:"Boolean Logic",id:"boolean-logic",level:2},{value:"AND Conditions",id:"and-conditions",level:3},{value:"OR Conditions",id:"or-conditions",level:3},{value:"NOT Conditions",id:"not-conditions",level:3},{value:"Complex Boolean Logic",id:"complex-boolean-logic",level:3},{value:"Filtering by Related Objects",id:"filtering-by-related-objects",level:2},{value:"One-to-One Relations",id:"one-to-one-relations",level:3},{value:"Nested Relation Filters",id:"nested-relation-filters",level:3},{value:"Deep Relation Filters",id:"deep-relation-filters",level:3},{value:"Filtering by List Relations",id:"filtering-by-list-relations",level:2},{value:"any_of - At Least One Matches",id:"any_of---at-least-one-matches",level:3},{value:"all_of - All Must Match",id:"all_of---all-must-match",level:3},{value:"none_of - None Can Match",id:"none_of---none-can-match",level:3},{value:"Complex List Filters",id:"complex-list-filters",level:3},{value:"Nested List Filters",id:"nested-list-filters",level:3},{value:"Filtering Nested Objects",id:"filtering-nested-objects",level:2},{value:"Deep Nested Object Filters",id:"deep-nested-object-filters",level:3},{value:"Filtering with NULL Values",id:"filtering-with-null-values",level:2},{value:"Finding NULL Values",id:"finding-null-values",level:3},{value:"Finding Non-NULL Values",id:"finding-non-null-values",level:3},{value:"NULL in Relations",id:"null-in-relations",level:3},{value:"Array and Vector Filters",id:"array-and-vector-filters",level:2},{value:"Array Contains",id:"array-contains",level:3},{value:"Array Intersects",id:"array-intersects",level:3},{value:"Array Equality",id:"array-equality",level:3},{value:"Vector Similarity Search",id:"vector-similarity-search",level:3},{value:"Filter Reuse with Variables",id:"filter-reuse-with-variables",level:2},{value:"Required Filters",id:"required-filters",level:2},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"1. Filter Early",id:"1-filter-early",level:3},{value:"2. Use Indexes",id:"2-use-indexes",level:3},{value:"3. Combine Filters Efficiently",id:"3-combine-filters-efficiently",level:3},{value:"4. Use IN Instead of Multiple OR",id:"4-use-in-instead-of-multiple-or",level:3},{value:"Common Filter Patterns",id:"common-filter-patterns",level:2},{value:"Date Ranges",id:"date-ranges",level:3},{value:"Search by Name",id:"search-by-name",level:3},{value:"Active Records Only",id:"active-records-only",level:3},{value:"Exclude Specific Values",id:"exclude-specific-values",level:3},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"filtering",children:"Filtering"})}),"\n",(0,s.jsx)(n.p,{children:"Hugr provides powerful filtering capabilities for querying data with complex conditions. Filters can be applied to scalar fields, relations, nested objects, and combined using boolean logic."}),"\n",(0,s.jsx)(n.h2,{id:"basic-filters",children:"Basic Filters"}),"\n",(0,s.jsx)(n.h3,{id:"scalar-field-filters",children:"Scalar Field Filters"}),"\n",(0,s.jsx)(n.p,{children:"Filter by simple field comparisons:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: { country: { eq: "USA" } }) {\n    id\n    name\n    country\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"multiple-conditions-implicit-and",children:"Multiple Conditions (Implicit AND)"}),"\n",(0,s.jsx)(n.p,{children:"Multiple filters at the same level are combined with AND:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(filter: {\n    price: { gte: 10.0 }\n    category: { eq: "electronics" }\n    in_stock: { eq: true }\n  }) {\n    id\n    name\n    price\n    category\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Equivalent to SQL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"WHERE price >= 10.0 AND category = 'electronics' AND in_stock = true\n"})}),"\n",(0,s.jsx)(n.h2,{id:"filter-operators-by-type",children:"Filter Operators by Type"}),"\n",(0,s.jsx)(n.h3,{id:"numeric-filters-int-float-bigint",children:"Numeric Filters (Int, Float, BigInt)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  products(filter: {\n    price: {\n      eq: 50.0      # Equal to\n      gt: 10.0      # Greater than\n      gte: 10.0     # Greater than or equal\n      lt: 100.0     # Less than\n      lte: 100.0    # Less than or equal\n      in: [10.0, 20.0, 30.0]  # In list\n      is_null: false  # Is NULL / NOT NULL\n    }\n  }) {\n    id\n    name\n    price\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"string-filters",children:"String Filters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: {\n    name: {\n      eq: "John Doe"           # Exact match\n      in: ["John", "Jane"]     # In list\n      like: "John%"            # Pattern match (% wildcard)\n      ilike: "john%"           # Case-insensitive pattern match\n      regex: "^[A-Z][a-z]+"    # Regular expression\n      is_null: false           # Is NULL / NOT NULL\n    }\n  }) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Pattern examples:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"John%"'}),' - Starts with "John"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"%Doe"'}),' - Ends with "Doe"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"%John%"'}),' - Contains "John"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"J_hn"'}),' - Matches "John", "Jahn" (single character wildcard)']}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"boolean-filters",children:"Boolean Filters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  products(filter: {\n    in_stock: { eq: true }\n    is_featured: { is_null: false }\n  }) {\n    id\n    name\n    in_stock\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"date-and-timestamp-filters",children:"Date and Timestamp Filters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(filter: {\n    created_at: {\n      gte: "2024-01-01T00:00:00Z"  # After or equal\n      lt: "2024-02-01T00:00:00Z"   # Before\n    }\n    shipped_date: {\n      is_null: false  # Has been shipped\n    }\n  }) {\n    id\n    created_at\n    shipped_date\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"jsonjsonb-filters",children:"JSON/JSONB Filters"}),"\n",(0,s.jsx)(n.p,{children:"Filter by JSON field values:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  events(filter: {\n    metadata: {\n      eq: { "user_id": 123, "status": "active" }  # Exact match\n      contains: { "user_id": 123 }                 # Contains key-value (like PostgreSQL @>)\n      has: "transaction_id"                        # Has key\n      has_all: ["user_id", "transaction_id"]       # Has all specified keys\n      is_null: false                               # Is NULL / NOT NULL\n    }\n  }) {\n    id\n    metadata\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"geometry-filters",children:"Geometry Filters"}),"\n",(0,s.jsx)(n.p,{children:"Filter by spatial relationships between geometries:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  parcels(filter: {\n    boundary: {\n      eq: "POLYGON((0 0, 0 10, 10 10, 10 0, 0 0))"  # Exact geometry match (WKT)\n      intersects: {\n        type: "Polygon"\n        coordinates: [[[0, 0], [0, 10], [10, 10], [10, 0], [0, 0]]]\n      }  # Intersects with geometry (GeoJSON)\n      contains: "POINT(5 5)"                        # Contains geometry (WKT)\n      is_null: false                                # Is NULL / NOT NULL\n    }\n  }) {\n    id\n    parcel_number\n    boundary\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Geometry input formats:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"WKT (Well-Known Text)"}),": ",(0,s.jsx)(n.code,{children:'"POINT(1 2)"'}),", ",(0,s.jsx)(n.code,{children:'"POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))"'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GeoJSON"}),": ",(0,s.jsx)(n.code,{children:'{ "type": "Point", "coordinates": [1, 2] }'})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Spatial operators:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eq"}),": Exact geometry match"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"intersects"}),": Geometries share any portion of space"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"contains"}),": First geometry completely contains second geometry"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"is_null"}),": Check for NULL geometry"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"intersects-examples",children:"Intersects Examples"}),"\n",(0,s.jsx)(n.p,{children:"Find parcels that intersect with a polygon:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  parcels(filter: {\n    boundary: {\n      intersects: "POLYGON((0 0, 0 100, 100 100, 100 0, 0 0))"\n    }\n  }) {\n    id\n    parcel_number\n    area\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Find roads crossing a specific area (using GeoJSON):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  roads(filter: {\n    geometry: {\n      intersects: {\n        type: "Polygon"\n        coordinates: [\n          [\n            [-74.01, 40.70],\n            [-74.01, 40.72],\n            [-73.99, 40.72],\n            [-73.99, 40.70],\n            [-74.01, 40.70]\n          ]\n        ]\n      }\n    }\n  }) {\n    id\n    name\n    road_type\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"contains-examples",children:"Contains Examples"}),"\n",(0,s.jsx)(n.p,{children:"Find regions containing a specific point:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  regions(filter: {\n    boundary: {\n      contains: "POINT(-73.98 40.75)"\n    }\n  }) {\n    id\n    region_name\n    area\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Find areas that contain a building footprint:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  zones(filter: {\n    boundary: {\n      contains: {\n        type: "Polygon"\n        coordinates: [\n          [\n            [-74.00, 40.71],\n            [-74.00, 40.712],\n            [-73.998, 40.712],\n            [-73.998, 40.71],\n            [-74.00, 40.71]\n          ]\n        ]\n      }\n    }\n  }) {\n    id\n    zone_name\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"combining-geometry-filters",children:"Combining Geometry Filters"}),"\n",(0,s.jsx)(n.p,{children:"Combine spatial and attribute filters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  buildings(filter: {\n    _and: [\n      {\n        footprint: {\n          intersects: "POLYGON((0 0, 0 100, 100 100, 100 0, 0 0))"\n        }\n      }\n      { building_type: { eq: "residential" } }\n      { height: { gte: 20 } }\n    ]\n  }) {\n    id\n    name\n    building_type\n    height\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," For more advanced spatial queries including distance-based filtering and spatial aggregations, see ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/spatial",children:"Spatial Queries"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"boolean-logic",children:"Boolean Logic"}),"\n",(0,s.jsx)(n.h3,{id:"and-conditions",children:"AND Conditions"}),"\n",(0,s.jsx)(n.p,{children:"Combine multiple conditions that must all be true:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(filter: {\n    _and: [\n      { status: { eq: "completed" } }\n      { total: { gte: 100.0 } }\n      { created_at: { gte: "2024-01-01" } }\n    ]\n  }) {\n    id\n    status\n    total\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"or-conditions",children:"OR Conditions"}),"\n",(0,s.jsx)(n.p,{children:"Match any of the specified conditions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: {\n    _or: [\n      { country: { eq: "USA" } }\n      { country: { eq: "Canada" } }\n      { vip_status: { eq: true } }\n    ]\n  }) {\n    id\n    name\n    country\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"not-conditions",children:"NOT Conditions"}),"\n",(0,s.jsx)(n.p,{children:"Negate a filter condition:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(filter: {\n    _not: {\n      category: { in: ["discontinued", "archived"] }\n    }\n  }) {\n    id\n    name\n    category\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"complex-boolean-logic",children:"Complex Boolean Logic"}),"\n",(0,s.jsx)(n.p,{children:"Combine AND, OR, and NOT:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(filter: {\n    _and: [\n      {\n        _or: [\n          { status: { eq: "pending" } }\n          { status: { eq: "processing" } }\n        ]\n      }\n      {\n        _or: [\n          { priority: { eq: "high" } }\n          { total: { gte: 1000.0 } }\n        ]\n      }\n      {\n        _not: {\n          customer: {\n            status: { eq: "suspended" }\n          }\n        }\n      }\n    ]\n  }) {\n    id\n    status\n    priority\n    total\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Equivalent to SQL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"WHERE (status = 'pending' OR status = 'processing')\n  AND (priority = 'high' OR total >= 1000.0)\n  AND NOT (customer.status = 'suspended')\n"})}),"\n",(0,s.jsx)(n.h2,{id:"filtering-by-related-objects",children:"Filtering by Related Objects"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," Filtering by related objects only works for relations defined with ",(0,s.jsx)(n.code,{children:"@field_references"})," or ",(0,s.jsx)(n.code,{children:"@references"})," directives (foreign key relationships). Predefined joins created with ",(0,s.jsx)(n.code,{children:"@join"})," or ",(0,s.jsx)(n.code,{children:"@table_function_call_join"})," directives cannot be used in filter conditions. To restrict records based on these joins, use the ",(0,s.jsx)(n.code,{children:"inner: true"})," parameter instead."]}),"\n",(0,s.jsx)(n.h3,{id:"one-to-one-relations",children:"One-to-One Relations"}),"\n",(0,s.jsx)(n.p,{children:"Filter by fields in related objects:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(filter: {\n    customer: {\n      country: { eq: "USA" }\n      vip_status: { eq: true }\n    }\n  }) {\n    id\n    customer {\n      name\n      country\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"nested-relation-filters",children:"Nested Relation Filters"}),"\n",(0,s.jsx)(n.p,{children:"Filter through multiple relation levels:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(filter: {\n    customer: {\n      address: {\n        city: { eq: "New York" }\n      }\n      category: {\n        name: { ilike: "%premium%" }\n      }\n    }\n  }) {\n    id\n    customer {\n      name\n      address {\n        city\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"deep-relation-filters",children:"Deep Relation Filters"}),"\n",(0,s.jsx)(n.p,{children:"Filter up to 4 levels deep:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  order_details(filter: {\n    order: {\n      customer: {\n        category: {\n          description: { ilike: "%enterprise%" }\n        }\n      }\n    }\n  }) {\n    id\n    order {\n      customer {\n        name\n        category {\n          description\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"filtering-by-list-relations",children:"Filtering by List Relations"}),"\n",(0,s.jsx)(n.p,{children:"For one-to-many and many-to-many relations, use list operators:"}),"\n",(0,s.jsx)(n.h3,{id:"any_of---at-least-one-matches",children:"any_of - At Least One Matches"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: {\n    orders: {\n      any_of: {\n        status: { eq: "pending" }\n      }\n    }\n  }) {\n    id\n    name\n    orders(filter: { status: { eq: "pending" } }) {\n      id\n      status\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Finds customers who have ",(0,s.jsx)(n.strong,{children:"at least one"})," pending order."]}),"\n",(0,s.jsx)(n.h3,{id:"all_of---all-must-match",children:"all_of - All Must Match"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: {\n    orders: {\n      all_of: {\n        status: { eq: "completed" }\n      }\n    }\n  }) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Finds customers where ",(0,s.jsx)(n.strong,{children:"all"})," their orders are completed."]}),"\n",(0,s.jsx)(n.h3,{id:"none_of---none-can-match",children:"none_of - None Can Match"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: {\n    orders: {\n      none_of: {\n        status: { eq: "cancelled" }\n      }\n    }\n  }) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Finds customers with ",(0,s.jsx)(n.strong,{children:"no"})," cancelled orders."]}),"\n",(0,s.jsx)(n.h3,{id:"complex-list-filters",children:"Complex List Filters"}),"\n",(0,s.jsx)(n.p,{children:"Combine multiple conditions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(filter: {\n    categories: {\n      any_of: {\n        _and: [\n          { name: { ilike: "%electronics%" } }\n          { active: { eq: true } }\n        ]\n      }\n    }\n  }) {\n    id\n    name\n    categories {\n      name\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"nested-list-filters",children:"Nested List Filters"}),"\n",(0,s.jsx)(n.p,{children:"Filter through nested list relations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: {\n    orders: {\n      any_of: {\n        order_details: {\n          any_of: {\n            product: {\n              category: { eq: "electronics" }\n            }\n            quantity: { gte: 5 }\n          }\n        }\n      }\n    }\n  }) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Finds customers who ordered 5+ units of electronics."}),"\n",(0,s.jsx)(n.h2,{id:"filtering-nested-objects",children:"Filtering Nested Objects"}),"\n",(0,s.jsx)(n.p,{children:"For fields with nested object types:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"# Schema with nested object\ntype customer_profile {\n  preferences: UserPreferences  # Nested object\n  settings: AccountSettings     # Nested object\n}\n\ntype UserPreferences {\n  theme: String\n  language: String\n  notifications_enabled: Boolean\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Filter by nested object fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customer_profiles(filter: {\n    preferences: {\n      theme: { eq: "dark" }\n      notifications_enabled: { eq: true }\n    }\n  }) {\n    id\n    preferences {\n      theme\n      notifications_enabled\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"deep-nested-object-filters",children:"Deep Nested Object Filters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers(filter: {\n    profile: {\n      settings: {\n        privacy: {\n          share_email: { eq: false }\n        }\n      }\n    }\n  }) {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"filtering-with-null-values",children:"Filtering with NULL Values"}),"\n",(0,s.jsx)(n.h3,{id:"finding-null-values",children:"Finding NULL Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers(filter: {\n    phone: { is_null: true }\n  }) {\n    id\n    name\n    phone\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"finding-non-null-values",children:"Finding Non-NULL Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers(filter: {\n    phone: { is_null: false }\n  }) {\n    id\n    name\n    phone\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"null-in-relations",children:"NULL in Relations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  orders(filter: {\n    shipped_date: { is_null: true }\n    customer: { is_null: false }\n  }) {\n    id\n    status\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"array-and-vector-filters",children:"Array and Vector Filters"}),"\n",(0,s.jsx)(n.h3,{id:"array-contains",children:"Array Contains"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(filter: {\n    tags: {\n      contains: ["featured", "sale"]  # Contains all specified values\n    }\n  }) {\n    id\n    name\n    tags\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"array-intersects",children:"Array Intersects"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(filter: {\n    tags: {\n      intersects: ["featured", "new"]  # Has any of specified values\n    }\n  }) {\n    id\n    name\n    tags\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"array-equality",children:"Array Equality"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(filter: {\n    tags: {\n      eq: ["sale", "clearance"]  # Exact match of array\n    }\n  }) {\n    id\n    name\n    tags\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"vector-similarity-search",children:"Vector Similarity Search"}),"\n",(0,s.jsxs)(n.p,{children:["Vector fields support similarity search using embeddings for semantic search. Vector similarity search is ",(0,s.jsx)(n.strong,{children:"not a filter"})," but a separate query argument that ranks results by distance."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," Vector fields can only be filtered with ",(0,s.jsx)(n.code,{children:"is_null"}),". For semantic search, similarity ranking, and distance-based queries, see ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/vector-search",children:"Vector Similarity Search"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  documents(\n    # Vector similarity search\n    similarity: {\n      name: "embedding"\n      vector: [0.1, 0.2, 0.3, ...]\n      distance: Cosine\n      limit: 10\n    }\n    # Combined with filters\n    filter: {\n      published: { eq: true }\n      language: { eq: "en" }\n    }\n  ) {\n    id\n    title\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/vector-search",children:"Vector Similarity Search"})," for comprehensive documentation on:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Distance metrics (Cosine, L2, Inner product)"}),"\n",(0,s.jsx)(n.li,{children:"Calculated distance fields"}),"\n",(0,s.jsx)(n.li,{children:"Combining vector search with filters"}),"\n",(0,s.jsx)(n.li,{children:"Text-to-vector search with @embeddings"}),"\n",(0,s.jsx)(n.li,{children:"Performance optimization"}),"\n",(0,s.jsx)(n.li,{children:"Use cases (semantic search, recommendations, duplicate detection)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"filter-reuse-with-variables",children:"Filter Reuse with Variables"}),"\n",(0,s.jsx)(n.p,{children:"Define reusable filters using variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query GetActiveCustomers($countryFilter: customers_filter!) {\n  customers(filter: $countryFilter) {\n    id\n    name\n    country\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "countryFilter": {\n    "_and": [\n      { "country": { "in": ["USA", "Canada"] } },\n      { "status": { "eq": "active" } }\n    ]\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"required-filters",children:"Required Filters"}),"\n",(0,s.jsxs)(n.p,{children:["Some fields may require filters using ",(0,s.jsx)(n.code,{children:"@filter_required"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Schema definition\ntype time_series_data @table(name: "time_series") {\n  timestamp: Timestamp! @filter_required\n  sensor_id: Int!\n  value: Float!\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Queries must include the required filter:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Valid\nquery {\n  time_series_data(filter: {\n    timestamp: { gte: "2024-01-01", lt: "2024-02-01" }\n  }) {\n    timestamp\n    sensor_id\n    value\n  }\n}\n\n# Invalid - will return error\nquery {\n  time_series_data {\n    timestamp\n    value\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"1-filter-early",children:"1. Filter Early"}),"\n",(0,s.jsx)(n.p,{children:"Apply filters at the highest level to reduce data volume:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Good - Filter at top level\nquery {\n  customers(filter: { country: { eq: "USA" } }) {\n    id\n    orders {\n      id\n    }\n  }\n}\n\n# Less efficient - Filter after join\nquery {\n  customers {\n    id\n    orders(filter: { customer: { country: { eq: "USA" } } }) {\n      id\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-indexes",children:"2. Use Indexes"}),"\n",(0,s.jsx)(n.p,{children:"Ensure database indexes exist on:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Frequently filtered fields"}),"\n",(0,s.jsx)(n.li,{children:"Foreign key fields used in relation filters"}),"\n",(0,s.jsx)(n.li,{children:"Fields used in ORDER BY"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-combine-filters-efficiently",children:"3. Combine Filters Efficiently"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Good - Single filter with multiple conditions\nquery {\n  orders(filter: {\n    _and: [\n      { status: { in: ["pending", "processing"] } }\n      { total: { gte: 100 } }\n    ]\n  }) {\n    id\n  }\n}\n\n# Avoid - Separate queries\nquery {\n  pending: orders(filter: { status: { eq: "pending" } }) { id }\n  processing: orders(filter: { status: { eq: "processing" } }) { id }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"4-use-in-instead-of-multiple-or",children:"4. Use IN Instead of Multiple OR"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'# Good\nquery {\n  customers(filter: {\n    country: { in: ["USA", "Canada", "Mexico"] }\n  }) {\n    id\n  }\n}\n\n# Avoid\nquery {\n  customers(filter: {\n    _or: [\n      { country: { eq: "USA" } }\n      { country: { eq: "Canada" } }\n      { country: { eq: "Mexico" } }\n    ]\n  }) {\n    id\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"common-filter-patterns",children:"Common Filter Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"date-ranges",children:"Date Ranges"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query OrdersThisMonth {\n  orders(filter: {\n    created_at: {\n      gte: "2024-03-01T00:00:00Z"\n      lt: "2024-04-01T00:00:00Z"\n    }\n  }) {\n    id\n    created_at\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"search-by-name",children:"Search by Name"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query SearchCustomers($query: String!) {\n  customers(filter: {\n    _or: [\n      { name: { ilike: $query } }\n      { email: { ilike: $query } }\n      { phone: { like: $query } }\n    ]\n  }) {\n    id\n    name\n    email\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "query": "%john%"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"active-records-only",children:"Active Records Only"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  products(filter: {\n    _and: [\n      { deleted_at: { is_null: true } }\n      { active: { eq: true } }\n      { in_stock: { eq: true } }\n    ]\n  }) {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exclude-specific-values",children:"Exclude Specific Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(filter: {\n    status: {\n      _not: { in: ["cancelled", "refunded"] }\n    }\n  }) {\n    id\n    status\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Learn about ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/sorting-pagination",children:"Sorting & Pagination"})," to order and paginate filtered results"]}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/relations",children:"Relations"})," for advanced filtering with related data"]}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/aggregations",children:"Aggregations"})," for filtering aggregated data"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var r=i(6540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);