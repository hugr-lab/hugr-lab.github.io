"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[5355],{2864:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"engine-configuration/schema-definition/data-objects/queries","title":"Queries","description":"Hugr automatically generates various query types for each data object (table or view). These queries provide comprehensive data access patterns without manual implementation.","source":"@site/docs/4-engine-configuration/3-schema-definition/3-data-objects/4-queries.md","sourceDirName":"4-engine-configuration/3-schema-definition/3-data-objects","slug":"/engine-configuration/schema-definition/data-objects/queries","permalink":"/docs/engine-configuration/schema-definition/data-objects/queries","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/4-engine-configuration/3-schema-definition/3-data-objects/4-queries.md","tags":[],"version":"current","lastUpdatedBy":"vgsml","lastUpdatedAt":1759235264000,"sidebarPosition":4,"frontMatter":{"title":"Queries","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Views","permalink":"/docs/engine-configuration/schema-definition/data-objects/views"},"next":{"title":"Mutations","permalink":"/docs/engine-configuration/schema-definition/data-objects/mutations"}}');var s=i(4848),t=i(8453);const l={title:"Queries",sidebar_position:4},d=void 0,c={},a=[{value:"Select Queries",id:"select-queries",level:2},{value:"Query Arguments",id:"query-arguments",level:3},{value:"Select by Primary Key",id:"select-by-primary-key",level:2},{value:"Select by Unique Constraint",id:"select-by-unique-constraint",level:2},{value:"Filter Input Types",id:"filter-input-types",level:2},{value:"Filter Operators by Type",id:"filter-operators-by-type",level:3},{value:"Complex Filtering",id:"complex-filtering",level:2},{value:"Boolean Logic",id:"boolean-logic",level:3},{value:"Relation Filters",id:"relation-filters",level:3},{value:"List Filter Operators",id:"list-filter-operators",level:3},{value:"Sorting",id:"sorting",level:2},{value:"Pagination",id:"pagination",level:2},{value:"Distinct Values",id:"distinct-values",level:2},{value:"Parameterized View Queries",id:"parameterized-view-queries",level:2},{value:"Similarity Search",id:"similarity-search",level:2},{value:"Semantic Search",id:"semantic-search",level:2}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Hugr automatically generates various query types for each data object (table or view). These queries provide comprehensive data access patterns without manual implementation."}),"\n",(0,s.jsx)(n.h2,{id:"select-queries",children:"Select Queries"}),"\n",(0,s.jsx)(n.p,{children:"Basic selection query for retrieving multiple records:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(\n    filter: { country: { eq: "USA" } }\n    order_by: [{ field: "name", direction: ASC }]\n    limit: 10\n    offset: 20\n    distinct_on: ["city"]\n  ) {\n    id\n    name\n    city\n    country\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"query-arguments",children:"Query Arguments"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Argument"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"filter"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<object>_filter"})}),(0,s.jsx)(n.td,{children:"Filter conditions"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"order_by"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"[OrderByField]"})}),(0,s.jsx)(n.td,{children:"Sort order"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"limit"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Int"})}),(0,s.jsx)(n.td,{children:"Maximum records to return"}),(0,s.jsx)(n.td,{children:"2000"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"offset"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Int"})}),(0,s.jsx)(n.td,{children:"Number of records to skip"}),(0,s.jsx)(n.td,{children:"0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"distinct_on"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"[String]"})}),(0,s.jsx)(n.td,{children:"Fields for DISTINCT clause"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"args"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<input_object>"})}),(0,s.jsxs)(n.td,{children:["Arguments for parameterized views, a type is defined by ",(0,s.jsx)(n.code,{children:"@args"})," directive"]}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"similarity"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VectorSearchInput"})}),(0,s.jsx)(n.td,{children:"Similarity search parameters for vector fields"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"semantic"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SemanticSearchInput"})}),(0,s.jsx)(n.td,{children:"Semantic search parameters for the vector field using defined embeddings model"}),(0,s.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"select-by-primary-key",children:"Select by Primary Key"}),"\n",(0,s.jsx)(n.p,{children:"Retrieve a single record using primary key fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  customers_by_pk(id: 123) {\n    id\n    name\n    email\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"For composite primary keys:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  order_details_by_pk(order_id: 100, product_id: 50) {\n    quantity\n    unit_price\n    total\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"select-by-unique-constraint",children:"Select by Unique Constraint"}),"\n",(0,s.jsx)(n.p,{children:"Queries generated for each unique constraint:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers_by_email(email: "user@example.com") {\n    id\n    name\n    created_at\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"filter-input-types",children:"Filter Input Types"}),"\n",(0,s.jsx)(n.p,{children:"Hugr generates filter input types for each data object:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"input customers_filter {\n  # Scalar field filters\n  id: IntFilter\n  name: StringFilter\n  created_at: TimestampFilter\n  \n  # Relation filters\n  orders: orders_list_filter\n  \n  # Boolean logic\n  _and: [customers_filter]\n  _or: [customers_filter]\n  _not: customers_filter\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"filter-operators-by-type",children:"Filter Operators by Type"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Numeric fields (Int, Float, BigInt):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eq"})," - Equal to"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ne"})," - Not equal to"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gt"})," - Greater than"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gte"})," - Greater than or equal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lt"})," - Less than"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lte"})," - Less than or equal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"in"})," - In list"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"is_null"})," - Is null"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"String fields:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eq"})," - Equal to"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ne"})," - Not equal to"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"like"})," - Pattern match (% as wildcard)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ilike"})," - Case-insensitive pattern match"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"in"})," - In list"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"regex"})," - Regular expression match"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"is_null"})," - Is null"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Boolean fields:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eq"})," - Equal to"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"is_null"})," - Is null"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Timestamp/Date fields:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eq"})," - Equal to"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gt"})," - After"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gte"})," - After or equal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lt"})," - Before"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lte"})," - Before or equal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"is_null"})," - Is null"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"complex-filtering",children:"Complex Filtering"}),"\n",(0,s.jsx)(n.h3,{id:"boolean-logic",children:"Boolean Logic"}),"\n",(0,s.jsx)(n.p,{children:"Combine filters using AND, OR, NOT:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  orders(filter: {\n    _and: [\n      { status: { eq: "completed" } }\n      { total: { gte: 100 } }\n    ]\n    _or: [\n      { priority: { eq: "high" } }\n      { customer: { vip: { eq: true } } }\n    ]\n    _not: {\n      deleted_at: { is_null: false }\n    }\n  }) {\n    id\n    status\n    total\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"relation-filters",children:"Relation Filters"}),"\n",(0,s.jsx)(n.p,{children:"Filter by related object fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(filter: {\n    orders: {\n      any_of: {\n        status: { eq: "pending" }\n        total: { gt: 1000 }\n      }\n    }\n  }) {\n    id\n    name\n    orders {\n      id\n      status\n      total\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"list-filter-operators",children:"List Filter Operators"}),"\n",(0,s.jsx)(n.p,{children:"For one-to-many and many-to-many relations:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"any_of"})," - At least one related record matches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"all_of"})," - All related records match"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"none_of"})," - No related records match"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"sorting",children:"Sorting"}),"\n",(0,s.jsx)(n.p,{children:"Sort by single or multiple fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(order_by: [\n    { field: "category.name", direction: ASC }\n    { field: "price", direction: DESC }\n  ]) {\n    id\n    name\n    price\n    category {\n      name\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"pagination",children:"Pagination"}),"\n",(0,s.jsx)(n.p,{children:"Implement pagination using limit and offset:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query GetPage {\n  customers(\n    limit: 10\n    offset: 20\n  ) {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"With variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query GetPageWithVars($limit: Int!, $offset: Int!) {\n  customers(\n    limit: $limit\n    offset: $offset\n  ) {\n    id\n    name\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"distinct-values",children:"Distinct Values"}),"\n",(0,s.jsx)(n.p,{children:"Get unique values using distinct_on:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  customers(distinct_on: ["country", "city"]) {\n    country\n    city\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"parameterized-view-queries",children:"Parameterized View Queries"}),"\n",(0,s.jsx)(n.p,{children:"For parameterized views, include the args parameter:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  top_customers(\n    args: {\n      from: "2024-01-01"\n      to: "2024-12-31"\n    }\n    filter: { total_spent: { gte: 10000 } }\n    limit: 5\n  ) {\n    customer_id\n    total_spent\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"similarity-search",children:"Similarity Search"}),"\n",(0,s.jsx)(n.p,{children:"For data objects with vector fields, use the similarity parameter:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(\n    similarity: {\n      field: "embedding"\n      vector: [0.1, 0.2, 0.3, 0.4]\n      limit: 5\n      distance: Cosine\n    }\n  ) {\n    id\n    name\n    embedding\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"The similarity input type:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'input VectorSearchInput @system {\n  "The name of vector field"\n  name: String!\n  "The vector to search"\n  vector: Vector!\n  "Distance type"\n  distance: VectorDistanceType!\n  "Limit to results"\n  limit: Int!\n}\n\nenum VectorDistanceType @system {\n  "L2 distance"\n  L2\n  "Cosine similarity"\n  Cosine\n  "Inner product"\n  Inner\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"semantic-search",children:"Semantic Search"}),"\n",(0,s.jsxs)(n.p,{children:["For data objects with vector fields and embeddings model defined for the data object (using ",(0,s.jsx)(n.code,{children:"@embeddings"}),"), use the semantic parameter:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  documents(\n    semantic: {\n      query: "What is GraphQL?"\n      limit: 5\n    }\n  ) {\n    id\n    content\n    embedding\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"The semantic input type:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'input SemanticSearchInput @system {\n  "The text to search"\n  query: String!\n  "Limit to results"\n  limit: Int!\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var r=i(6540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);