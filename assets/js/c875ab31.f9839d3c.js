"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[8903],{3121:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"graphql/queries/vector-search","title":"Vector Similarity Search","description":"Hugr provides built-in support for vector similarity search, enabling semantic search capabilities for text, images, and other data types represented as embeddings. Vector search ranks results by similarity distance rather than exact matching, making it ideal for recommendation systems, semantic search, and AI-powered applications.","source":"@site/docs/5-graphql/1-queries/11-vector-search.md","sourceDirName":"5-graphql/1-queries","slug":"/graphql/queries/vector-search","permalink":"/docs/graphql/queries/vector-search","draft":false,"unlisted":false,"editUrl":"https://github.com/hugr-lab/hugr-lab.github.io/docs/5-graphql/1-queries/11-vector-search.md","tags":[],"version":"current","lastUpdatedBy":"Claude","lastUpdatedAt":1762461702000,"sidebarPosition":11,"frontMatter":{"title":"Vector Similarity Search","sidebar_position":11},"sidebar":"docsSidebar","previous":{"title":"H3 Hexagonal Clustering","permalink":"/docs/graphql/queries/h3-clustering"},"next":{"title":"Generated Fields & Transformations","permalink":"/docs/graphql/queries/generated-fields"}}');var s=i(4848),t=i(8453);const c={title:"Vector Similarity Search",sidebar_position:11},a="Vector Similarity Search",l={},d=[{value:"What is Vector Search?",id:"what-is-vector-search",level:2},{value:"Vector Type Support",id:"vector-type-support",level:2},{value:"Basic Similarity Search",id:"basic-similarity-search",level:2},{value:"Distance Metrics",id:"distance-metrics",level:2},{value:"Cosine Similarity",id:"cosine-similarity",level:3},{value:"Euclidean Distance (L2)",id:"euclidean-distance-l2",level:3},{value:"Inner Product",id:"inner-product",level:3},{value:"Calculated Distance Fields",id:"calculated-distance-fields",level:2},{value:"Sorting by Distance with Limit",id:"sorting-by-distance-with-limit",level:2},{value:"Combining with Filters",id:"combining-with-filters",level:2},{value:"Multi-Field Vector Search",id:"multi-field-vector-search",level:2},{value:"Text-to-Vector Search with @embeddings",id:"text-to-vector-search-with-embeddings",level:2},{value:"Vector Search in Relations",id:"vector-search-in-relations",level:2},{value:"Vector Search with Aggregations",id:"vector-search-with-aggregations",level:2},{value:"Hybrid Search (Vector + Full-Text)",id:"hybrid-search-vector--full-text",level:2},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"1. Create Vector Indexes",id:"1-create-vector-indexes",level:3},{value:"2. Choose Appropriate Limits",id:"2-choose-appropriate-limits",level:3},{value:"3. Apply Filters First",id:"3-apply-filters-first",level:3},{value:"4. Use Appropriate Distance Metric",id:"4-use-appropriate-distance-metric",level:3},{value:"5. Batch Queries",id:"5-batch-queries",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Semantic Document Search",id:"semantic-document-search",level:3},{value:"Image Similarity",id:"image-similarity",level:3},{value:"Product Recommendations",id:"product-recommendations",level:3},{value:"Question Answering",id:"question-answering",level:3},{value:"Duplicate Detection",id:"duplicate-detection",level:3},{value:"Vector Filtering Limitations",id:"vector-filtering-limitations",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"vector-similarity-search",children:"Vector Similarity Search"})}),"\n",(0,s.jsx)(n.p,{children:"Hugr provides built-in support for vector similarity search, enabling semantic search capabilities for text, images, and other data types represented as embeddings. Vector search ranks results by similarity distance rather than exact matching, making it ideal for recommendation systems, semantic search, and AI-powered applications."}),"\n",(0,s.jsx)(n.h2,{id:"what-is-vector-search",children:"What is Vector Search?"}),"\n",(0,s.jsx)(n.p,{children:"Vector similarity search finds the nearest neighbors to a query vector in high-dimensional space. Unlike traditional filters that match exact values, vector search:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ranks by similarity"})," - Results are ordered by distance from the query vector"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Supports semantic search"})," - Find conceptually similar items, not just keyword matches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Uses embeddings"})," - Represents complex data (text, images, audio) as numerical vectors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Scales efficiently"})," - Uses specialized indexes (HNSW, IVF) for fast search"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"vector-type-support",children:"Vector Type Support"}),"\n",(0,s.jsxs)(n.p,{children:["Hugr supports ",(0,s.jsx)(n.code,{children:"Vector"})," type for PostgreSQL (with ",(0,s.jsx)(n.code,{children:"pgvector"})," extension) and DuckDB (with ",(0,s.jsx)(n.code,{children:"vss"})," extension)."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'type documents @table(name: "documents") {\n  id: Int! @pk\n  title: String!\n  content: String!\n  embedding: Vector @dim(len: 768)  # 768-dimensional vector\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"@dim"})," directive specifies vector dimensionality (checked during mutations and queries)."]}),"\n",(0,s.jsx)(n.h2,{id:"basic-similarity-search",children:"Basic Similarity Search"}),"\n",(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.code,{children:"similarity"})," argument to find similar items:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  documents(\n    similarity: {\n      name: "embedding"              # Vector field name\n      vector: [0.1, 0.2, 0.3, ...]  # Query vector\n      distance: Cosine               # Distance metric\n      limit: 10                      # Number of results\n    }\n  ) {\n    id\n    title\n    content\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," (required) - The vector field name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"vector"})," (required) - Query vector as array of floats"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"distance"})," (required) - Distance metric: ",(0,s.jsx)(n.code,{children:"Cosine"}),", ",(0,s.jsx)(n.code,{children:"L2"}),", or ",(0,s.jsx)(n.code,{children:"Inner"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"limit"})," (required) - Maximum number of results to return"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Vector input formats:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["JSON array: ",(0,s.jsx)(n.code,{children:"[0.1, 0.2, 0.3]"})]}),"\n",(0,s.jsxs)(n.li,{children:["String (PostgreSQL format): ",(0,s.jsx)(n.code,{children:'"[0.1,0.2,0.3]"'})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"distance-metrics",children:"Distance Metrics"}),"\n",(0,s.jsx)(n.p,{children:"Choose the appropriate distance metric for your use case:"}),"\n",(0,s.jsx)(n.h3,{id:"cosine-similarity",children:"Cosine Similarity"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for:"})," Text embeddings, normalized vectors"]}),"\n",(0,s.jsx)(n.p,{children:"Measures angle between vectors (ignores magnitude). Range: [-1, 1] where 1 is identical."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  articles(\n    similarity: {\n      name: "content_embedding"\n      vector: [...]\n      distance: Cosine\n      limit: 20\n    }\n  ) {\n    id\n    title\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"euclidean-distance-l2",children:"Euclidean Distance (L2)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for:"})," Image embeddings, unnormalized vectors"]}),"\n",(0,s.jsx)(n.p,{children:"Measures straight-line distance. Smaller values = more similar."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  images(\n    similarity: {\n      name: "visual_embedding"\n      vector: [...]\n      distance: L2\n      limit: 10\n    }\n  ) {\n    id\n    url\n    description\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"inner-product",children:"Inner Product"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for:"})," Collaborative filtering, recommendation systems"]}),"\n",(0,s.jsx)(n.p,{children:"Measures vector dot product. Higher values = more similar."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(\n    similarity: {\n      name: "user_preference_vector"\n      vector: [...]\n      distance: Inner\n      limit: 5\n    }\n  ) {\n    id\n    name\n    price\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"calculated-distance-fields",children:"Calculated Distance Fields"}),"\n",(0,s.jsx)(n.p,{children:"Access the distance value for each result using calculated fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  documents(\n    similarity: {\n      name: "embedding"\n      vector: [0.15, 0.22, 0.18, ...]\n      distance: Cosine\n      limit: 10\n    }\n  ) {\n    id\n    title\n    # Get distance from query vector\n    _embedding_distance(\n      vector: [0.15, 0.22, 0.18, ...]\n      distance: Cosine\n    )\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Generated field pattern:"})," ",(0,s.jsx)(n.code,{children:"_<field_name>_distance(vector: Vector!, distance: VectorDistanceType!): Float"})]}),"\n",(0,s.jsx)(n.p,{children:"This field is automatically generated for each vector field and can be used to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Display similarity scores to users"}),"\n",(0,s.jsx)(n.li,{children:"Debug search results"}),"\n",(0,s.jsx)(n.li,{children:"Implement custom ranking logic"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"sorting-by-distance-with-limit",children:"Sorting by Distance with Limit"}),"\n",(0,s.jsxs)(n.p,{children:["While ",(0,s.jsx)(n.code,{children:"similarity"})," argument handles ranking internally, you can also sort by distance explicitly:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  documents {\n    id\n    title\n    distance: _embedding_distance(\n      vector: [0.1, 0.2, 0.3, ...]\n      distance: Cosine\n    )\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," For performance, always use the ",(0,s.jsx)(n.code,{children:"similarity"})," argument with ",(0,s.jsx)(n.code,{children:"limit"})," instead of sorting all results. The ",(0,s.jsx)(n.code,{children:"similarity"})," argument uses vector indexes efficiently."]}),"\n",(0,s.jsx)(n.h2,{id:"combining-with-filters",children:"Combining with Filters"}),"\n",(0,s.jsxs)(n.p,{children:["Apply filters ",(0,s.jsx)(n.strong,{children:"before"})," similarity search to reduce the search space:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(\n    # Similarity search\n    similarity: {\n      name: "description_embedding"\n      vector: [0.1, 0.2, 0.3, ...]\n      distance: Cosine\n      limit: 5\n    }\n    # Filter first\n    filter: {\n      _and: [\n        { category: { eq: "electronics" } }\n        { in_stock: { eq: true } }\n        { price: { lte: 500.0 } }\n        { rating: { gte: 4.0 } }\n      ]\n    }\n  ) {\n    id\n    name\n    description\n    price\n    rating\n    similarity_score: _description_embedding_distance(\n      vector: [0.1, 0.2, 0.3, ...]\n      distance: Cosine\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Execution order:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Filter"})," applied first (reduces dataset)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Similarity search"})," on filtered results"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Top N"})," results returned (by ",(0,s.jsx)(n.code,{children:"limit"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This approach significantly improves performance by searching only relevant items."}),"\n",(0,s.jsx)(n.h2,{id:"multi-field-vector-search",children:"Multi-Field Vector Search"}),"\n",(0,s.jsx)(n.p,{children:"Search across multiple vector fields:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  products {\n    id\n    name\n    # Search by title embedding\n    title_similarity: _title_embedding_distance(\n      vector: [...]  # Title query vector\n      distance: Cosine\n    )\n    # Search by description embedding\n    description_similarity: _description_embedding_distance(\n      vector: [...]  # Description query vector\n      distance: Cosine\n    )\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can implement custom ranking by combining multiple similarity scores."}),"\n",(0,s.jsx)(n.h2,{id:"text-to-vector-search-with-embeddings",children:"Text-to-Vector Search with @embeddings"}),"\n",(0,s.jsxs)(n.p,{children:["If your data object has the ",(0,s.jsx)(n.code,{children:"@embeddings"})," directive, Hugr can generate embeddings from text queries:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'type articles @table(name: "articles") @embeddings(\n  provider: "openai"\n  model: "text-embedding-3-small"\n) {\n  id: Int! @pk\n  title: String!\n  content: String!\n  content_embedding: Vector @dim(len: 1536)\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Use the generated ",(0,s.jsx)(n.code,{children:"_distance_to_query"})," field:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  articles(\n    similarity: {\n      name: "content_embedding"\n      vector: [...]  # Generated from text\n      distance: Cosine\n      limit: 10\n    }\n  ) {\n    id\n    title\n    # Distance from text query\n    relevance: _distance_to_query(query: "machine learning tutorials")\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"_distance_to_query"})," field:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Accepts a text ",(0,s.jsx)(n.code,{children:"query"})," parameter"]}),"\n",(0,s.jsx)(n.li,{children:"Automatically generates embedding using configured provider"}),"\n",(0,s.jsx)(n.li,{children:"Returns distance from the text query"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"vector-search-in-relations",children:"Vector Search in Relations"}),"\n",(0,s.jsx)(n.p,{children:"Use vector search in nested queries:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  users {\n    id\n    name\n    # Find similar articles for each user\n    recommended_articles: articles(\n      similarity: {\n        name: "content_embedding"\n        vector: [...]  # User preference vector\n        distance: Cosine\n        limit: 5\n      }\n    ) {\n      id\n      title\n      relevance: _content_embedding_distance(\n        vector: [...]\n        distance: Cosine\n      )\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"vector-search-with-aggregations",children:"Vector Search with Aggregations"}),"\n",(0,s.jsx)(n.p,{children:"Combine vector search with aggregations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  # Find similar products\n  similar_products: products(\n    similarity: {\n      name: "feature_embedding"\n      vector: [...]\n      distance: Cosine\n      limit: 100\n    }\n  ) {\n    id\n    name\n    category\n  }\n\n  # Aggregate by category\n  similar_by_category: products_bucket_aggregation(\n    similarity: {\n      name: "feature_embedding"\n      vector: [...]\n      distance: Cosine\n      limit: 100\n    }\n  ) {\n    key {\n      category\n    }\n    aggregations {\n      _rows_count\n      price { avg }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"hybrid-search-vector--full-text",children:"Hybrid Search (Vector + Full-Text)"}),"\n",(0,s.jsx)(n.p,{children:"Combine vector search with text search:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query HybridSearch {\n  documents(\n    # Vector similarity\n    similarity: {\n      name: "embedding"\n      vector: [...]\n      distance: Cosine\n      limit: 50\n    }\n    # Text filter\n    filter: {\n      _or: [\n        { title: { ilike: "%machine learning%" } }\n        { content: { ilike: "%neural networks%" } }\n      ]\n    }\n  ) {\n    id\n    title\n    semantic_score: _embedding_distance(\n      vector: [...]\n      distance: Cosine\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"This finds documents that are both semantically similar AND contain specific keywords."}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-vector-indexes",children:"1. Create Vector Indexes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"PostgreSQL (pgvector):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE INDEX ON documents USING hnsw (embedding vector_cosine_ops);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"DuckDB (vss):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE INDEX idx_embeddings ON documents USING HNSW (embedding);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-choose-appropriate-limits",children:"2. Choose Appropriate Limits"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"# Good - Reasonable limit\nsimilarity: { limit: 10 }\n\n# Good - Moderate limit\nsimilarity: { limit: 50 }\n\n# Avoid - Too large\nsimilarity: { limit: 1000 }\n"})}),"\n",(0,s.jsx)(n.p,{children:"Larger limits require more computation. Use 10-100 for most use cases."}),"\n",(0,s.jsx)(n.h3,{id:"3-apply-filters-first",children:"3. Apply Filters First"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  products(\n    # Filter first (reduces search space)\n    filter: {\n      category: { eq: "electronics" }\n      in_stock: { eq: true }\n    }\n    # Then search\n    similarity: {\n      name: "embedding"\n      vector: [...]\n      distance: Cosine\n      limit: 10\n    }\n  ) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"4-use-appropriate-distance-metric",children:"4. Use Appropriate Distance Metric"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cosine"})," - For normalized embeddings (most text models)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"L2"})," - For unnormalized embeddings (images)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Inner"})," - For recommendation systems"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"5-batch-queries",children:"5. Batch Queries"}),"\n",(0,s.jsx)(n.p,{children:"Search multiple vectors in parallel:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  query1: documents(similarity: { name: "embedding", vector: [...], distance: Cosine, limit: 10 }) { id }\n  query2: documents(similarity: { name: "embedding", vector: [...], distance: Cosine, limit: 10 }) { id }\n  query3: documents(similarity: { name: "embedding", vector: [...], distance: Cosine, limit: 10 }) { id }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,s.jsx)(n.h3,{id:"semantic-document-search",children:"Semantic Document Search"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query SemanticSearch {\n  documents(\n    similarity: {\n      name: "content_embedding"\n      vector: [...]  # Embedding of "artificial intelligence applications"\n      distance: Cosine\n      limit: 20\n    }\n    filter: {\n      published: { eq: true }\n      language: { eq: "en" }\n    }\n  ) {\n    id\n    title\n    summary\n    relevance: _content_embedding_distance(\n      vector: [...]\n      distance: Cosine\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"image-similarity",children:"Image Similarity"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query SimilarImages {\n  images(\n    similarity: {\n      name: "visual_embedding"\n      vector: [...]  # Image embedding from CNN\n      distance: L2\n      limit: 12\n    }\n    filter: {\n      format: { in: ["jpg", "png"] }\n      width: { gte: 800 }\n    }\n  ) {\n    id\n    url\n    width\n    height\n    distance: _visual_embedding_distance(\n      vector: [...]\n      distance: L2\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"product-recommendations",children:"Product Recommendations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query ProductRecommendations {\n  products(\n    similarity: {\n      name: "feature_embedding"\n      vector: [...]  # User preference vector\n      distance: Inner\n      limit: 10\n    }\n    filter: {\n      in_stock: { eq: true }\n      price: { lte: 100.0 }\n    }\n  ) {\n    id\n    name\n    description\n    price\n    match_score: _feature_embedding_distance(\n      vector: [...]\n      distance: Inner\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"question-answering",children:"Question Answering"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query FindAnswer {\n  knowledge_base(\n    similarity: {\n      name: "question_embedding"\n      vector: [...]  # Embedding of user\'s question\n      distance: Cosine\n      limit: 5\n    }\n  ) {\n    id\n    question\n    answer\n    confidence: _question_embedding_distance(\n      vector: [...]\n      distance: Cosine\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"duplicate-detection",children:"Duplicate Detection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query FindDuplicates {\n  documents(\n    similarity: {\n      name: "content_embedding"\n      vector: [...]  # Embedding of document to check\n      distance: Cosine\n      limit: 10\n    }\n    filter: {\n      id: { ne: 123 }  # Exclude the document itself\n    }\n  ) {\n    id\n    title\n    similarity: _content_embedding_distance(\n      vector: [...]\n      distance: Cosine\n    )\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"vector-filtering-limitations",children:"Vector Filtering Limitations"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," Vector fields support only ",(0,s.jsx)(n.code,{children:"is_null"})," filter:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"query {\n  documents(\n    filter: {\n      embedding: { is_null: false }\n    }\n  ) {\n    id\n    title\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You ",(0,s.jsx)(n.strong,{children:"cannot"})," filter by vector values directly. Use ",(0,s.jsx)(n.code,{children:"similarity"})," argument for vector-based queries."]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Learn about ",(0,s.jsx)(n.a,{href:"/docs/engine-configuration/schema-definition/data-types#vector",children:"Data Types - Vector"})," for vector configuration"]}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/filtering",children:"Filtering"})," for combining vector search with attribute filters"]}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/aggregations",children:"Aggregations"})," for aggregating search results"]}),"\n",(0,s.jsxs)(n.li,{children:["Explore ",(0,s.jsx)(n.a,{href:"/docs/graphql/queries/basic-queries",children:"Basic Queries"})," for general query patterns"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>a});var r=i(6540);const s={},t=r.createContext(s);function c(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);